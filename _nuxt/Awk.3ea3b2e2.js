import{_ as x,m as w,r as m,o as h,c as y,a as t,b as o,w as e,d as l,t as b,z as V,f as k,j as I,F as C,x as E}from"./entry.85fce134.js";import{B as R}from"./aioli.d4620e8e.js";import{a as B}from"./ace.61508a3f.js";const T={props:{text:String,command:String},setup(d){var a=new Date().valueOf(),s="editorArea"+a,i="output"+a;let r=w().params.tool,p="/"+E().public.repo_name.split("/")[1]+"/man/"+r+".html";return{idEditor:s,idOutput:i,tool:r,manPage:p}},data(){return{dialog:!1,editor:null,commandInput:null,noResult:!1}},mounted(){this.commandInput=this.command,this.editor=B.edit(this.idEditor,{tabSize:4,autoScrollEditorIntoView:!0,maxLines:50,minLines:1})},methods:{async runTool(){document.getElementById(this.idOutput).innerHTML="Loading...",this.noResult=!1;const d=await new R(["gawk/5.1.0"]);var a={name:"data.txt",data:this.editor.getValue()};await d.mount(a),console.log(this.commandInput);var s=this.commandInput;s=s.replace(this.tool,"").trim();var i=this.parseFlags(s).map(r=>r.replaceAll("'",""));console.log(i);const n=await d.exec("gawk",i);n==""&&(this.noResult=!0),console.log(n),document.getElementById(this.idOutput).innerHTML=n},parseFlags(d){return d.match(/(?:[^\s']+|'[^']*')+/g)||[]}}},L=t("p",{class:"text-h6"},"File content",-1),O=t("code",null,"data.txt",-1),F={style:{"max-height":"200px","overflow-y":"auto"}},N=["id"],S=t("p",{class:"text-h6"},"Command",-1),A=t("code",null,"data.txt",-1),z=["src"],P=t("p",{class:"text-h6"},"Output",-1),D=["id"];function H(d,a,s,i,n,r){const u=m("v-icon"),_=m("v-btn"),p=m("v-card-text"),f=m("v-card"),g=m("v-dialog"),v=m("v-text-field");return h(),y(C,null,[L,t("p",null,[t("b",null,[o(u,null,{default:e(()=>[l("mdi-information")]),_:1}),l(" This content will be written to the file "),O])]),t("div",F,[t("div",{id:i.idEditor,style:{width:"100%",height:"200px"}},b(s.text),9,N)]),S,t("p",null,[t("b",null,[o(u,null,{default:e(()=>[l("mdi-information")]),_:1}),l(" The file name must always be "),A])]),o(g,{modelValue:n.dialog,"onUpdate:modelValue":a[0]||(a[0]=c=>n.dialog=c),width:"75%"},{activator:e(({props:c})=>[o(_,V({color:"primary"},c,{size:"small",class:"mb-4"}),{default:e(()=>[o(u,null,{default:e(()=>[l("mdi-book")]),_:1}),l(" Read man ")]),_:2},1040)]),default:e(()=>[o(f,null,{default:e(()=>[o(p,{style:{height:"90vh"}},{default:e(()=>[t("iframe",{src:i.manPage,frameborder:"0",style:{height:"100%",width:"100%"}},null,8,z)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(v,{modelValue:n.commandInput,"onUpdate:modelValue":a[1]||(a[1]=c=>n.commandInput=c),style:{"font-family":"monospace, monospace !important"}},null,8,["modelValue"]),o(_,{class:"mt-4",onClick:r.runTool},{default:e(()=>[l("Run tool ")]),_:1},8,["onClick"]),P,t("pre",{id:i.idOutput},"Await run click...",8,D),o(f,{color:"info"},{default:e(()=>[n.noResult?(h(),k(p,{key:0},{default:e(()=>[o(u,null,{default:e(()=>[l("mdi-information")]),_:1}),l(" No result ")]),_:1})):I("",!0)]),_:1})],64)}const q=x(T,[["render",H]]);export{q as default};
