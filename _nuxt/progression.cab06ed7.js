import{_ as q,a as N}from"./flag-icons.min.e798bf7e.js";import{_ as T,i as B,r as f,o as t,c as a,b as c,w as i,a as s,t as S,d as m,f as p,j as v,F as y,g as x,n as V}from"./entry.85fce134.js";import{u as P}from"./index.853b8c0b.js";import{_ as j}from"./CardSession.7e805f88.js";import{q as z}from"./query.37f779ca.js";import"./index.cd32510b.js";import"./utils.3749b22d.js";import"./preview.f794f7f3.js";const F={props:{itemSession:null},methods:{changePath(o){var n=o.replace("/_dir",""),e=n.split("/");e=e[e.length-1],B().push({path:n.replace(e,""),query:{id:e}})},changePathStep(o){const n=o.split("/"),e=n[n.length],l=o.replace(e,"");B().push({path:l,query:{id:e}})},changeColor(o,n="grey"){const l=P("my-progression-store",{},localStorage,{mergeDefaults:!0});return o in l.value?l.value[o].status=="started"?"blue":"green":n}}},L={key:0},O=["src"],R={class:"mb-2"},A={class:"text-right me-2"},M=s("p",null,[s("b",null,"Progression")],-1),U={class:"overflow-y-auto",style:{width:"100%"}},G={class:"d-flex flex-row"};function H(o,n,e,l,b,r){const u=f("v-btn"),k=q,_=N,w=f("v-timeline-item"),E=f("v-timeline"),d=f("v-icon"),h=f("v-sheet"),C=f("v-card");return e.itemSession?(t(),a("div",L,[c(C,{class:"d-flex flex-row"},{default:i(()=>[s("img",{src:e.itemSession.navigation.language,alt:"",style:{height:"50px"},class:"ma-4"},null,8,O),s("div",null,[s("h1",null,S(e.itemSession.title),1),s("p",R,S(e.itemSession.navigation.description),1),s("div",A,[c(u,{variant:"text",onClick:n[0]||(n[0]=g=>r.changePath(e.itemSession._path))},{default:i(()=>[m("+ Read more")]),_:1})]),e.itemSession.navigation.belt?(t(),p(k,{key:0,belts:e.itemSession.navigation.belt},null,8,["belts"])):v("",!0),e.itemSession.navigation.tags?(t(),p(_,{key:1,tags:e.itemSession.navigation.tags},null,8,["tags"])):v("",!0),M,s("div",U,[c(E,{"truncate-line":"both",direction:"horizontal"},{default:i(()=>[(t(!0),a(y,null,x(e.itemSession.stepsDict,g=>(t(),p(w,{key:g,"dot-color":r.changeColor(g.path),onClick:D=>r.changePathStep(g.path)},null,8,["dot-color","onClick"]))),128))]),_:1})]),s("div",G,[e.itemSession.navigation.author?(t(),p(h,{key:0,class:"ma-2 pa-2"},{default:i(()=>[c(d,{class:"me-2"},{default:i(()=>[m("mdi-account-edit")]),_:1}),m(" "+S(e.itemSession.navigation.author),1)]),_:1})):v("",!0),e.itemSession.navigation.language?(t(),p(h,{key:1,class:"ma-2 pa-2"},{default:i(()=>[c(d,{class:"me-2"},{default:i(()=>[m("mdi-account-voice")]),_:1}),s("span",{class:V("ma-1 fi fi-"+e.itemSession.navigation.language)},null,2)]),_:1})):v("",!0),e.itemSession.navigation.duration?(t(),p(h,{key:2,class:"ma-2 pa-2"},{default:i(()=>[c(d,{class:"me-2"},{default:i(()=>[m("mdi-clock-time-five-outline")]),_:1}),m(" "+S(e.itemSession.navigation.duration),1)]),_:1})):v("",!0),e.itemSession.type?(t(),p(h,{key:3,class:"ma-2 pa-2"},{default:i(()=>[c(d,{class:"me-2"},{default:i(()=>[m("mdi-head-lightbulb")]),_:1}),m(" "+S(e.itemSession.type),1)]),_:1})):v("",!0)])])]),_:1})])):v("",!0)}const I=T(F,[["render",H]]),J={data(){return{progressionElements:{}}},async created(){await this.getState()},methods:{clearTitle(o){const n=o.replace("-"," ");return n.charAt(0).toUpperCase()+n.slice(1)},async getState(){const n=P("my-progression-store",{},localStorage,{mergeDefaults:!0});for(const[l,b]of Object.entries(n.value)){const r=l.split("/")[1];r in this.progressionElements||(this.progressionElements[r]={started:[],finish:[]});const u=await z(l+"/_dir").findOne();if(r=="learning-path"){var e=[];for(const k in u.navigation.steps){const _="/"+l.split("/")[1]+"/"+u.navigation.steps[k];_ in n.value?n.value[_].status=="started"?e.push({color:"blue",path:_}):e.push({color:"green",path:_}):e.push({color:"grey",path:_}),u.stepsDict=e}}u.type=l.split("/")[2],this.progressionElements[r][b.status].push(u)}},clear(){const n=P("my-progression-store",{},localStorage,{mergeDefaults:!0});n.value=null,this.progressionElements={}}}},K=s("p",{class:"text-h2 dividerline mt-4 mb-8",style:{color:"#0080bc"}}," My progression ",-1),Q={class:"text-h3 mb-4"},W={key:0},X={class:"text-h4 mb-4"},Y={key:0},Z=s("br",null,null,-1),$={key:1},ee=s("br",null,null,-1);function te(o,n,e,l,b,r){const u=f("v-btn"),k=I,_=j,w=f("v-container");return t(),p(w,null,{default:i(()=>[K,c(u,{onClick:r.clear,class:"my-4"},{default:i(()=>[m("Clear progression")]),_:1},8,["onClick"]),(t(!0),a(y,null,x(b.progressionElements,(E,d)=>(t(),a("div",{key:d},[s("p",Q,S(r.clearTitle(d)),1),(t(!0),a(y,null,x(E,(h,C)=>(t(),a("div",{key:C},[h.length!=0?(t(),a("div",W,[s("p",X,S(r.clearTitle(C)),1),d=="learning-path"?(t(),a("div",Y,[(t(!0),a(y,null,x(h,(g,D)=>(t(),a(y,{key:D},[c(k,{itemSession:g},null,8,["itemSession"]),Z],64))),128))])):(t(),a("div",$,[(t(!0),a(y,null,x(h,(g,D)=>(t(),a(y,{key:D},[c(_,{itemSession:g},null,8,["itemSession"]),ee],64))),128))]))])):v("",!0)]))),128))]))),128))]),_:1})}const ue=T(J,[["render",te]]);export{ue as default};
