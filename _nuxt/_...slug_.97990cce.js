import{_ as __nuxt_component_0}from"./DisplayContent.8f66d475.js";import{a as ace$1}from"./ace.61508a3f.js";import"./mode-r.c1dbfb09.js";import{u as useCommandStore}from"./useCommandStore.0bc2297b.js";import{_ as _export_sfc,r as resolveComponent,o as openBlock,c as createElementBlock,a as createBaseVNode,b as createVNode,w as withCtx,d as createTextVNode,F as Fragment,k as __vitePreload,l as commonjsGlobal,m as useRoute,q as ref,s as storeToRefs,h as useAsyncData,i as useRouter,g as renderList,t as toDisplayString,f as createBlock,v as withKeys}from"./entry.85fce134.js";import{f as fetchContentNavigation}from"./navigation.d4a9cb2e.js";var modePython={exports:{}};(function(e,t){ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,r,T){var p=n("../lib/oop"),s=n("./text_highlight_rules").TextHighlightRules,_=function(){var U="and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield|async|await|nonlocal",q="True|False|None|NotImplemented|Ellipsis|__debug__",Z="abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|apply|delattr|help|next|setattr|set|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|ascii|breakpoint|bytes",ge=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":Z,"variable.language":"self|cls","constant.language":q,keyword:U},"identifier"),pe="[uU]?",te="[rR]",ue="[fF]",c="(?:[rR][fF]|[fF][rR])",C="(?:(?:[1-9]\\d*)|(?:0))",de="(?:0[oO]?[0-7]+)",o="(?:0[xX][\\dA-Fa-f]+)",J="(?:0[bB][01]+)",X="(?:"+C+"|"+de+"|"+o+"|"+J+")",me="(?:[eE][+-]?\\d+)",F="(?:\\.\\d+)",w="(?:\\d+)",d="(?:(?:"+w+"?"+F+")|(?:"+w+"\\.))",O="(?:(?:"+d+"|"+w+")"+me+")",a="(?:"+O+"|"+d+")",j=`\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})`;this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:pe+'"{3}',next:"qqstring3"},{token:"string",regex:pe+'"(?=.)',next:"qqstring"},{token:"string",regex:pe+"'{3}",next:"qstring3"},{token:"string",regex:pe+"'(?=.)",next:"qstring"},{token:"string",regex:te+'"{3}',next:"rawqqstring3"},{token:"string",regex:te+'"(?=.)',next:"rawqqstring"},{token:"string",regex:te+"'{3}",next:"rawqstring3"},{token:"string",regex:te+"'(?=.)",next:"rawqstring"},{token:"string",regex:ue+'"{3}',next:"fqqstring3"},{token:"string",regex:ue+'"(?=.)',next:"fqqstring"},{token:"string",regex:ue+"'{3}",next:"fqstring3"},{token:"string",regex:ue+"'(?=.)",next:"fqstring"},{token:"string",regex:c+'"{3}',next:"rfqqstring3"},{token:"string",regex:c+'"(?=.)',next:"rfqqstring"},{token:"string",regex:c+"'{3}",next:"rfqstring3"},{token:"string",regex:c+"'(?=.)",next:"rfqstring"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|@|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"punctuation",regex:",|:|;|\\->|\\+=|\\-=|\\*=|\\/=|\\/\\/=|%=|@=|&=|\\|=|^=|>>=|<<=|\\*\\*="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:["keyword","text","entity.name.function"],regex:"(def|class)(\\s+)([\\u00BF-\\u1FFF\\u2C00-\\uD7FF\\w]+)"},{token:"text",regex:"\\s+"},{include:"constants"}],qqstring3:[{token:"constant.language.escape",regex:j},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:j},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:j},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:j},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],rawqqstring3:[{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],rawqstring3:[{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],rawqqstring:[{token:"string",regex:"\\\\$",next:"rawqqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],rawqstring:[{token:"string",regex:"\\\\$",next:"rawqstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],fqqstring3:[{token:"constant.language.escape",regex:j},{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring3:[{token:"constant.language.escape",regex:j},{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqqstring:[{token:"constant.language.escape",regex:j},{token:"string",regex:"\\\\$",next:"fqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring:[{token:"constant.language.escape",regex:j},{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring3:[{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring3:[{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring:[{token:"string",regex:"\\\\$",next:"rfqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring:[{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstringParRules:[{token:"paren.lparen",regex:"[\\[\\(]"},{token:"paren.rparen",regex:"[\\]\\)]"},{token:"string",regex:"\\s+"},{token:"string",regex:"'[^']*'"},{token:"string",regex:'"[^"]*"'},{token:"function.support",regex:"(!s|!r|!a)"},{include:"constants"},{token:"paren.rparen",regex:"}",next:"pop"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"}],constants:[{token:"constant.numeric",regex:"(?:"+a+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:a},{token:"constant.numeric",regex:X+"[lL]\\b"},{token:"constant.numeric",regex:X+"\\b"},{token:["punctuation","function.support"],regex:"(\\.)([a-zA-Z_]+)\\b"},{token:ge,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]},this.normalizeRules()};p.inherits(_,s),r.PythonHighlightRules=_}),ace.define("ace/mode/folding/pythonic",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(n,r,T){var p=n("../../lib/oop"),s=n("./fold_mode").FoldMode,_=r.FoldMode=function(U){this.foldingStartMarker=new RegExp("([\\[{])(?:\\s*)$|("+U+")(?:\\s*)(?:#.*)?$")};p.inherits(_,s),function(){this.getFoldWidgetRange=function(U,q,Z){var ge=U.getLine(Z),pe=ge.match(this.foldingStartMarker);if(pe)return pe[1]?this.openingBracketBlock(U,pe[1],Z,pe.index):pe[2]?this.indentationBlock(U,Z,pe.index+pe[2].length):this.indentationBlock(U,Z)}}.call(_.prototype)}),ace.define("ace/mode/python",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/python_highlight_rules","ace/mode/folding/pythonic","ace/range"],function(n,r,T){var p=n("../lib/oop"),s=n("./text").Mode,_=n("./python_highlight_rules").PythonHighlightRules,U=n("./folding/pythonic").FoldMode,q=n("../range").Range,Z=function(){this.HighlightRules=_,this.foldingRules=new U("\\:"),this.$behaviour=this.$defaultBehaviour};p.inherits(Z,s),function(){this.lineCommentStart="#",this.$pairQuotesAfter={"'":/[ruf]/i,'"':/[ruf]/i},this.getNextLineIndent=function(pe,te,ue){var c=this.$getIndent(te),C=this.getTokenizer().getLineTokens(te,pe),de=C.tokens;if(de.length&&de[de.length-1].type=="comment")return c;if(pe=="start"){var o=te.match(/^.*[\{\(\[:]\s*$/);o&&(c+=ue)}return c};var ge={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(pe,te,ue){if(ue!==`\r
`&&ue!=="\r"&&ue!==`
`)return!1;var c=this.getTokenizer().getLineTokens(te.trim(),pe).tokens;if(!c)return!1;do var C=c.pop();while(C&&(C.type=="comment"||C.type=="text"&&C.value.match(/^\s+$/)));return C?C.type=="keyword"&&ge[C.value]:!1},this.autoOutdent=function(pe,te,ue){ue+=1;var c=this.$getIndent(te.getLine(ue)),C=te.getTabString();c.slice(-C.length)==C&&te.remove(new q(ue,c.length-C.length,ue,c.length))},this.$id="ace/mode/python",this.snippetFileId="ace/snippets/python"}.call(Z.prototype),r.Mode=Z}),function(){ace.require(["ace/mode/python"],function(n){e&&(e.exports=n)})}()})(modePython);var modeRuby={exports:{}};(function(e,t){ace.define("ace/mode/ruby_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,r,T){var p=n("../lib/oop"),s=n("./text_highlight_rules").TextHighlightRules,_=r.constantOtherSymbol={token:"constant.other.symbol.ruby",regex:"[:](?:[A-Za-z_]|[@$](?=[a-zA-Z0-9_]))[a-zA-Z0-9_]*[!=?]?"};r.qString={token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},r.qqString={token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},r.tString={token:"string",regex:"[`](?:(?:\\\\.)|(?:[^'\\\\]))*?[`]"};var U=r.constantNumericHex={token:"constant.numeric",regex:"0[xX][0-9a-fA-F](?:[0-9a-fA-F]|_(?=[0-9a-fA-F]))*\\b"},q=r.constantNumericBinary={token:"constant.numeric",regex:/\b(0[bB][01](?:[01]|_(?=[01]))*)\b/},Z=r.constantNumericDecimal={token:"constant.numeric",regex:/\b(0[dD](?:[1-9](?:[\d]|_(?=[\d]))*|0))\b/},ge=r.constantNumericDecimal={token:"constant.numeric",regex:/\b(0[oO]?(?:[1-7](?:[0-7]|_(?=[0-7]))*|0))\b/},pe=r.constantNumericRational={token:"constant.numeric",regex:/\b([\d]+(?:[./][\d]+)?ri?)\b/},te=r.constantNumericComplex={token:"constant.numeric",regex:/\b([\d]i)\b/},ue=r.constantNumericFloat={token:"constant.numeric",regex:"[+-]?\\d(?:\\d|_(?=\\d))*(?:(?:\\.\\d(?:\\d|_(?=\\d))*)?(?:[eE][+-]?\\d+)?)?i?\\b"},c=r.instanceVariable={token:"variable.instance",regex:"@{1,2}[a-zA-Z_\\d]+"},C=function(){var de="abort|Array|assert|assert_equal|assert_not_equal|assert_same|assert_not_same|assert_nil|assert_not_nil|assert_match|assert_no_match|assert_in_delta|assert_throws|assert_raise|assert_nothing_raised|assert_instance_of|assert_kind_of|assert_respond_to|assert_operator|assert_send|assert_difference|assert_no_difference|assert_recognizes|assert_generates|assert_response|assert_redirected_to|assert_template|assert_select|assert_select_email|assert_select_rjs|assert_select_encoded|css_select|at_exit|attr|attr_writer|attr_reader|attr_accessor|attr_accessible|autoload|binding|block_given?|callcc|caller|catch|chomp|chomp!|chop|chop!|defined?|delete_via_redirect|eval|exec|exit|exit!|fail|Float|flunk|follow_redirect!|fork|form_for|form_tag|format|gets|global_variables|gsub|gsub!|get_via_redirect|host!|https?|https!|include|Integer|lambda|link_to|link_to_unless_current|link_to_function|link_to_remote|load|local_variables|loop|open|open_session|p|print|printf|proc|putc|puts|post_via_redirect|put_via_redirect|raise|rand|raw|readline|readlines|redirect?|request_via_redirect|require|scan|select|set_trace_func|sleep|split|sprintf|srand|String|stylesheet_link_tag|syscall|system|sub|sub!|test|throw|trace_var|trap|untrace_var|atan2|cos|exp|frexp|ldexp|log|log10|sin|sqrt|tan|render|javascript_include_tag|csrf_meta_tag|label_tag|text_field_tag|submit_tag|check_box_tag|content_tag|radio_button_tag|text_area_tag|password_field_tag|hidden_field_tag|fields_for|select_tag|options_for_select|options_from_collection_for_select|collection_select|time_zone_select|select_date|select_time|select_datetime|date_select|time_select|datetime_select|select_year|select_month|select_day|select_hour|select_minute|select_second|file_field_tag|file_field|respond_to|skip_before_filter|around_filter|after_filter|verify|protect_from_forgery|rescue_from|helper_method|redirect_to|before_filter|send_data|send_file|validates_presence_of|validates_uniqueness_of|validates_length_of|validates_format_of|validates_acceptance_of|validates_associated|validates_exclusion_of|validates_inclusion_of|validates_numericality_of|validates_with|validates_each|authenticate_or_request_with_http_basic|authenticate_or_request_with_http_digest|filter_parameter_logging|match|get|post|resources|redirect|scope|assert_routing|translate|localize|extract_locale_from_tld|caches_page|expire_page|caches_action|expire_action|cache|expire_fragment|expire_cache_for|observe|cache_sweeper|has_many|has_one|belongs_to|has_and_belongs_to_many|p|warn|refine|using|module_function|extend|alias_method|private_class_method|remove_method|undef_method",o="alias|and|BEGIN|begin|break|case|class|def|defined|do|else|elsif|END|end|ensure|__FILE__|finally|for|gem|if|in|__LINE__|module|next|not|or|private|protected|public|redo|rescue|retry|return|super|then|undef|unless|until|when|while|yield|__ENCODING__|prepend",J="true|TRUE|false|FALSE|nil|NIL|ARGF|ARGV|DATA|ENV|RUBY_PLATFORM|RUBY_RELEASE_DATE|RUBY_VERSION|STDERR|STDIN|STDOUT|TOPLEVEL_BINDING|RUBY_PATCHLEVEL|RUBY_REVISION|RUBY_COPYRIGHT|RUBY_ENGINE|RUBY_ENGINE_VERSION|RUBY_DESCRIPTION",X="$DEBUG|$defout|$FILENAME|$LOAD_PATH|$SAFE|$stdin|$stdout|$stderr|$VERBOSE|$!|root_url|flash|session|cookies|params|request|response|logger|self",me=this.$keywords=this.createKeywordMapper({keyword:o,"constant.language":J,"variable.language":X,"support.function":de,"invalid.deprecated":"debugger"},"identifier"),F=`\\\\(?:n(?:[1-7][0-7]{0,2}|0)|[nsrtvfbae'"\\\\]|c(?:\\\\M-)?.|M-(?:\\\\C-|\\\\c)?.|C-(?:\\\\M-)?.|[0-7]{3}|x[\\da-fA-F]{2}|u[\\da-fA-F]{4}|u{[\\da-fA-F]{1,6}(?:\\s[\\da-fA-F]{1,6})*})`,w={"(":")","[":"]","{":"}","<":">","^":"^","|":"|","%":"%"};this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"comment.multiline",regex:"^=begin(?=$|\\s.*$)",next:"comment"},{token:"string.regexp",regex:/[/](?=.*\/)/,next:"regex"},[{token:["constant.other.symbol.ruby","string.start"],regex:/(:)?(")/,push:[{token:"constant.language.escape",regex:F},{token:"paren.start",regex:/#{/,push:"start"},{token:"string.end",regex:/"/,next:"pop"},{defaultToken:"string"}]},{token:"string.start",regex:/`/,push:[{token:"constant.language.escape",regex:F},{token:"paren.start",regex:/#{/,push:"start"},{token:"string.end",regex:/`/,next:"pop"},{defaultToken:"string"}]},{token:["constant.other.symbol.ruby","string.start"],regex:/(:)?(')/,push:[{token:"constant.language.escape",regex:/\\['\\]/},{token:"string.end",regex:/'/,next:"pop"},{defaultToken:"string"}]},{token:"string.start",regex:/%[qwx]([(\[<{^|%])/,onMatch:function(d,O,a){a.length&&(a=[]);var j=d[d.length-1];return a.unshift(j,O),this.next="qStateWithoutInterpolation",this.token}},{token:"string.start",regex:/%[QWX]?([(\[<{^|%])/,onMatch:function(d,O,a){a.length&&(a=[]);var j=d[d.length-1];return a.unshift(j,O),this.next="qStateWithInterpolation",this.token}},{token:"constant.other.symbol.ruby",regex:/%[si]([(\[<{^|%])/,onMatch:function(d,O,a){a.length&&(a=[]);var j=d[d.length-1];return a.unshift(j,O),this.next="sStateWithoutInterpolation",this.token}},{token:"constant.other.symbol.ruby",regex:/%[SI]([(\[<{^|%])/,onMatch:function(d,O,a){a.length&&(a=[]);var j=d[d.length-1];return a.unshift(j,O),this.next="sStateWithInterpolation",this.token}},{token:"string.regexp",regex:/%[r]([(\[<{^|%])/,onMatch:function(d,O,a){a.length&&(a=[]);var j=d[d.length-1];return a.unshift(j,O),this.next="rState",this.token}}],{token:"punctuation",regex:"::"},c,{token:"variable.global",regex:"[$][a-zA-Z_\\d]+"},{token:"support.class",regex:"[A-Z][a-zA-Z_\\d]*"},{token:["punctuation.operator","support.function"],regex:/(\.)([a-zA-Z_\d]+)(?=\()/},{token:["punctuation.operator","identifier"],regex:/(\.)([a-zA-Z_][a-zA-Z_\d]*)/},{token:"string.character",regex:"\\B\\?(?:"+F+"|\\S)"},{token:"punctuation.operator",regex:/\?(?=.+:)/},pe,te,_,U,ue,q,Z,ge,{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:me,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"punctuation.separator.key-value",regex:"=>"},{stateName:"heredoc",onMatch:function(d,O,a){var j=d[2]=="-"||d[2]=="~"?"indentedHeredoc":"heredoc",re=d.split(this.splitRegex);return a.push(j,re[3]),[{type:"constant",value:re[1]},{type:"string",value:re[2]},{type:"support.class",value:re[3]},{type:"string",value:re[4]}]},regex:"(<<[-~]?)(['\"`]?)([\\w]+)(['\"`]?)",rules:{heredoc:[{onMatch:function(d,O,a){return d===a[1]?(a.shift(),a.shift(),this.next=a[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^ +"},{onMatch:function(d,O,a){return d===a[1]?(a.shift(),a.shift(),this.next=a[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(d,O){return O[0]==="heredoc"||O[0]==="indentedHeredoc"?O[0]:d}},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|/|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\||\\b(?:in|instanceof|new|delete|typeof|void)"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]",onMatch:function(d,O,a){return this.next="",d=="}"&&a.length>1&&a[1]!="start"&&(a.shift(),this.next=a.shift()),this.token}},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:/[?:,;.]/}],comment:[{token:"comment.multiline",regex:"^=end(?=$|\\s.*$)",next:"start"},{token:"comment",regex:".+"}],qStateWithInterpolation:[{token:"string.start",regex:/[(\[<{]/,onMatch:function(d,O,a){return a.length&&d===a[0]?(a.unshift(d,O),this.token):"string"}},{token:"constant.language.escape",regex:F},{token:"constant.language.escape",regex:/\\./},{token:"paren.start",regex:/#{/,push:"start"},{token:"string.end",regex:/[)\]>}^|%]/,onMatch:function(d,O,a){return a.length&&d===w[a[0]]?(a.shift(),this.next=a.shift(),this.token):(this.next="","string")}},{defaultToken:"string"}],qStateWithoutInterpolation:[{token:"string.start",regex:/[(\[<{]/,onMatch:function(d,O,a){return a.length&&d===a[0]?(a.unshift(d,O),this.token):"string"}},{token:"constant.language.escape",regex:/\\['\\]/},{token:"constant.language.escape",regex:/\\./},{token:"string.end",regex:/[)\]>}^|%]/,onMatch:function(d,O,a){return a.length&&d===w[a[0]]?(a.shift(),this.next=a.shift(),this.token):(this.next="","string")}},{defaultToken:"string"}],sStateWithoutInterpolation:[{token:"constant.other.symbol.ruby",regex:/[(\[<{]/,onMatch:function(d,O,a){return a.length&&d===a[0]?(a.unshift(d,O),this.token):"constant.other.symbol.ruby"}},{token:"constant.other.symbol.ruby",regex:/[)\]>}^|%]/,onMatch:function(d,O,a){return a.length&&d===w[a[0]]?(a.shift(),this.next=a.shift(),this.token):(this.next="","constant.other.symbol.ruby")}},{defaultToken:"constant.other.symbol.ruby"}],sStateWithInterpolation:[{token:"constant.other.symbol.ruby",regex:/[(\[<{]/,onMatch:function(d,O,a){return a.length&&d===a[0]?(a.unshift(d,O),this.token):"constant.other.symbol.ruby"}},{token:"constant.language.escape",regex:F},{token:"constant.language.escape",regex:/\\./},{token:"paren.start",regex:/#{/,push:"start"},{token:"constant.other.symbol.ruby",regex:/[)\]>}^|%]/,onMatch:function(d,O,a){return a.length&&d===w[a[0]]?(a.shift(),this.next=a.shift(),this.token):(this.next="","constant.other.symbol.ruby")}},{defaultToken:"constant.other.symbol.ruby"}],rState:[{token:"string.regexp",regex:/[(\[<{]/,onMatch:function(d,O,a){return a.length&&d===a[0]?(a.unshift(d,O),this.token):"constant.language.escape"}},{token:"paren.start",regex:/#{/,push:"start"},{token:"string.regexp",regex:/\//},{token:"string.regexp",regex:/[)\]>}^|%][imxouesn]*/,onMatch:function(d,O,a){return a.length&&d[0]===w[a[0]]?(a.shift(),this.next=a.shift(),this.token):(this.next="","constant.language.escape")}},{include:"regex"},{defaultToken:"string.regexp"}],regex:[{token:"regexp.keyword",regex:/\\[wWdDhHsS]/},{token:"constant.language.escape",regex:/\\[AGbBzZ]/},{token:"constant.language.escape",regex:/\\g<[a-zA-Z0-9]*>/},{token:["constant.language.escape","regexp.keyword","constant.language.escape"],regex:/(\\p{\^?)(Alnum|Alpha|Blank|Cntrl|Digit|Graph|Lower|Print|Punct|Space|Upper|XDigit|Word|ASCII|Any|Assigned|Arabic|Armenian|Balinese|Bengali|Bopomofo|Braille|Buginese|Buhid|Canadian_Aboriginal|Carian|Cham|Cherokee|Common|Coptic|Cuneiform|Cypriot|Cyrillic|Deseret|Devanagari|Ethiopic|Georgian|Glagolitic|Gothic|Greek|Gujarati|Gurmukhi|Han|Hangul|Hanunoo|Hebrew|Hiragana|Inherited|Kannada|Katakana|Kayah_Li|Kharoshthi|Khmer|Lao|Latin|Lepcha|Limbu|Linear_B|Lycian|Lydian|Malayalam|Mongolian|Myanmar|New_Tai_Lue|Nko|Ogham|Ol_Chiki|Old_Italic|Old_Persian|Oriya|Osmanya|Phags_Pa|Phoenician|Rejang|Runic|Saurashtra|Shavian|Sinhala|Sundanese|Syloti_Nagri|Syriac|Tagalog|Tagbanwa|Tai_Le|Tamil|Telugu|Thaana|Thai|Tibetan|Tifinagh|Ugaritic|Vai|Yi|Ll|Lm|Lt|Lu|Lo|Mn|Mc|Me|Nd|Nl|Pc|Pd|Ps|Pe|Pi|Pf|Po|No|Sm|Sc|Sk|So|Zs|Zl|Zp|Cc|Cf|Cn|Co|Cs|N|L|M|P|S|Z|C)(})/},{token:["constant.language.escape","invalid","constant.language.escape"],regex:/(\\p{\^?)([^/]*)(})/},{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:/[/][imxouesn]*/,next:"start"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?(?:[:=!>]|<'?[a-zA-Z]*'?>|<[=!])|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"regexp.keyword",regex:/\[\[:(?:alnum|alpha|blank|cntrl|digit|graph|lower|print|punct|space|upper|xdigit|word|ascii):\]\]/},{token:"constant.language.escape",regex:/\[\^?/,push:"regex_character_class"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword",regex:/\\[wWdDhHsS]/},{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:/&?&?\[\^?/,push:"regex_character_class"},{token:"constant.language.escape",regex:"]",next:"pop"},{token:"constant.language.escape",regex:"-"},{defaultToken:"string.regexp.characterclass"}]},this.normalizeRules()};p.inherits(C,s),r.RubyHighlightRules=C}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(n,r,T){var p=n("../range").Range,s=function(){};(function(){this.checkOutdent=function(_,U){return/^\s+$/.test(_)?/^\s*\}/.test(U):!1},this.autoOutdent=function(_,U){var q=_.getLine(U),Z=q.match(/^(\s*\})/);if(!Z)return 0;var ge=Z[1].length,pe=_.findMatchingBracket({row:U,column:ge});if(!pe||pe.row==U)return 0;var te=this.$getIndent(_.getLine(pe.row));_.replace(new p(U,0,U,ge-1),te)},this.$getIndent=function(_){return _.match(/^\s*/)[0]}}).call(s.prototype),r.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/ruby",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range","ace/token_iterator"],function(n,r,T){var p=n("../../lib/oop"),s=n("./fold_mode").FoldMode,_=n("../../range").Range,U=n("../../token_iterator").TokenIterator,q=r.FoldMode=function(){};p.inherits(q,s),function(){this.indentKeywords={class:1,def:1,module:1,do:1,unless:1,if:1,while:1,for:1,until:1,begin:1,else:0,elsif:0,rescue:0,ensure:0,when:0,end:-1,case:1,"=begin":1,"=end":-1},this.foldingStartMarker=/(?:\s|^)(def|do|while|class|unless|module|if|for|until|begin|else|elsif|case|rescue|ensure|when)\b|({\s*$)|(=begin)/,this.foldingStopMarker=/(=end(?=$|\s.*$))|(^\s*})|\b(end)\b/,this.getFoldWidget=function(Z,ge,pe){var te=Z.getLine(pe),ue=this.foldingStartMarker.test(te),c=this.foldingStopMarker.test(te);if(ue&&!c){var C=te.match(this.foldingStartMarker);if(C[1]){if((C[1]=="if"||C[1]=="else"||C[1]=="while"||C[1]=="until"||C[1]=="unless")&&(C[1]=="else"&&/^\s*else\s*$/.test(te)===!1||/^\s*(?:if|else|while|until|unless)\s*/.test(te)===!1)||C[1]=="when"&&/\sthen\s/.test(te)===!0)return;if(Z.getTokenAt(pe,C.index+2).type==="keyword")return"start"}else if(C[3]){if(Z.getTokenAt(pe,C.index+1).type==="comment.multiline")return"start"}else return"start"}if(ge!="markbeginend"||!c||ue&&c)return"";var C=te.match(this.foldingStopMarker);if(C[3]==="end"){if(Z.getTokenAt(pe,C.index+1).type==="keyword")return"end"}else if(C[1]){if(Z.getTokenAt(pe,C.index+1).type==="comment.multiline")return"end"}else return"end"},this.getFoldWidgetRange=function(Z,ge,pe){var te=Z.doc.getLine(pe),ue=this.foldingStartMarker.exec(te);if(ue)return ue[1]||ue[3]?this.rubyBlock(Z,pe,ue.index+2):this.openingBracketBlock(Z,"{",pe,ue.index);var ue=this.foldingStopMarker.exec(te);if(ue)return ue[3]==="end"&&Z.getTokenAt(pe,ue.index+1).type==="keyword"?this.rubyBlock(Z,pe,ue.index+1):ue[1]==="=end"&&Z.getTokenAt(pe,ue.index+1).type==="comment.multiline"?this.rubyBlock(Z,pe,ue.index+1):this.closingBracketBlock(Z,"}",pe,ue.index+ue[0].length)},this.rubyBlock=function(Z,re,pe,te){var ue=new U(Z,re,pe),c=ue.getCurrentToken();if(!(!c||c.type!="keyword"&&c.type!="comment.multiline")){var C=c.value,de=Z.getLine(re);switch(c.value){case"if":case"unless":case"while":case"until":var o=new RegExp("^\\s*"+c.value);if(!o.test(de))return;var J=this.indentKeywords[C];break;case"when":if(/\sthen\s/.test(de))return;case"elsif":case"rescue":case"ensure":var J=1;break;case"else":var o=new RegExp("^\\s*"+c.value+"\\s*$");if(!o.test(de))return;var J=1;break;default:var J=this.indentKeywords[C];break}var X=[C];if(J){var me=J===-1?Z.getLine(re-1).length:Z.getLine(re).length,F=re,w=[];if(w.push(ue.getCurrentTokenRange()),ue.step=J===-1?ue.stepBackward:ue.stepForward,c.type=="comment.multiline"){for(;c=ue.step();)if(c.type==="comment.multiline"){if(J==1){if(me=6,c.value=="=end")break}else if(c.value=="=begin")break}}else for(;c=ue.step();){var d=!1;if(c.type==="keyword"){var O=J*this.indentKeywords[c.value];switch(de=Z.getLine(ue.getCurrentTokenRow()),c.value){case"do":for(var a=ue.$tokenIndex-1;a>=0;a--){var j=ue.$rowTokens[a];if(j&&(j.value=="while"||j.value=="until"||j.value=="for")){O=0;break}}break;case"else":var o=new RegExp("^\\s*"+c.value+"\\s*$");(!o.test(de)||C=="case")&&(O=0,d=!0);break;case"if":case"unless":case"while":case"until":var o=new RegExp("^\\s*"+c.value);o.test(de)||(O=0,d=!0);break;case"when":(/\sthen\s/.test(de)||C=="case")&&(O=0,d=!0);break}if(O>0)X.unshift(c.value);else if(O<=0&&d===!1){if(X.shift(),!X.length&&((C=="while"||C=="until"||C=="for")&&c.value!="do"||c.value=="do"&&J==-1&&O!=0||c.value!="do"))break;O===0&&X.unshift(c.value)}}}if(!c)return null;if(te)return w.push(ue.getCurrentTokenRange()),w;var re=ue.getCurrentTokenRow();if(J===-1){if(c.type==="comment.multiline")var ee=6;else var ee=Z.getLine(re).length;return new _(re,ee,F-1,me)}else return new _(F,me,re-1,Z.getLine(re-1).length)}}}}.call(q.prototype)}),ace.define("ace/mode/ruby",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/ruby_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/folding/ruby"],function(n,r,T){var p=n("../lib/oop"),s=n("./text").Mode,_=n("./ruby_highlight_rules").RubyHighlightRules,U=n("./matching_brace_outdent").MatchingBraceOutdent,q=n("../range").Range,Z=n("./folding/ruby").FoldMode,ge=function(){this.HighlightRules=_,this.$outdent=new U,this.$behaviour=this.$defaultBehaviour,this.foldingRules=new Z,this.indentKeywords=this.foldingRules.indentKeywords};p.inherits(ge,s),function(){this.lineCommentStart="#",this.getNextLineIndent=function(pe,te,ue){var c=this.$getIndent(te),C=this.getTokenizer().getLineTokens(te,pe),de=C.tokens;if(de.length&&de[de.length-1].type=="comment")return c;if(pe=="start"){var o=te.match(/^.*[\{\(\[]\s*$/),J=te.match(/^\s*(class|def|module)\s.*$/),X=te.match(/.*do(\s*|\s+\|.*\|\s*)$/),me=te.match(/^\s*(if|else|when|elsif|unless|while|for|begin|rescue|ensure)\s*/);(o||J||X||me)&&(c+=ue)}return c},this.checkOutdent=function(pe,te,ue){return/^\s+(end|else|rescue|ensure)$/.test(te+ue)||this.$outdent.checkOutdent(te,ue)},this.autoOutdent=function(pe,te,ue){var c=te.getLine(ue);if(/}/.test(c))return this.$outdent.autoOutdent(te,ue);var C=this.$getIndent(c),de=te.getLine(ue-1),o=this.$getIndent(de),J=te.getTabString();o.length<=C.length&&C.slice(-J.length)==J&&te.remove(new q(ue,C.length-J.length,ue,C.length))},this.getMatching=function(pe,te,ue){if(te==null){var c=pe.selection.lead;ue=c.column,te=c.row}var C=pe.getTokenAt(te,ue);if(C&&C.value in this.indentKeywords)return this.foldingRules.rubyBlock(pe,te,ue,!0)},this.$id="ace/mode/ruby",this.snippetFileId="ace/snippets/ruby"}.call(ge.prototype),r.Mode=ge}),function(){ace.require(["ace/mode/ruby"],function(n){e&&(e.exports=n)})}()})(modeRuby);var modeJavascript={exports:{}};(function(e,t){ace.define("ace/mode/jsdoc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,r,T){var p=n("../lib/oop"),s=n("./text_highlight_rules").TextHighlightRules,_=function(){this.$rules={start:[{token:["comment.doc.tag","comment.doc.text","lparen.doc"],regex:"(@(?:param|member|typedef|property|namespace|var|const|callback))(\\s*)({)",push:[{token:"lparen.doc",regex:"{",push:[{include:"doc-syntax"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"}]},{token:["rparen.doc","text.doc","variable.parameter.doc","lparen.doc","variable.parameter.doc","rparen.doc"],regex:/(})(\s*)(?:([\w=:\/\.]+)|(?:(\[)([\w=:\/\.]+)(\])))/,next:"pop"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"},{include:"doc-syntax"},{defaultToken:"text.doc"}]},{token:["comment.doc.tag","text.doc","lparen.doc"],regex:"(@(?:returns?|yields|type|this|suppress|public|protected|private|package|modifies|implements|external|exception|throws|enum|define|extends))(\\s*)({)",push:[{token:"lparen.doc",regex:"{",push:[{include:"doc-syntax"},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"}]},{token:"rparen.doc",regex:"}|(?=$)",next:"pop"},{include:"doc-syntax"},{defaultToken:"text.doc"}]},{token:["comment.doc.tag","text.doc","variable.parameter.doc"],regex:'(@(?:alias|memberof|instance|module|name|lends|namespace|external|this|template|requires|param|implements|function|extends|typedef|mixes|constructor|var|memberof\\!|event|listens|exports|class|constructs|interface|emits|fires|throws|const|callback|borrows|augments))(\\s+)(\\w[\\w#.:/~"\\-]*)?'},{token:["comment.doc.tag","text.doc","variable.parameter.doc"],regex:"(@method)(\\s+)(\\w[\\w.\\(\\)]*)"},{token:"comment.doc.tag",regex:"@access\\s+(?:private|public|protected)"},{token:"comment.doc.tag",regex:"@kind\\s+(?:class|constant|event|external|file|function|member|mixin|module|namespace|typedef)"},{token:"comment.doc.tag",regex:"@\\w+(?=\\s|$)"},_.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}],"doc-syntax":[{token:"operator.doc",regex:/[|:]/},{token:"paren.doc",regex:/[\[\]]/}]},this.normalizeRules()};p.inherits(_,s),_.getTagRule=function(U){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},_.getStartRule=function(U){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:U}},_.getEndRule=function(U){return{token:"comment.doc",regex:"\\*\\/",next:U}},r.JsDocCommentHighlightRules=_}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/jsdoc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(n,r,T){var p=n("../lib/oop"),s=n("./jsdoc_comment_highlight_rules").JsDocCommentHighlightRules,_=n("./text_highlight_rules").TextHighlightRules,U="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*",q=function(pe){var te=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Symbol|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|constructor","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),ue="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",c="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[s.getStartRule("doc-start"),ge("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+U+")(\\.)(prototype)(\\.)("+U+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+U+")(\\.)("+U+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+U+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+U+")(\\.)("+U+")(\\s*)(=)(\\s*)(function\\*?)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function\\*?)(\\s+)("+U+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+U+")(\\s*)(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+ue+")\\b",next:"start"},{token:"support.constant",regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:te,regex:U},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+U+")(\\.)("+U+")(\\s*)(=)(\\s*)(function\\*?)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|lter|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward|rEach)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:U},{regex:"",token:"empty",next:"no_regex"}],start:[s.getStartRule("doc-start"),ge("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],default_parameter:[{token:"string",regex:"'(?=.)",push:[{token:"string",regex:"'|$",next:"pop"},{include:"qstring"}]},{token:"string",regex:'"(?=.)',push:[{token:"string",regex:'"|$',next:"pop"},{include:"qqstring"}]},{token:"constant.language",regex:"null|Infinity|NaN|undefined"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:"punctuation.operator",regex:",",next:"function_arguments"},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],function_arguments:[ge("function_arguments"),{token:"variable.parameter",regex:U},{token:"punctuation.operator",regex:","},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!pe||!pe.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(C,de,o){if(this.next=C=="{"?this.nextState:"",C=="{"&&o.length)o.unshift("start",de);else if(C=="}"&&o.length&&(o.shift(),this.next=o.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return C=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:c},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]},{token:["variable.parameter","text"],regex:"("+U+")(\\s*)(?=\\=>)"},{token:"paren.lparen",regex:"(\\()(?=.+\\s*=>)",next:"function_arguments"},{token:"variable.language",regex:"(?:(?:(?:Weak)?(?:Set|Map))|Promise)\\b"}),this.$rules.function_arguments.unshift({token:"keyword.operator",regex:"=",next:"default_parameter"},{token:"keyword.operator",regex:"\\.{3}"}),this.$rules.property.unshift({token:"support.function",regex:"(findIndex|repeat|startsWith|endsWith|includes|isSafeInteger|trunc|cbrt|log2|log10|sign|then|catch|finally|resolve|reject|race|any|all|allSettled|keys|entries|isInteger)\\b(?=\\()"},{token:"constant.language",regex:"(?:MAX_SAFE_INTEGER|MIN_SAFE_INTEGER|EPSILON)\\b"}),(!pe||pe.jsx!=!1)&&Z.call(this)),this.embedRules(s,"doc-",[s.getEndRule("no_regex")]),this.normalizeRules()};p.inherits(q,_);function Z(){var pe=U.replace("\\d","\\d\\-"),te={onMatch:function(c,C,de){var o=c.charAt(1)=="/"?2:1;return o==1?(C!=this.nextState?de.unshift(this.next,this.nextState,0):de.unshift(this.next),de[2]++):o==2&&C==this.nextState&&(de[1]--,(!de[1]||de[1]<0)&&(de.shift(),de.shift())),[{type:"meta.tag.punctuation."+(o==1?"":"end-")+"tag-open.xml",value:c.slice(0,o)},{type:"meta.tag.tag-name.xml",value:c.substr(o)}]},regex:"</?"+pe,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(te);var ue={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[ue,te,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(c,C,de){return C==de[0]&&de.shift(),c.length==2&&(de[0]==this.nextState&&de[1]--,(!de[1]||de[1]<0)&&de.splice(0,2)),this.next=de[0]||"start",[{type:this.token,value:c}]},nextState:"jsx"},ue,ge("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:pe},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},te],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function ge(pe){return[{token:"comment",regex:/\/\*/,next:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:pe||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[s.getTagRule(),{token:"comment",regex:"$|^",next:pe||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}r.JavaScriptHighlightRules=q}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(n,r,T){var p=n("../range").Range,s=function(){};(function(){this.checkOutdent=function(_,U){return/^\s+$/.test(_)?/^\s*\}/.test(U):!1},this.autoOutdent=function(_,U){var q=_.getLine(U),Z=q.match(/^(\s*\})/);if(!Z)return 0;var ge=Z[1].length,pe=_.findMatchingBracket({row:U,column:ge});if(!pe||pe.row==U)return 0;var te=this.$getIndent(_.getLine(pe.row));_.replace(new p(U,0,U,ge-1),te)},this.$getIndent=function(_){return _.match(/^\s*/)[0]}}).call(s.prototype),r.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(n,r,T){var p=n("../../lib/oop"),s=n("../../range").Range,_=n("./fold_mode").FoldMode,U=r.FoldMode=function(q){q&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+q.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+q.end)))};p.inherits(U,_),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(q,Z,ge){var pe=q.getLine(ge);if(this.singleLineBlockCommentRe.test(pe)&&!this.startRegionRe.test(pe)&&!this.tripleStarBlockCommentRe.test(pe))return"";var te=this._getFoldWidgetBase(q,Z,ge);return!te&&this.startRegionRe.test(pe)?"start":te},this.getFoldWidgetRange=function(q,Z,ge,pe){var te=q.getLine(ge);if(this.startRegionRe.test(te))return this.getCommentRegionBlock(q,te,ge);var C=te.match(this.foldingStartMarker);if(C){var ue=C.index;if(C[1])return this.openingBracketBlock(q,C[1],ge,ue);var c=q.getCommentFoldRange(ge,ue+C[0].length,1);return c&&!c.isMultiLine()&&(pe?c=this.getSectionRange(q,ge):Z!="all"&&(c=null)),c}if(Z!=="markbegin"){var C=te.match(this.foldingStopMarker);if(C){var ue=C.index+C[0].length;return C[1]?this.closingBracketBlock(q,C[1],ge,ue):q.getCommentFoldRange(ge,ue,-1)}}},this.getSectionRange=function(q,Z){var ge=q.getLine(Z),pe=ge.search(/\S/),te=Z,ue=ge.length;Z=Z+1;for(var c=Z,C=q.getLength();++Z<C;){ge=q.getLine(Z);var de=ge.search(/\S/);if(de!==-1){if(pe>de)break;var o=this.getFoldWidgetRange(q,"all",Z);if(o){if(o.start.row<=te)break;if(o.isMultiLine())Z=o.end.row;else if(pe==de)break}c=Z}}return new s(te,ue,c,q.getLine(c).length)},this.getCommentRegionBlock=function(q,Z,ge){for(var pe=Z.search(/\s*$/),te=q.getLength(),ue=ge,c=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,C=1;++ge<te;){Z=q.getLine(ge);var de=c.exec(Z);if(de&&(de[1]?C--:C++,!C))break}var o=ge;if(o>ue)return new s(ue,pe,o,Z.length)}}.call(U.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(n,r,T){var p=n("../lib/oop"),s=n("./text").Mode,_=n("./javascript_highlight_rules").JavaScriptHighlightRules,U=n("./matching_brace_outdent").MatchingBraceOutdent,q=n("../worker/worker_client").WorkerClient,Z=n("./behaviour/cstyle").CstyleBehaviour,ge=n("./folding/cstyle").FoldMode,pe=function(){this.HighlightRules=_,this.$outdent=new U,this.$behaviour=new Z,this.foldingRules=new ge};p.inherits(pe,s),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.$pairQuotesAfter={"`":/\w/},this.getNextLineIndent=function(te,ue,c){var C=this.$getIndent(ue),de=this.getTokenizer().getLineTokens(ue,te),o=de.tokens,J=de.state;if(o.length&&o[o.length-1].type=="comment")return C;if(te=="start"||te=="no_regex"){var X=ue.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);X&&(C+=c)}else if(te=="doc-start"){if(J=="start"||J=="no_regex")return"";var X=ue.match(/^\s*(\/?)\*/);X&&(X[1]&&(C+=" "),C+="* ")}return C},this.checkOutdent=function(te,ue,c){return this.$outdent.checkOutdent(ue,c)},this.autoOutdent=function(te,ue,c){this.$outdent.autoOutdent(ue,c)},this.createWorker=function(te){var ue=new q(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return ue.attachToDocument(te.getDocument()),ue.on("annotate",function(c){te.setAnnotations(c.data)}),ue.on("terminate",function(){te.clearAnnotations()}),ue},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}.call(pe.prototype),r.Mode=pe}),function(){ace.require(["ace/mode/javascript"],function(n){e&&(e.exports=n)})}()})(modeJavascript);var extLanguage_tools={exports:{}};(function(e,t){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(n,r,T){var p=n("./lib/dom"),s=n("./lib/oop"),_=n("./lib/event_emitter").EventEmitter,U=n("./lib/lang"),q=n("./range").Range,Z=n("./range_list").RangeList,ge=n("./keyboard/hash_handler").HashHandler,pe=n("./tokenizer").Tokenizer,te=n("./clipboard"),ue={CURRENT_WORD:function(F){return F.session.getTextRange(F.session.getWordRange())},SELECTION:function(F,w,d){var O=F.session.getTextRange();return d?O.replace(/\n\r?([ \t]*\S)/g,`
`+d+"$1"):O},CURRENT_LINE:function(F){return F.session.getLine(F.getCursorPosition().row)},PREV_LINE:function(F){return F.session.getLine(F.getCursorPosition().row-1)},LINE_INDEX:function(F){return F.getCursorPosition().row},LINE_NUMBER:function(F){return F.getCursorPosition().row+1},SOFT_TABS:function(F){return F.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(F){return F.session.getTabSize()},CLIPBOARD:function(F){return te.getText&&te.getText()},FILENAME:function(F){return/[^/\\]*$/.exec(this.FILEPATH(F))[0]},FILENAME_BASE:function(F){return/[^/\\]*$/.exec(this.FILEPATH(F))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(F){return this.FILEPATH(F).replace(/[^/\\]*$/,"")},FILEPATH:function(F){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(F){var w=F.session.$mode||{};return w.blockComment&&w.blockComment.start||""},BLOCK_COMMENT_END:function(F){var w=F.session.$mode||{};return w.blockComment&&w.blockComment.end||""},LINE_COMMENT:function(F){var w=F.session.$mode||{};return w.lineCommentStart||""},CURRENT_YEAR:c.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:c.bind(null,{year:"2-digit"}),CURRENT_MONTH:c.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:c.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:c.bind(null,{month:"short"}),CURRENT_DATE:c.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:c.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:c.bind(null,{weekday:"short"}),CURRENT_HOUR:c.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:c.bind(null,{minute:"2-digit"}),CURRENT_SECOND:c.bind(null,{second:"2-digit"})};ue.SELECTED_TEXT=ue.SELECTION;function c(F){var w=new Date().toLocaleString("en-us",F);return w.length==1?"0"+w:w}var C=function(){function F(){this.snippetMap={},this.snippetNameMap={},this.variables=ue}return F.prototype.getTokenizer=function(){return F.$tokenizer||this.createTokenizer()},F.prototype.createTokenizer=function(){function w(a){return a=a.substr(1),/^\d+$/.test(a)?[{tabstopId:parseInt(a,10)}]:[{text:a}]}function d(a){return"(?:[^\\\\"+a+"]|\\\\.)"}var O={regex:"/("+d("/")+"+)/",onMatch:function(a,j,re){var ee=re[0];return ee.fmtString=!0,ee.guard=a.slice(1,-1),ee.flag="",""},next:"formatString"};return F.$tokenizer=new pe({start:[{regex:/\\./,onMatch:function(a,j,re){var ee=a[1];return(ee=="}"&&re.length||"`$\\".indexOf(ee)!=-1)&&(a=ee),[a]}},{regex:/}/,onMatch:function(a,j,re){return[re.length?re.shift():a]}},{regex:/\$(?:\d+|\w+)/,onMatch:w},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(a,j,re){var ee=w(a.substr(1));return re.unshift(ee[0]),ee},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+d("\\|")+"*\\|",onMatch:function(a,j,re){var ee=a.slice(1,-1).replace(/\\[,|\\]|,/g,function(Ee){return Ee.length==2?Ee[1]:"\0"}).split("\0").map(function(Ee){return{value:Ee}});return re[0].choices=ee,[ee[0]]},next:"start"},O,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(a,j,re){return re.length&&re[0].expectElse?(re[0].expectElse=!1,re[0].ifEnd={elseEnd:re[0]},[re[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(a,j,re){var ee=a[1];return ee=="}"&&re.length||"`$\\".indexOf(ee)!=-1?a=ee:ee=="n"?a=`
`:ee=="t"?a="	":"ulULE".indexOf(ee)!=-1&&(a={changeCase:ee,local:ee>"a"}),[a]}},{regex:"/\\w*}",onMatch:function(a,j,re){var ee=re.shift();return ee&&(ee.flag=a.slice(1,-1)),this.next=ee&&ee.tabstopId?"start":"",[ee||a]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(a,j,re){return[{text:a.slice(1)}]}},{regex:/\${\w+/,onMatch:function(a,j,re){var ee={text:a.slice(2)};return re.unshift(ee),[ee]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(a,j,re){var ee=re.shift();return this.next=ee&&ee.tabstopId?"start":"",[ee||a]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(a,j,re){var ee=re[0];return ee.formatFunction=a.slice(2,-1),[re.shift()]},next:"formatString"},O,{regex:/:[\?\-+]?/,onMatch:function(a,j,re){a[1]=="+"&&(re[0].ifEnd=re[0]),a[1]=="?"&&(re[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),F.$tokenizer},F.prototype.tokenizeTmSnippet=function(w,d){return this.getTokenizer().getLineTokens(w,d).tokens.map(function(O){return O.value||O})},F.prototype.getVariableValue=function(w,d,O){if(/^\d+$/.test(d))return(this.variables.__||{})[d]||"";if(/^[A-Z]\d+$/.test(d))return(this.variables[d[0]+"__"]||{})[d.substr(1)]||"";if(d=d.replace(/^TM_/,""),!this.variables.hasOwnProperty(d))return"";var a=this.variables[d];return typeof a=="function"&&(a=this.variables[d](w,d,O)),a??""},F.prototype.tmStrFormat=function(w,d,O){if(!d.fmt)return w;var a=d.flag||"",j=d.guard;j=new RegExp(j,a.replace(/[^gim]/g,""));var re=typeof d.fmt=="string"?this.tokenizeTmSnippet(d.fmt,"formatString"):d.fmt,ee=this,Ee=w.replace(j,function(){var ke=ee.variables.__;ee.variables.__=[].slice.call(arguments);for(var De=ee.resolveVariables(re,O),Ce="E",Fe=0;Fe<De.length;Fe++){var Oe=De[Fe];if(typeof Oe=="object")if(De[Fe]="",Oe.changeCase&&Oe.local){var je=De[Fe+1];je&&typeof je=="string"&&(Oe.changeCase=="u"?De[Fe]=je[0].toUpperCase():De[Fe]=je[0].toLowerCase(),De[Fe+1]=je.substr(1))}else Oe.changeCase&&(Ce=Oe.changeCase);else Ce=="U"?De[Fe]=Oe.toUpperCase():Ce=="L"&&(De[Fe]=Oe.toLowerCase())}return ee.variables.__=ke,De.join("")});return Ee},F.prototype.tmFormatFunction=function(w,d,O){return d.formatFunction=="upcase"?w.toUpperCase():d.formatFunction=="downcase"?w.toLowerCase():w},F.prototype.resolveVariables=function(w,d){for(var O=[],a="",j=!0,re=0;re<w.length;re++){var ee=w[re];if(typeof ee=="string"){O.push(ee),ee==`
`?(j=!0,a=""):j&&(a=/^\t*/.exec(ee)[0],j=/\S/.test(ee));continue}if(ee){if(j=!1,ee.fmtString){var Ee=w.indexOf(ee,re+1);Ee==-1&&(Ee=w.length),ee.fmt=w.slice(re+1,Ee),re=Ee}if(ee.text){var ke=this.getVariableValue(d,ee.text,a)+"";ee.fmtString&&(ke=this.tmStrFormat(ke,ee,d)),ee.formatFunction&&(ke=this.tmFormatFunction(ke,ee,d)),ke&&!ee.ifEnd?(O.push(ke),De(ee)):!ke&&ee.ifEnd&&De(ee.ifEnd)}else ee.elseEnd?De(ee.elseEnd):(ee.tabstopId!=null||ee.changeCase!=null)&&O.push(ee)}}function De(Ce){var Fe=w.indexOf(Ce,re+1);Fe!=-1&&(re=Fe)}return O},F.prototype.getDisplayTextForSnippet=function(w,d){var O=de.call(this,w,d);return O.text},F.prototype.insertSnippetForSelection=function(w,d,O){O===void 0&&(O={});var a=de.call(this,w,d,O),j=w.getSelectionRange();O.range&&O.range.compareRange(j)===0&&(j=O.range);var re=w.session.replace(j,a.text),ee=new o(w),Ee=w.inVirtualSelectionMode&&w.selection.index;ee.addTabstops(a.tabstops,j.start,re,Ee)},F.prototype.insertSnippet=function(w,d,O){O===void 0&&(O={});var a=this;if(O.range&&!(O.range instanceof q)&&(O.range=q.fromPoints(O.range.start,O.range.end)),w.inVirtualSelectionMode)return a.insertSnippetForSelection(w,d,O);w.forEachSelection(function(){a.insertSnippetForSelection(w,d,O)},null,{keepOrder:!0}),w.tabstopManager&&w.tabstopManager.tabNext()},F.prototype.$getScope=function(w){var d=w.session.$mode.$id||"";if(d=d.split("/").pop(),d==="html"||d==="php"){d==="php"&&!w.session.$mode.inlinePhp&&(d="html");var O=w.getCursorPosition(),a=w.session.getState(O.row);typeof a=="object"&&(a=a[0]),a.substring&&(a.substring(0,3)=="js-"?d="javascript":a.substring(0,4)=="css-"?d="css":a.substring(0,4)=="php-"&&(d="php"))}return d},F.prototype.getActiveScopes=function(w){var d=this.$getScope(w),O=[d],a=this.snippetMap;return a[d]&&a[d].includeScopes&&O.push.apply(O,a[d].includeScopes),O.push("_"),O},F.prototype.expandWithTab=function(w,d){var O=this,a=w.forEachSelection(function(){return O.expandSnippetForSelection(w,d)},null,{keepOrder:!0});return a&&w.tabstopManager&&w.tabstopManager.tabNext(),a},F.prototype.expandSnippetForSelection=function(w,d){var O=w.getCursorPosition(),a=w.session.getLine(O.row),j=a.substring(0,O.column),re=a.substr(O.column),ee=this.snippetMap,Ee;return this.getActiveScopes(w).some(function(ke){var De=ee[ke];return De&&(Ee=this.findMatchingSnippet(De,j,re)),!!Ee},this),Ee?(d&&d.dryRun||(w.session.doc.removeInLine(O.row,O.column-Ee.replaceBefore.length,O.column+Ee.replaceAfter.length),this.variables.M__=Ee.matchBefore,this.variables.T__=Ee.matchAfter,this.insertSnippetForSelection(w,Ee.content),this.variables.M__=this.variables.T__=null),!0):!1},F.prototype.findMatchingSnippet=function(w,d,O){for(var a=w.length;a--;){var j=w[a];if(!(j.startRe&&!j.startRe.test(d))&&!(j.endRe&&!j.endRe.test(O))&&!(!j.startRe&&!j.endRe))return j.matchBefore=j.startRe?j.startRe.exec(d):[""],j.matchAfter=j.endRe?j.endRe.exec(O):[""],j.replaceBefore=j.triggerRe?j.triggerRe.exec(d)[0]:"",j.replaceAfter=j.endTriggerRe?j.endTriggerRe.exec(O)[0]:"",j}},F.prototype.register=function(w,d){var O=this.snippetMap,a=this.snippetNameMap,j=this;w||(w=[]);function re(ke){return ke&&!/^\^?\(.*\)\$?$|^\\b$/.test(ke)&&(ke="(?:"+ke+")"),ke||""}function ee(ke,De,Ce){return ke=re(ke),De=re(De),Ce?(ke=De+ke,ke&&ke[ke.length-1]!="$"&&(ke=ke+"$")):(ke=ke+De,ke&&ke[0]!="^"&&(ke="^"+ke)),new RegExp(ke)}function Ee(ke){ke.scope||(ke.scope=d||"_"),d=ke.scope,O[d]||(O[d]=[],a[d]={});var De=a[d];if(ke.name){var Ce=De[ke.name];Ce&&j.unregister(Ce),De[ke.name]=ke}O[d].push(ke),ke.prefix&&(ke.tabTrigger=ke.prefix),!ke.content&&ke.body&&(ke.content=Array.isArray(ke.body)?ke.body.join(`
`):ke.body),ke.tabTrigger&&!ke.trigger&&(!ke.guard&&/^\w/.test(ke.tabTrigger)&&(ke.guard="\\b"),ke.trigger=U.escapeRegExp(ke.tabTrigger)),!(!ke.trigger&&!ke.guard&&!ke.endTrigger&&!ke.endGuard)&&(ke.startRe=ee(ke.trigger,ke.guard,!0),ke.triggerRe=new RegExp(ke.trigger),ke.endRe=ee(ke.endTrigger,ke.endGuard,!0),ke.endTriggerRe=new RegExp(ke.endTrigger))}Array.isArray(w)?w.forEach(Ee):Object.keys(w).forEach(function(ke){Ee(w[ke])}),this._signal("registerSnippets",{scope:d})},F.prototype.unregister=function(w,d){var O=this.snippetMap,a=this.snippetNameMap;function j(re){var ee=a[re.scope||d];if(ee&&ee[re.name]){delete ee[re.name];var Ee=O[re.scope||d],ke=Ee&&Ee.indexOf(re);ke>=0&&Ee.splice(ke,1)}}w.content?j(w):Array.isArray(w)&&w.forEach(j)},F.prototype.parseSnippetFile=function(w){w=w.replace(/\r/g,"");for(var d=[],O={},a=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,j;j=a.exec(w);){if(j[1])try{O=JSON.parse(j[1]),d.push(O)}catch{}if(j[4])O.content=j[4].replace(/^\t/gm,""),d.push(O),O={};else{var re=j[2],ee=j[3];if(re=="regex"){var Ee=/\/((?:[^\/\\]|\\.)*)|$/g;O.guard=Ee.exec(ee)[1],O.trigger=Ee.exec(ee)[1],O.endTrigger=Ee.exec(ee)[1],O.endGuard=Ee.exec(ee)[1]}else re=="snippet"?(O.tabTrigger=ee.match(/^\S*/)[0],O.name||(O.name=ee)):re&&(O[re]=ee)}}return d},F.prototype.getSnippetByName=function(w,d){var O=this.snippetNameMap,a;return this.getActiveScopes(d).some(function(j){var re=O[j];return re&&(a=re[w]),!!a},this),a},F}();s.implement(C.prototype,_);var de=function(F,w,d){d===void 0&&(d={});var O=F.getCursorPosition(),a=F.session.getLine(O.row),j=F.session.getTabString(),re=a.match(/^\s*/)[0];O.column<re.length&&(re=re.slice(0,O.column)),w=w.replace(/\r/g,"");var ee=this.tokenizeTmSnippet(w);ee=this.resolveVariables(ee,F),ee=ee.map(function(We){return We==`
`&&!d.excludeExtraIndent?We+re:typeof We=="string"?We.replace(/\t/g,j):We});var Ee=[];ee.forEach(function(We,lt){if(typeof We=="object"){var Me=We.tabstopId,Se=Ee[Me];if(Se||(Se=Ee[Me]=[],Se.index=Me,Se.value="",Se.parents={}),Se.indexOf(We)===-1){We.choices&&!Se.choices&&(Se.choices=We.choices),Se.push(We);var Re=ee.indexOf(We,lt+1);if(Re!==-1){var Le=ee.slice(lt+1,Re),Je=Le.some(function(Ve){return typeof Ve=="object"});Je&&!Se.value?Se.value=Le:Le.length&&(!Se.value||typeof Se.value!="string")&&(Se.value=Le.join(""))}}}}),Ee.forEach(function(We){We.length=0});var ke={};function De(We){for(var lt=[],Me=0;Me<We.length;Me++){var Se=We[Me];if(typeof Se=="object"){if(ke[Se.tabstopId])continue;var Re=We.lastIndexOf(Se,Me-1);Se=lt[Re]||{tabstopId:Se.tabstopId}}lt[Me]=Se}return lt}for(var Ce=0;Ce<ee.length;Ce++){var Fe=ee[Ce];if(typeof Fe=="object"){var Oe=Fe.tabstopId,je=Ee[Oe],qe=ee.indexOf(Fe,Ce+1);if(ke[Oe]){ke[Oe]===Fe&&(delete ke[Oe],Object.keys(ke).forEach(function(We){je.parents[We]=!0}));continue}ke[Oe]=Fe;var it=je.value;typeof it!="string"?it=De(it):Fe.fmt&&(it=this.tmStrFormat(it,Fe,F)),ee.splice.apply(ee,[Ce+1,Math.max(0,qe-Ce)].concat(it,Fe)),je.indexOf(Fe)===-1&&je.push(Fe)}}var pt=0,dt=0,gt="";return ee.forEach(function(We){if(typeof We=="string"){var lt=We.split(`
`);lt.length>1?(dt=lt[lt.length-1].length,pt+=lt.length-1):dt+=We.length,gt+=We}else We&&(We.start?We.end={row:pt,column:dt}:We.start={row:pt,column:dt})}),{text:gt,tabstops:Ee,tokens:ee}},o=function(){function F(w){if(this.index=0,this.ranges=[],this.tabstops=[],w.tabstopManager)return w.tabstopManager;w.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=U.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(w)}return F.prototype.attach=function(w){this.$openTabstops=null,this.selectedTabstop=null,this.editor=w,this.session=w.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},F.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},F.prototype.onChange=function(w){for(var d=w.action[0]=="r",O=this.selectedTabstop||{},a=O.parents||{},j=this.tabstops.slice(),re=0;re<j.length;re++){var ee=j[re],Ee=ee==O||a[ee.index];if(ee.rangeList.$bias=Ee?0:1,w.action=="remove"&&ee!==O){var ke=ee.parents&&ee.parents[O.index],De=ee.rangeList.pointIndex(w.start,ke);De=De<0?-De-1:De+1;var Ce=ee.rangeList.pointIndex(w.end,ke);Ce=Ce<0?-Ce-1:Ce-1;for(var Fe=ee.rangeList.ranges.slice(De,Ce),Oe=0;Oe<Fe.length;Oe++)this.removeRange(Fe[Oe])}ee.rangeList.$onChange(w)}var je=this.session;!this.$inChange&&d&&je.getLength()==1&&!je.getValue()&&this.detach()},F.prototype.updateLinkedFields=function(){var w=this.selectedTabstop;if(!(!w||!w.hasLinkedRanges||!w.firstNonLinked)){this.$inChange=!0;for(var d=this.session,O=d.getTextRange(w.firstNonLinked),a=0;a<w.length;a++){var j=w[a];if(j.linked){var re=j.original,ee=r.snippetManager.tmStrFormat(O,re,this.editor);d.replace(j,ee)}}this.$inChange=!1}},F.prototype.onAfterExec=function(w){w.command&&!w.command.readOnly&&this.updateLinkedFields()},F.prototype.onChangeSelection=function(){if(this.editor){for(var w=this.editor.selection.lead,d=this.editor.selection.anchor,O=this.editor.selection.isEmpty(),a=0;a<this.ranges.length;a++)if(!this.ranges[a].linked){var j=this.ranges[a].contains(w.row,w.column),re=O||this.ranges[a].contains(d.row,d.column);if(j&&re)return}this.detach()}},F.prototype.onChangeSession=function(){this.detach()},F.prototype.tabNext=function(w){var d=this.tabstops.length,O=this.index+(w||1);O=Math.min(Math.max(O,1),d),O==d&&(O=0),this.selectTabstop(O),O===0&&this.detach()},F.prototype.selectTabstop=function(w){this.$openTabstops=null;var d=this.tabstops[this.index];if(d&&this.addTabstopMarkers(d),this.index=w,d=this.tabstops[this.index],!(!d||!d.length)){this.selectedTabstop=d;var O=d.firstNonLinked||d;if(d.choices&&(O.cursor=O.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(O);else{var a=this.editor.multiSelect;a.toSingleRange(O);for(var j=0;j<d.length;j++)d.hasLinkedRanges&&d[j].linked||a.addRange(d[j].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},F.prototype.addTabstops=function(w,d,O){var a=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!w[0]){var j=q.fromPoints(O,O);X(j.start,d),X(j.end,d),w[0]=[j],w[0].index=0}var re=this.index,ee=[re+1,0],Ee=this.ranges;w.forEach(function(ke,De){for(var Ce=this.$openTabstops[De]||ke,Fe=0;Fe<ke.length;Fe++){var Oe=ke[Fe],je=q.fromPoints(Oe.start,Oe.end||Oe.start);J(je.start,d),J(je.end,d),je.original=Oe,je.tabstop=Ce,Ee.push(je),Ce!=ke?Ce.unshift(je):Ce[Fe]=je,Oe.fmtString||Ce.firstNonLinked&&a?(je.linked=!0,Ce.hasLinkedRanges=!0):Ce.firstNonLinked||(Ce.firstNonLinked=je)}Ce.firstNonLinked||(Ce.hasLinkedRanges=!1),Ce===ke&&(ee.push(Ce),this.$openTabstops[De]=Ce),this.addTabstopMarkers(Ce),Ce.rangeList=Ce.rangeList||new Z,Ce.rangeList.$bias=0,Ce.rangeList.addList(Ce)},this),ee.length>2&&(this.tabstops.length&&ee.push(ee.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,ee))},F.prototype.addTabstopMarkers=function(w){var d=this.session;w.forEach(function(O){O.markerId||(O.markerId=d.addMarker(O,"ace_snippet-marker","text"))})},F.prototype.removeTabstopMarkers=function(w){var d=this.session;w.forEach(function(O){d.removeMarker(O.markerId),O.markerId=null})},F.prototype.removeRange=function(w){var d=w.tabstop.indexOf(w);d!=-1&&w.tabstop.splice(d,1),d=this.ranges.indexOf(w),d!=-1&&this.ranges.splice(d,1),d=w.tabstop.rangeList.ranges.indexOf(w),d!=-1&&w.tabstop.splice(d,1),this.session.removeMarker(w.markerId),w.tabstop.length||(d=this.tabstops.indexOf(w.tabstop),d!=-1&&this.tabstops.splice(d,1),this.tabstops.length||this.detach())},F}();o.prototype.keyboardHandler=new ge,o.prototype.keyboardHandler.bindKeys({Tab:function(F){r.snippetManager&&r.snippetManager.expandWithTab(F)||(F.tabstopManager.tabNext(1),F.renderer.scrollCursorIntoView())},"Shift-Tab":function(F){F.tabstopManager.tabNext(-1),F.renderer.scrollCursorIntoView()},Esc:function(F){F.tabstopManager.detach()}});var J=function(F,w){F.row==0&&(F.column+=w.column),F.row+=w.row},X=function(F,w){F.row==w.row&&(F.column-=w.column),F.row-=w.row};p.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),r.snippetManager=new C;var me=n("./editor").Editor;(function(){this.insertSnippet=function(F,w){return r.snippetManager.insertSnippet(this,F,w)},this.expandSnippet=function(F){return r.snippetManager.expandWithTab(this,F)}}).call(me.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config"],function(n,r,T){var p=n("../virtual_renderer").VirtualRenderer,s=n("../editor").Editor,_=n("../range").Range,U=n("../lib/event"),q=n("../lib/lang"),Z=n("../lib/dom"),ge=n("../config").nls,pe=function(c){return"suggest-aria-id:".concat(c)},te=function(c){var C=new p(c);C.$maxLines=4;var de=new s(C);return de.setHighlightActiveLine(!1),de.setShowPrintMargin(!1),de.renderer.setShowGutter(!1),de.renderer.setHighlightGutterLine(!1),de.$mouseHandler.$focusTimeout=0,de.$highlightTagPending=!0,de},ue=function(){function c(C){var de=Z.createElement("div"),o=new te(de);C&&C.appendChild(de),de.style.display="none",o.renderer.content.style.cursor="default",o.renderer.setStyle("ace_autocomplete"),o.renderer.$textLayer.element.setAttribute("role","listbox"),o.renderer.$textLayer.element.setAttribute("aria-label",ge("Autocomplete suggestions")),o.renderer.textarea.setAttribute("aria-hidden","true"),o.setOption("displayIndentGuides",!1),o.setOption("dragDelay",150);var J=function(){};o.focus=J,o.$isFocused=!0,o.renderer.$cursorLayer.restartTimer=J,o.renderer.$cursorLayer.element.style.opacity=0,o.renderer.$maxLines=8,o.renderer.$keepTextAreaAtCursor=!1,o.setHighlightActiveLine(!1),o.session.highlight(""),o.session.$searchHighlight.clazz="ace_highlight-marker",o.on("mousedown",function(a){var j=a.getDocumentPosition();o.selection.moveToPosition(j),F.start.row=F.end.row=j.row,a.stop()});var X,me=new _(-1,0,-1,1/0),F=new _(-1,0,-1,1/0);F.id=o.session.addMarker(F,"ace_active-line","fullLine"),o.setSelectOnHover=function(a){a?me.id&&(o.session.removeMarker(me.id),me.id=null):me.id=o.session.addMarker(me,"ace_line-hover","fullLine")},o.setSelectOnHover(!1),o.on("mousemove",function(a){if(!X){X=a;return}if(!(X.x==a.x&&X.y==a.y)){X=a,X.scrollTop=o.renderer.scrollTop;var j=X.getDocumentPosition().row;me.start.row!=j&&(me.id||o.setRow(j),d(j))}}),o.renderer.on("beforeRender",function(){if(X&&me.start.row!=-1){X.$pos=null;var a=X.getDocumentPosition().row;me.id||o.setRow(a),d(a,!0)}}),o.renderer.on("afterRender",function(){var a=o.getRow(),j=o.renderer.$textLayer,re=j.element.childNodes[a-j.config.firstRow],ee=document.activeElement;if(re!==j.selectedNode&&j.selectedNode&&(Z.removeCssClass(j.selectedNode,"ace_selected"),ee.removeAttribute("aria-activedescendant"),j.selectedNode.removeAttribute("id")),j.selectedNode=re,re){Z.addCssClass(re,"ace_selected");var Ee=pe(a);re.id=Ee,j.element.setAttribute("aria-activedescendant",Ee),ee.setAttribute("aria-activedescendant",Ee),re.setAttribute("role","option"),re.setAttribute("aria-label",o.getData(a).value),re.setAttribute("aria-setsize",o.data.length),re.setAttribute("aria-posinset",a+1),re.setAttribute("aria-describedby","doc-tooltip")}});var w=function(){d(-1)},d=function(a,j){a!==me.start.row&&(me.start.row=me.end.row=a,j||o.session._emit("changeBackMarker"),o._emit("changeHoverMarker"))};o.getHoveredRow=function(){return me.start.row},U.addListener(o.container,"mouseout",w),o.on("hide",w),o.on("changeSelection",w),o.session.doc.getLength=function(){return o.data.length},o.session.doc.getLine=function(a){var j=o.data[a];return typeof j=="string"?j:j&&j.value||""};var O=o.session.bgTokenizer;return O.$tokenizeRow=function(a){var j=o.data[a],re=[];if(!j)return re;typeof j=="string"&&(j={value:j});var ee=j.caption||j.value||j.name;function Ee(it,pt){it&&re.push({type:(j.className||"")+(pt||""),value:it})}for(var ke=ee.toLowerCase(),De=(o.filterText||"").toLowerCase(),Ce=0,Fe=0,Oe=0;Oe<=De.length;Oe++)if(Oe!=Fe&&(j.matchMask&1<<Oe||Oe==De.length)){var je=De.slice(Fe,Oe);Fe=Oe;var qe=ke.indexOf(je,Ce);if(qe==-1)continue;Ee(ee.slice(Ce,qe),""),Ce=qe+je.length,Ee(ee.slice(qe,Ce),"completion-highlight")}return Ee(ee.slice(Ce,ee.length),""),re.push({type:"completion-spacer",value:" "}),j.meta&&re.push({type:"completion-meta",value:j.meta}),j.message&&re.push({type:"completion-message",value:j.message}),re},O.$updateOnChange=J,O.start=J,o.session.$computeWidth=function(){return this.screenWidth=0},o.isOpen=!1,o.isTopdown=!1,o.autoSelect=!0,o.filterText="",o.data=[],o.setData=function(a,j){o.filterText=j||"",o.setValue(q.stringRepeat(`
`,a.length),-1),o.data=a||[],o.setRow(0)},o.getData=function(a){return o.data[a]},o.getRow=function(){return F.start.row},o.setRow=function(a){a=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,a)),F.start.row!=a&&(o.selection.clearSelection(),F.start.row=F.end.row=a||0,o.session._emit("changeBackMarker"),o.moveCursorTo(a||0,0),o.isOpen&&o._signal("select"))},o.on("changeSelection",function(){o.isOpen&&o.setRow(o.selection.lead.row),o.renderer.scrollCursorIntoView()}),o.hide=function(){this.container.style.display="none",o.anchorPos=null,o.anchor=null,o.isOpen&&(o.isOpen=!1,this._signal("hide"))},o.tryShow=function(a,j,re,ee){if(!ee&&o.isOpen&&o.anchorPos&&o.anchor&&o.anchorPos.top===a.top&&o.anchorPos.left===a.left&&o.anchor===re)return!0;var Ee=this.container,ke=window.innerHeight,De=window.innerWidth,Ce=this.renderer,Fe=Ce.$maxLines*j*1.4,Oe={top:0,bottom:0,left:0},je=ke-a.top-3*this.$borderSize-j,qe=a.top-3*this.$borderSize;re||(qe<=je||je>=Fe?re="bottom":re="top"),re==="top"?(Oe.bottom=a.top-this.$borderSize,Oe.top=Oe.bottom-Fe):re==="bottom"&&(Oe.top=a.top+j+this.$borderSize,Oe.bottom=Oe.top+Fe);var it=Oe.top>=0&&Oe.bottom<=ke;if(!ee&&!it)return!1;it?Ce.$maxPixelHeight=null:re==="top"?Ce.$maxPixelHeight=qe:Ce.$maxPixelHeight=je,re==="top"?(Ee.style.top="",Ee.style.bottom=ke-Oe.bottom+"px",o.isTopdown=!1):(Ee.style.top=Oe.top+"px",Ee.style.bottom="",o.isTopdown=!0),Ee.style.display="";var pt=a.left;return pt+Ee.offsetWidth>De&&(pt=De-Ee.offsetWidth),Ee.style.left=pt+"px",Ee.style.right="",o.isOpen||(o.isOpen=!0,this._signal("show"),X=null),o.anchorPos=a,o.anchor=re,!0},o.show=function(a,j,re){this.tryShow(a,j,re?"bottom":void 0,!0)},o.goTo=function(a){var j=this.getRow(),re=this.session.getLength()-1;switch(a){case"up":j=j<=0?re:j-1;break;case"down":j=j>=re?-1:j+1;break;case"start":j=0;break;case"end":j=re;break}this.setRow(j)},o.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},o.$imageSize=0,o.$borderSize=1,o}return c}();Z.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
`,"autocompletion.css",!1),r.AcePopup=ue,r.$singleLineEditor=te,r.getAriaId=pe}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets"],function(n,r,T){var p=n("../snippets").snippetManager,s=function(){function _(){this.editor=null}return _.prototype.show=function(U,q,Z){if(Z=Z||"",U&&this.editor&&this.editor!==U&&(this.hide(),this.editor=null),!U||!q)return!1;var ge=q.snippet?p.getDisplayTextForSnippet(U,q.snippet):q.value;return!ge||!ge.startsWith(Z)?!1:(this.editor=U,ge=ge.slice(Z.length),ge===""?U.removeGhostText():U.setGhostText(ge),!0)},_.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},_.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},_.prototype.destroy=function(){this.hide(),this.editor=null},_}();r.AceInline=s}),ace.define("ace/autocomplete/util",["require","exports","module"],function(n,r,T){r.parForEach=function(s,_,U){var q=0,Z=s.length;Z===0&&U();for(var ge=0;ge<Z;ge++)_(s[ge],function(pe,te){q++,q===Z&&U(pe,te)})};var p=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;r.retrievePrecedingIdentifier=function(s,_,U){U=U||p;for(var q=[],Z=_-1;Z>=0&&U.test(s[Z]);Z--)q.push(s[Z]);return q.reverse().join("")},r.retrieveFollowingIdentifier=function(s,_,U){U=U||p;for(var q=[],Z=_;Z<s.length&&U.test(s[Z]);Z++)q.push(s[Z]);return q},r.getCompletionPrefix=function(s){var _=s.getCursorPosition(),U=s.session.getLine(_.row),q;return s.completers.forEach(function(Z){Z.identifierRegexps&&Z.identifierRegexps.forEach(function(ge){!q&&ge&&(q=this.retrievePrecedingIdentifier(U,_.column,ge))}.bind(this))}.bind(this)),q||this.retrievePrecedingIdentifier(U,_.column)},r.triggerAutocomplete=function(s){var _=s.getCursorPosition(),U=s.session.getLine(_.row),q=_.column===0?0:_.column-1,Z=U[q];return s.completers.some(function(ge){if(ge.triggerCharacters&&Array.isArray(ge.triggerCharacters))return ge.triggerCharacters.includes(Z)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(n,r,T){var p=n("./keyboard/hash_handler").HashHandler,s=n("./autocomplete/popup").AcePopup,_=n("./autocomplete/inline").AceInline,U=n("./autocomplete/popup").getAriaId,q=n("./autocomplete/util"),Z=n("./lib/lang"),ge=n("./lib/dom"),pe=n("./snippets").snippetManager,te=n("./config"),ue=function(o,J){J.completer&&J.completer.destroy()},c=function(){function o(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new p,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=Z.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=Z.delayedCall(this.updateDocTooltip.bind(this),50)}return o.prototype.$init=function(){return this.popup=new s(this.parentNode||document.body||document.documentElement),this.popup.on("click",function(J){this.insertMatch(),J.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupChange.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},o.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new _,this.inlineRenderer},o.prototype.getPopup=function(){return this.popup||this.$init()},o.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip()},o.prototype.$onPopupChange=function(J){if(this.inlineRenderer&&this.inlineEnabled){var X=J?null:this.popup.getData(this.popup.getRow()),me=q.getCompletionPrefix(this.editor);this.inlineRenderer.show(this.editor,X,me)||this.inlineRenderer.hide(),this.$updatePopupPosition()}this.tooltipTimer.call(null,null)},o.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var J=this.editor.container.parentNode,X=[];J;)X.push(J),J.addEventListener("scroll",this.onLayoutChange,{passive:!0}),J=J.parentNode;this.$elements=X}},o.prototype.unObserveLayoutChanges=function(){var J=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(X){X.removeEventListener("scroll",J.onLayoutChange,{passive:!0})}),this.$elements=null},o.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},o.prototype.$updatePopupPosition=function(){var J=this.editor,X=J.renderer,me=X.layerConfig.lineHeight,F=X.$cursorLayer.getPixelPosition(this.base,!0);F.left-=this.popup.getTextLeftOffset();var w=J.container.getBoundingClientRect();F.top+=w.top-X.layerConfig.offset,F.left+=w.left-J.renderer.scrollLeft,F.left+=X.gutterWidth;var d={top:F.top,left:F.left};X.$ghostText&&X.$ghostTextWidget&&this.base.row===X.$ghostText.position.row&&(d.top+=X.$ghostTextWidget.el.offsetHeight),!this.popup.tryShow(d,me,"bottom")&&(this.popup.tryShow(F,me,"top")||this.popup.show(F,me))},o.prototype.openPopup=function(J,X,me){this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:U(this.popup.getRow()),inline:this.inlineEnabled}),J.keyBinding.addKeyboardHandler(this.keyboardHandler),this.popup.setRow(this.autoSelect?0:-1),me?me&&!X&&this.detach():(this.popup.setTheme(J.getTheme()),this.popup.setFontSize(J.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},o.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},o.prototype.changeListener=function(J){var X=this.editor.selection.lead;(X.row!=this.base.row||X.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},o.prototype.blurListener=function(J){var X=document.activeElement,me=this.editor.textInput.getElement(),F=J.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(J.relatedTarget),w=this.popup&&this.popup.container;X!=me&&X.parentNode!=w&&!F&&X!=this.tooltipNode&&J.relatedTarget!=me&&this.detach()},o.prototype.mousedownListener=function(J){this.detach()},o.prototype.mousewheelListener=function(J){this.detach()},o.prototype.goTo=function(J){this.popup.goTo(J)},o.prototype.insertMatch=function(J,X){if(J||(J=this.popup.getData(this.popup.getRow())),!J)return!1;if(J.value==="")return this.detach();var me=this.completions,F=this.getCompletionProvider().insertMatch(this.editor,J,me.filterText,X);return this.completions==me&&this.detach(),F},o.prototype.showPopup=function(J,X){this.editor&&this.detach(),this.activated=!0,this.editor=J,J.completer!=this&&(J.completer&&J.completer.detach(),J.completer=this),J.on("changeSelection",this.changeListener),J.on("blur",this.blurListener),J.on("mousedown",this.mousedownListener),J.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,X)},o.prototype.getCompletionProvider=function(){return this.completionProvider||(this.completionProvider=new C),this.completionProvider},o.prototype.gatherCompletions=function(J,X){return this.getCompletionProvider().gatherCompletions(J,X)},o.prototype.updateCompletions=function(J,X){if(J&&this.base&&this.completions){var F=this.editor.getCursorPosition(),w=this.editor.session.getTextRange({start:this.base,end:F});if(w==this.completions.filterText)return;if(this.completions.setFilter(w),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==w&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,w,J);return}if(X&&X.matches){var F=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(F.row,F.column),this.base.$insertRight=!0,this.completions=new de(X.matches),this.openPopup(this.editor,"",J)}var me=this.editor.getSession(),F=this.editor.getCursorPosition(),w=q.getCompletionPrefix(this.editor);this.base=me.doc.createAnchor(F.row,F.column-w.length),this.base.$insertRight=!0;var d={exactMatch:this.exactMatch};this.getCompletionProvider().provideCompletions(this.editor,d,function(O,a,j){var re=a.filtered,ee=q.getCompletionPrefix(this.editor);if(j){if(!re.length){var Ee=!this.autoShown&&this.emptyMessage;if(typeof Ee=="function"&&(Ee=this.emptyMessage(ee)),Ee){var ke=[{caption:this.emptyMessage(ee),value:""}];this.completions=new de(ke),this.openPopup(this.editor,ee,J);return}return this.detach()}if(re.length==1&&re[0].value==ee&&!re[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&re.length==1)return this.insertMatch(re[0])}this.completions=a,this.openPopup(this.editor,ee,J)}.bind(this))},o.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},o.prototype.updateDocTooltip=function(){var J=this.popup,X=J.data,me=X&&(X[J.getHoveredRow()]||X[J.getRow()]),F=null;if(!me||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var w=this.editor.completers.length,d=0;d<w;d++){var O=this.editor.completers[d];if(O.getDocTooltip&&me.completerId===O.id){F=O.getDocTooltip(me);break}}if(!F&&typeof me!="string"&&(F=me),typeof F=="string"&&(F={docText:F}),!F||!(F.docHTML||F.docText))return this.hideDocTooltip();this.showDocTooltip(F)},o.prototype.showDocTooltip=function(J){this.tooltipNode||(this.tooltipNode=ge.createElement("div"),this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"));var X=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(X.isDark?"ace_dark ":"")+(X.cssClass||"");var me=this.tooltipNode;J.docHTML?me.innerHTML=J.docHTML:J.docText&&(me.textContent=J.docText),me.parentNode||this.popup.container.appendChild(this.tooltipNode);var F=this.popup,w=F.container.getBoundingClientRect();me.style.top=F.container.style.top,me.style.bottom=F.container.style.bottom,me.style.display="block",window.innerWidth-w.right<320?w.left<320?F.isTopdown?(me.style.top=w.bottom+"px",me.style.left=w.left+"px",me.style.right="",me.style.bottom=""):(me.style.top=F.container.offsetTop-me.offsetHeight+"px",me.style.left=w.left+"px",me.style.right="",me.style.bottom=""):(me.style.right=window.innerWidth-w.left+"px",me.style.left=""):(me.style.left=w.right+1+"px",me.style.right="")},o.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var J=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==J&&this.editor.focus(),this.tooltipNode=null,J.parentNode&&J.parentNode.removeChild(J)}},o.prototype.onTooltipClick=function(J){for(var X=J.target;X&&X!=this.tooltipNode;){if(X.nodeName=="A"&&X.href){X.rel="noreferrer",X.target="_blank";break}X=X.parentNode}},o.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var J=this.popup.container;J&&J.parentNode&&J.parentNode.removeChild(J)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",ue),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},o}();c.prototype.commands={Up:function(o){o.completer.goTo("up")},Down:function(o){o.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(o){o.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(o){o.completer.goTo("end")},Esc:function(o){o.completer.detach()},Return:function(o){return o.completer.insertMatch()},"Shift-Return":function(o){o.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(o){var J=o.completer.insertMatch();if(!J&&!o.tabstopManager)o.completer.goTo("down");else return J},PageUp:function(o){o.completer.popup.gotoPageUp()},PageDown:function(o){o.completer.popup.gotoPageDown()}},c.for=function(o){return o.completer instanceof c||(o.completer&&(o.completer.destroy(),o.completer=null),te.get("sharedPopups")?(c.$sharedInstance||(c.$sharedInstance=new c),o.completer=c.$sharedInstance):(o.completer=new c,o.once("destroy",ue))),o.completer},c.startCommand={name:"startAutocomplete",exec:function(o,J){var X=c.for(o);X.autoInsert=!1,X.autoSelect=!0,X.autoShown=!1,X.showPopup(o,J),X.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var C=function(){function o(){this.active=!0}return o.prototype.insertByIndex=function(J,X,me){return!this.completions||!this.completions.filtered?!1:this.insertMatch(J,this.completions.filtered[X],me)},o.prototype.insertMatch=function(J,X,me){if(!X)return!1;if(J.startOperation({command:{name:"insertMatch"}}),X.completer&&X.completer.insertMatch)X.completer.insertMatch(J,X);else{if(!this.completions)return!1;if(this.completions.filterText&&!X.range){var F;J.selection.getAllRanges?F=J.selection.getAllRanges():F=[J.getSelectionRange()];for(var w=0,d;d=F[w];w++)d.start.column-=this.completions.filterText.length,J.session.remove(d)}X.snippet?pe.insertSnippet(J,X.snippet,{range:X.range}):this.$insertString(J,X),X.command&&X.command==="startAutocomplete"&&J.execCommand(X.command)}return J.endOperation(),!0},o.prototype.$insertString=function(J,X){var me=X.value||X;if(X.range){if(J.inVirtualSelectionMode)return J.session.replace(X.range,me);J.forEachSelection(function(){var F=J.getSelectionRange();X.range.compareRange(F)===0?J.session.replace(X.range,me):J.insert(me)},null,{keepOrder:!0})}else J.execCommand("insertstring",me)},o.prototype.gatherCompletions=function(J,X){var me=J.getSession(),F=J.getCursorPosition(),w=q.getCompletionPrefix(J),d=[];this.completers=J.completers;var O=J.completers.length;return J.completers.forEach(function(a,j){a.getCompletions(J,me,F,w,function(re,ee){!re&&ee&&(d=d.concat(ee)),X(null,{prefix:q.getCompletionPrefix(J),matches:d,finished:--O===0})})}),!0},o.prototype.provideCompletions=function(J,X,me){var F=function(a){var j=a.prefix,re=a.matches;this.completions=new de(re),X.exactMatch&&(this.completions.exactMatch=!0),X.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(j),(a.finished||this.completions.filtered.length)&&me(null,this.completions,a.finished)}.bind(this),w=!0,d=null;if(this.gatherCompletions(J,function(a,j){if(this.active){a&&(me(a,[],!0),this.detach());var re=j.prefix;if(re.indexOf(j.prefix)===0){if(w){d=j;return}F(j)}}}.bind(this)),w=!1,d){var O=d;d=null,F(O)}},o.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(J){typeof J.cancel=="function"&&J.cancel()})},o}(),de=function(){function o(J,X){this.all=J,this.filtered=J,this.filterText=X||"",this.exactMatch=!1,this.ignoreCaption=!1}return o.prototype.setFilter=function(J){if(J.length>this.filterText&&J.lastIndexOf(this.filterText,0)===0)var X=this.filtered;else var X=this.all;this.filterText=J,X=this.filterCompletions(X,this.filterText),X=X.sort(function(F,w){return w.exactMatch-F.exactMatch||w.$score-F.$score||(F.caption||F.value).localeCompare(w.caption||w.value)});var me=null;X=X.filter(function(F){var w=F.snippet||F.caption||F.value;return w===me?!1:(me=w,!0)}),this.filtered=X},o.prototype.filterCompletions=function(J,X){var me=[],F=X.toUpperCase(),w=X.toLowerCase();e:for(var d=0,O;O=J[d];d++){var a=!this.ignoreCaption&&O.caption||O.value||O.snippet;if(a){var j=-1,re=0,ee=0,Ee,ke;if(this.exactMatch){if(X!==a.substr(0,X.length))continue e}else{var De=a.toLowerCase().indexOf(w);if(De>-1)ee=De;else for(var Ce=0;Ce<X.length;Ce++){var Fe=a.indexOf(w[Ce],j+1),Oe=a.indexOf(F[Ce],j+1);if(Ee=Fe>=0&&(Oe<0||Fe<Oe)?Fe:Oe,Ee<0)continue e;ke=Ee-j-1,ke>0&&(j===-1&&(ee+=10),ee+=ke,re=re|1<<Ce),j=Ee}}O.matchMask=re,O.exactMatch=ee?0:1,O.$score=(O.score||0)-ee,me.push(O)}}return me},o}();r.Autocomplete=c,r.CompletionProvider=C,r.FilteredList=de}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(n,r,T){var p=n("../range").Range,s=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function _(q,Z){var ge=q.getTextRange(p.fromPoints({row:0,column:0},Z));return ge.split(s).length-1}function U(q,Z){var ge=_(q,Z),pe=q.getValue().split(s),te=Object.create(null),ue=pe[ge];return pe.forEach(function(c,C){if(!(!c||c===ue)){var de=Math.abs(ge-C),o=pe.length-de;te[c]?te[c]=Math.max(o,te[c]):te[c]=o}}),te}r.getCompletions=function(q,Z,ge,pe,te){var ue=U(Z,ge),c=Object.keys(ue);te(null,c.map(function(C){return{caption:C,value:C,score:ue[C],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(n,r,T){var p=n("../snippets").snippetManager,s=n("../autocomplete").Autocomplete,_=n("../config"),U=n("../lib/lang"),q=n("../autocomplete/util"),Z=n("../autocomplete/text_completer"),ge={getCompletions:function(d,O,a,j,re){if(O.$mode.completer)return O.$mode.completer.getCompletions(d,O,a,j,re);var ee=d.session.getState(a.row),Ee=O.$mode.getCompletions(ee,O,a,j);Ee=Ee.map(function(ke){return ke.completerId=ge.id,ke}),re(null,Ee)},id:"keywordCompleter"},pe=function(d){var O={};return d.replace(/\${(\d+)(:(.*?))?}/g,function(a,j,re,ee){return O[j]=ee||""}).replace(/\$(\d+?)/g,function(a,j){return O[j]})},te={getCompletions:function(d,O,a,j,re){var ee=[],Ee=O.getTokenAt(a.row,a.column);Ee&&Ee.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?ee.push("html-tag"):ee=p.getActiveScopes(d);var ke=p.snippetMap,De=[];ee.forEach(function(Ce){for(var Fe=ke[Ce]||[],Oe=Fe.length;Oe--;){var je=Fe[Oe],qe=je.name||je.tabTrigger;qe&&De.push({caption:qe,snippet:je.content,meta:je.tabTrigger&&!je.name?je.tabTrigger+"⇥ ":"snippet",completerId:te.id})}},this),re(null,De)},getDocTooltip:function(d){d.snippet&&!d.docHTML&&(d.docHTML=["<b>",U.escapeHTML(d.caption),"</b>","<hr></hr>",U.escapeHTML(pe(d.snippet))].join(""))},id:"snippetCompleter"},ue=[te,Z,ge];r.setCompleters=function(d){ue.length=0,d&&ue.push.apply(ue,d)},r.addCompleter=function(d){ue.push(d)},r.textCompleter=Z,r.keyWordCompleter=ge,r.snippetCompleter=te;var c={name:"expandSnippet",exec:function(d){return p.expandWithTab(d)},bindKey:"Tab"},C=function(d,O){de(O.session.$mode)},de=function(d){typeof d=="string"&&(d=_.$modes[d]),d&&(p.files||(p.files={}),o(d.$id,d.snippetFileId),d.modes&&d.modes.forEach(de))},o=function(d,O){!O||!d||p.files[d]||(p.files[d]={},_.loadModule(O,function(a){a&&(p.files[d]=a,!a.snippets&&a.snippetText&&(a.snippets=p.parseSnippetFile(a.snippetText)),p.register(a.snippets||[],a.scope),a.includeScopes&&(p.snippetMap[a.scope].includeScopes=a.includeScopes,a.includeScopes.forEach(function(j){de("ace/mode/"+j)})))}))},J=function(d){var O=d.editor,a=O.completer&&O.completer.activated;if(d.command.name==="backspace")a&&!q.getCompletionPrefix(O)&&O.completer.detach();else if(d.command.name==="insertstring"&&!a){X=d;var j=d.editor.$liveAutocompletionDelay;j?me.delay(j):F(d)}},X,me=U.delayedCall(function(){F(X)},0),F=function(d){var O=d.editor,a=q.getCompletionPrefix(O),j=q.triggerAutocomplete(O);if((a||j)&&a.length>=O.$liveAutocompletionThreshold){var re=s.for(O);re.autoShown=!0,re.showPopup(O)}},w=n("../editor").Editor;n("../config").defineOptions(w.prototype,"editor",{enableBasicAutocompletion:{set:function(d){d?(this.completers||(this.completers=Array.isArray(d)?d:ue),this.commands.addCommand(s.startCommand)):this.commands.removeCommand(s.startCommand)},value:!1},enableLiveAutocompletion:{set:function(d){d?(this.completers||(this.completers=Array.isArray(d)?d:ue),this.commands.on("afterExec",J)):this.commands.off("afterExec",J)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(d){d?(this.commands.addCommand(c),this.on("changeMode",C),C(null,this)):(this.commands.removeCommand(c),this.off("changeMode",C))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(n){e&&(e.exports=n)})}()})(extLanguage_tools);ace$1.config.set("basePath","path");let editor;const _sfc_main$1={props:{lang:String},setup(e){return{store:useCommandStore()}},data(){return{}},mounted(){var e;this.lang=="js"?e="javascript":e=this.lang,editor=ace$1.edit("editorArea",{mode:"ace/mode/"+e,tabSize:4,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0})},methods:{source(){this.store.updateCommand(editor.getValue())},save(){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(editor.getValue())),e.setAttribute("download","Wasm4Learn.R"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}},_hoisted_1$1={class:"mb-2 text-left"},_hoisted_2$1={id:"editorArea",style:{height:"90%"},ref:"codeValue"};function _sfc_render$1(e,t,n,r,T,p){const s=resolveComponent("v-btn");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$1,[createVNode(s,{onClick:p.save,size:"x-small","prepend-icon":"mdi-content-save",class:"mx-2",style:{"min-width":"100px"}},{default:withCtx(()=>[createTextVNode(" Save")]),_:1},8,["onClick"]),createVNode(s,{onClick:p.source,size:"x-small","prepend-icon":"mdi-play",class:"mx-2",style:{"min-width":"100px"}},{default:withCtx(()=>[createTextVNode(" Source")]),_:1},8,["onClick"])]),createBaseVNode("div",_hoisted_2$1,null,512)],64)}const __nuxt_component_1=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]);var In=Object.create,Ir=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,Cn=Object.getOwnPropertyNames,jn=Object.getPrototypeOf,Nn=Object.prototype.hasOwnProperty,H=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Bn=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let T of Cn(t))!Nn.call(e,T)&&T!==n&&Ir(e,T,{get:()=>t[T],enumerable:!(r=Un(t,T))||r.enumerable});return e},Y=(e,t,n)=>(n=e!=null?In(jn(e)):{},Bn(t||!e||!e.__esModule?Ir(n,"default",{value:e,enumerable:!0}):n,e)),Qt=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},i=(e,t,n)=>(Qt(e,t,"read from private field"),n?n.call(e):t.get(e)),u=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},h=(e,t,n,r)=>(Qt(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),v=(e,t,n)=>(Qt(e,t,"access private method"),n),_e=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getUint64=e.getInt64=e.setInt64=e.setUint64=e.UINT32_MAX=void 0,e.UINT32_MAX=4294967295;function t(p,s,_){let U=_/4294967296,q=_;p.setUint32(s,U),p.setUint32(s+4,q)}e.setUint64=t;function n(p,s,_){let U=Math.floor(_/4294967296),q=_;p.setUint32(s,U),p.setUint32(s+4,q)}e.setInt64=n;function r(p,s){let _=p.getInt32(s),U=p.getUint32(s+4);return _*4294967296+U}e.getInt64=r;function T(p,s){let _=p.getUint32(s),U=p.getUint32(s+4);return _*4294967296+U}e.getUint64=T}),at=P(e=>{var t,n,r;Object.defineProperty(e,"__esModule",{value:!0}),e.utf8DecodeTD=e.TEXT_DECODER_THRESHOLD=e.utf8DecodeJs=e.utf8EncodeTE=e.TEXT_ENCODER_THRESHOLD=e.utf8EncodeJs=e.utf8Count=void 0;var T=_e(),p=(typeof process>"u"||((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function s(c){let C=c.length,de=0,o=0;for(;o<C;){let J=c.charCodeAt(o++);if(J&4294967168)if(!(J&4294965248))de+=2;else{if(J>=55296&&J<=56319&&o<C){let X=c.charCodeAt(o);(X&64512)===56320&&(++o,J=((J&1023)<<10)+(X&1023)+65536)}J&4294901760?de+=4:de+=3}else{de++;continue}}return de}e.utf8Count=s;function _(c,C,de){let o=c.length,J=de,X=0;for(;X<o;){let me=c.charCodeAt(X++);if(me&4294967168)if(!(me&4294965248))C[J++]=me>>6&31|192;else{if(me>=55296&&me<=56319&&X<o){let F=c.charCodeAt(X);(F&64512)===56320&&(++X,me=((me&1023)<<10)+(F&1023)+65536)}me&4294901760?(C[J++]=me>>18&7|240,C[J++]=me>>12&63|128,C[J++]=me>>6&63|128):(C[J++]=me>>12&15|224,C[J++]=me>>6&63|128)}else{C[J++]=me;continue}C[J++]=me&63|128}}e.utf8EncodeJs=_;var U=p?new TextEncoder:void 0;e.TEXT_ENCODER_THRESHOLD=p?typeof process<"u"&&((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.TEXT_ENCODING)!=="force"?200:0:T.UINT32_MAX;function q(c,C,de){C.set(U.encode(c),de)}function Z(c,C,de){U.encodeInto(c,C.subarray(de))}e.utf8EncodeTE=U!=null&&U.encodeInto?Z:q;var ge=4096;function pe(c,C,de){let o=C,J=o+de,X=[],me="";for(;o<J;){let F=c[o++];if(!(F&128))X.push(F);else if((F&224)===192){let w=c[o++]&63;X.push((F&31)<<6|w)}else if((F&240)===224){let w=c[o++]&63,d=c[o++]&63;X.push((F&31)<<12|w<<6|d)}else if((F&248)===240){let w=c[o++]&63,d=c[o++]&63,O=c[o++]&63,a=(F&7)<<18|w<<12|d<<6|O;a>65535&&(a-=65536,X.push(a>>>10&1023|55296),a=56320|a&1023),X.push(a)}else X.push(F);X.length>=ge&&(me+=String.fromCharCode(...X),X.length=0)}return X.length>0&&(me+=String.fromCharCode(...X)),me}e.utf8DecodeJs=pe;var te=p?new TextDecoder:null;e.TEXT_DECODER_THRESHOLD=p?typeof process<"u"&&((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.TEXT_DECODER)!=="force"?200:0:T.UINT32_MAX;function ue(c,C,de){let o=c.subarray(C,C+de);return te.decode(o)}e.utf8DecodeTD=ue}),nr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtData=void 0;var t=class{constructor(n,r){this.type=n,this.data=r}};e.ExtData=t}),ut=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecodeError=void 0;var t=class extends Error{constructor(n){super(n);let r=Object.create(t.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};e.DecodeError=t}),sr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestampExtension=e.decodeTimestampExtension=e.decodeTimestampToTimeSpec=e.encodeTimestampExtension=e.encodeDateToTimeSpec=e.encodeTimeSpecToTimestamp=e.EXT_TIMESTAMP=void 0;var t=ut(),n=_e();e.EXT_TIMESTAMP=-1;var r=4294967296-1,T=17179869184-1;function p({sec:Z,nsec:ge}){if(Z>=0&&ge>=0&&Z<=T)if(ge===0&&Z<=r){let pe=new Uint8Array(4);return new DataView(pe.buffer).setUint32(0,Z),pe}else{let pe=Z/4294967296,te=Z&4294967295,ue=new Uint8Array(8),c=new DataView(ue.buffer);return c.setUint32(0,ge<<2|pe&3),c.setUint32(4,te),ue}else{let pe=new Uint8Array(12),te=new DataView(pe.buffer);return te.setUint32(0,ge),(0,n.setInt64)(te,4,Z),pe}}e.encodeTimeSpecToTimestamp=p;function s(Z){let ge=Z.getTime(),pe=Math.floor(ge/1e3),te=(ge-pe*1e3)*1e6,ue=Math.floor(te/1e9);return{sec:pe+ue,nsec:te-ue*1e9}}e.encodeDateToTimeSpec=s;function _(Z){if(Z instanceof Date){let ge=s(Z);return p(ge)}else return null}e.encodeTimestampExtension=_;function U(Z){let ge=new DataView(Z.buffer,Z.byteOffset,Z.byteLength);switch(Z.byteLength){case 4:return{sec:ge.getUint32(0),nsec:0};case 8:{let pe=ge.getUint32(0),te=ge.getUint32(4),ue=(pe&3)*4294967296+te,c=pe>>>2;return{sec:ue,nsec:c}}case 12:{let pe=(0,n.getInt64)(ge,4),te=ge.getUint32(0);return{sec:pe,nsec:te}}default:throw new t.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${Z.length}`)}}e.decodeTimestampToTimeSpec=U;function q(Z){let ge=U(Z);return new Date(ge.sec*1e3+ge.nsec/1e6)}e.decodeTimestampExtension=q,e.timestampExtension={type:e.EXT_TIMESTAMP,encode:_,decode:q}}),ht=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionCodec=void 0;var t=nr(),n=sr(),r=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(n.timestampExtension)}register({type:T,encode:p,decode:s}){if(T>=0)this.encoders[T]=p,this.decoders[T]=s;else{let _=1+T;this.builtInEncoders[_]=p,this.builtInDecoders[_]=s}}tryToEncode(T,p){for(let s=0;s<this.builtInEncoders.length;s++){let _=this.builtInEncoders[s];if(_!=null){let U=_(T,p);if(U!=null){let q=-1-s;return new t.ExtData(q,U)}}}for(let s=0;s<this.encoders.length;s++){let _=this.encoders[s];if(_!=null){let U=_(T,p);if(U!=null){let q=s;return new t.ExtData(q,U)}}}return T instanceof t.ExtData?T:null}decode(T,p,s){let _=p<0?this.builtInDecoders[-1-p]:this.decoders[p];return _?_(T,p,s):new t.ExtData(p,T)}};e.ExtensionCodec=r,r.defaultCodec=new r}),or=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDataView=e.ensureUint8Array=void 0;function t(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?new Uint8Array(r):Uint8Array.from(r)}e.ensureUint8Array=t;function n(r){if(r instanceof ArrayBuffer)return new DataView(r);let T=t(r);return new DataView(T.buffer,T.byteOffset,T.byteLength)}e.createDataView=n}),ar=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Encoder=e.DEFAULT_INITIAL_BUFFER_SIZE=e.DEFAULT_MAX_DEPTH=void 0;var t=at(),n=ht(),r=_e(),T=or();e.DEFAULT_MAX_DEPTH=100,e.DEFAULT_INITIAL_BUFFER_SIZE=2048;var p=class{constructor(s=n.ExtensionCodec.defaultCodec,_=void 0,U=e.DEFAULT_MAX_DEPTH,q=e.DEFAULT_INITIAL_BUFFER_SIZE,Z=!1,ge=!1,pe=!1,te=!1){this.extensionCodec=s,this.context=_,this.maxDepth=U,this.initialBufferSize=q,this.sortKeys=Z,this.forceFloat32=ge,this.ignoreUndefined=pe,this.forceIntegerToFloat=te,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(s){return this.reinitializeState(),this.doEncode(s,1),this.bytes.subarray(0,this.pos)}encode(s){return this.reinitializeState(),this.doEncode(s,1),this.bytes.slice(0,this.pos)}doEncode(s,_){if(_>this.maxDepth)throw new Error(`Too deep objects in depth ${_}`);s==null?this.encodeNil():typeof s=="boolean"?this.encodeBoolean(s):typeof s=="number"?this.encodeNumber(s):typeof s=="string"?this.encodeString(s):this.encodeObject(s,_)}ensureBufferSizeToWrite(s){let _=this.pos+s;this.view.byteLength<_&&this.resizeBuffer(_*2)}resizeBuffer(s){let _=new ArrayBuffer(s),U=new Uint8Array(_),q=new DataView(_);U.set(this.bytes),this.view=q,this.bytes=U}encodeNil(){this.writeU8(192)}encodeBoolean(s){s===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(s){Number.isSafeInteger(s)&&!this.forceIntegerToFloat?s>=0?s<128?this.writeU8(s):s<256?(this.writeU8(204),this.writeU8(s)):s<65536?(this.writeU8(205),this.writeU16(s)):s<4294967296?(this.writeU8(206),this.writeU32(s)):(this.writeU8(207),this.writeU64(s)):s>=-32?this.writeU8(224|s+32):s>=-128?(this.writeU8(208),this.writeI8(s)):s>=-32768?(this.writeU8(209),this.writeI16(s)):s>=-2147483648?(this.writeU8(210),this.writeI32(s)):(this.writeU8(211),this.writeI64(s)):this.forceFloat32?(this.writeU8(202),this.writeF32(s)):(this.writeU8(203),this.writeF64(s))}writeStringHeader(s){if(s<32)this.writeU8(160+s);else if(s<256)this.writeU8(217),this.writeU8(s);else if(s<65536)this.writeU8(218),this.writeU16(s);else if(s<4294967296)this.writeU8(219),this.writeU32(s);else throw new Error(`Too long string: ${s} bytes in UTF-8`)}encodeString(s){if(s.length>t.TEXT_ENCODER_THRESHOLD){let _=(0,t.utf8Count)(s);this.ensureBufferSizeToWrite(5+_),this.writeStringHeader(_),(0,t.utf8EncodeTE)(s,this.bytes,this.pos),this.pos+=_}else{let _=(0,t.utf8Count)(s);this.ensureBufferSizeToWrite(5+_),this.writeStringHeader(_),(0,t.utf8EncodeJs)(s,this.bytes,this.pos),this.pos+=_}}encodeObject(s,_){let U=this.extensionCodec.tryToEncode(s,this.context);if(U!=null)this.encodeExtension(U);else if(Array.isArray(s))this.encodeArray(s,_);else if(ArrayBuffer.isView(s))this.encodeBinary(s);else if(typeof s=="object")this.encodeMap(s,_);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(s)}`)}encodeBinary(s){let _=s.byteLength;if(_<256)this.writeU8(196),this.writeU8(_);else if(_<65536)this.writeU8(197),this.writeU16(_);else if(_<4294967296)this.writeU8(198),this.writeU32(_);else throw new Error(`Too large binary: ${_}`);let U=(0,T.ensureUint8Array)(s);this.writeU8a(U)}encodeArray(s,_){let U=s.length;if(U<16)this.writeU8(144+U);else if(U<65536)this.writeU8(220),this.writeU16(U);else if(U<4294967296)this.writeU8(221),this.writeU32(U);else throw new Error(`Too large array: ${U}`);for(let q of s)this.doEncode(q,_+1)}countWithoutUndefined(s,_){let U=0;for(let q of _)s[q]!==void 0&&U++;return U}encodeMap(s,_){let U=Object.keys(s);this.sortKeys&&U.sort();let q=this.ignoreUndefined?this.countWithoutUndefined(s,U):U.length;if(q<16)this.writeU8(128+q);else if(q<65536)this.writeU8(222),this.writeU16(q);else if(q<4294967296)this.writeU8(223),this.writeU32(q);else throw new Error(`Too large map object: ${q}`);for(let Z of U){let ge=s[Z];this.ignoreUndefined&&ge===void 0||(this.encodeString(Z),this.doEncode(ge,_+1))}}encodeExtension(s){let _=s.data.length;if(_===1)this.writeU8(212);else if(_===2)this.writeU8(213);else if(_===4)this.writeU8(214);else if(_===8)this.writeU8(215);else if(_===16)this.writeU8(216);else if(_<256)this.writeU8(199),this.writeU8(_);else if(_<65536)this.writeU8(200),this.writeU16(_);else if(_<4294967296)this.writeU8(201),this.writeU32(_);else throw new Error(`Too large extension object: ${_}`);this.writeI8(s.type),this.writeU8a(s.data)}writeU8(s){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,s),this.pos++}writeU8a(s){let _=s.length;this.ensureBufferSizeToWrite(_),this.bytes.set(s,this.pos),this.pos+=_}writeI8(s){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,s),this.pos++}writeU16(s){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,s),this.pos+=2}writeI16(s){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,s),this.pos+=2}writeU32(s){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,s),this.pos+=4}writeI32(s){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,s),this.pos+=4}writeF32(s){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,s),this.pos+=4}writeF64(s){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,s),this.pos+=8}writeU64(s){this.ensureBufferSizeToWrite(8),(0,r.setUint64)(this.view,this.pos,s),this.pos+=8}writeI64(s){this.ensureBufferSizeToWrite(8),(0,r.setInt64)(this.view,this.pos,s),this.pos+=8}};e.Encoder=p}),zr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encode=void 0;var t=ar(),n={};function r(T,p=n){return new t.Encoder(p.extensionCodec,p.context,p.maxDepth,p.initialBufferSize,p.sortKeys,p.forceFloat32,p.ignoreUndefined,p.forceIntegerToFloat).encodeSharedRef(T)}e.encode=r}),Xr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.prettyByte=void 0;function t(n){return`${n<0?"-":""}0x${Math.abs(n).toString(16).padStart(2,"0")}`}e.prettyByte=t}),Gr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CachedKeyDecoder=void 0;var t=at(),n=16,r=16,T=class{constructor(p=n,s=r){this.maxKeyLength=p,this.maxLengthPerKey=s,this.hit=0,this.miss=0,this.caches=[];for(let _=0;_<this.maxKeyLength;_++)this.caches.push([])}canBeCached(p){return p>0&&p<=this.maxKeyLength}find(p,s,_){let U=this.caches[_-1];e:for(let q of U){let Z=q.bytes;for(let ge=0;ge<_;ge++)if(Z[ge]!==p[s+ge])continue e;return q.str}return null}store(p,s){let _=this.caches[p.length-1],U={bytes:p,str:s};_.length>=this.maxLengthPerKey?_[Math.random()*_.length|0]=U:_.push(U)}decode(p,s,_){let U=this.find(p,s,_);if(U!=null)return this.hit++,U;this.miss++;let q=(0,t.utf8DecodeJs)(p,s,_),Z=Uint8Array.prototype.slice.call(p,s,s+_);return this.store(Z,q),q}};e.CachedKeyDecoder=T}),mt=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.DataViewIndexOutOfBoundsError=void 0;var t=Xr(),n=ht(),r=_e(),T=at(),p=or(),s=Gr(),_=ut(),U=c=>{let C=typeof c;return C==="string"||C==="number"},q=-1,Z=new DataView(new ArrayBuffer(0)),ge=new Uint8Array(Z.buffer);e.DataViewIndexOutOfBoundsError=(()=>{try{Z.getInt8(0)}catch(c){return c.constructor}throw new Error("never reached")})();var pe=new e.DataViewIndexOutOfBoundsError("Insufficient data"),te=new s.CachedKeyDecoder,ue=class{constructor(c=n.ExtensionCodec.defaultCodec,C=void 0,de=r.UINT32_MAX,o=r.UINT32_MAX,J=r.UINT32_MAX,X=r.UINT32_MAX,me=r.UINT32_MAX,F=te){this.extensionCodec=c,this.context=C,this.maxStrLength=de,this.maxBinLength=o,this.maxArrayLength=J,this.maxMapLength=X,this.maxExtLength=me,this.keyDecoder=F,this.totalPos=0,this.pos=0,this.view=Z,this.bytes=ge,this.headByte=q,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=q,this.stack.length=0}setBuffer(c){this.bytes=(0,p.ensureUint8Array)(c),this.view=(0,p.createDataView)(this.bytes),this.pos=0}appendBuffer(c){if(this.headByte===q&&!this.hasRemaining(1))this.setBuffer(c);else{let C=this.bytes.subarray(this.pos),de=(0,p.ensureUint8Array)(c),o=new Uint8Array(C.length+de.length);o.set(C),o.set(de,C.length),this.setBuffer(o)}}hasRemaining(c){return this.view.byteLength-this.pos>=c}createExtraByteError(c){let{view:C,pos:de}=this;return new RangeError(`Extra ${C.byteLength-de} of ${C.byteLength} byte(s) found at buffer[${c}]`)}decode(c){this.reinitializeState(),this.setBuffer(c);let C=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return C}*decodeMulti(c){for(this.reinitializeState(),this.setBuffer(c);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(c){let C=!1,de;for await(let me of c){if(C)throw this.createExtraByteError(this.totalPos);this.appendBuffer(me);try{de=this.doDecodeSync(),C=!0}catch(F){if(!(F instanceof e.DataViewIndexOutOfBoundsError))throw F}this.totalPos+=this.pos}if(C){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return de}let{headByte:o,pos:J,totalPos:X}=this;throw new RangeError(`Insufficient data in parsing ${(0,t.prettyByte)(o)} at ${X} (${J} in the current buffer)`)}decodeArrayStream(c){return this.decodeMultiAsync(c,!0)}decodeStream(c){return this.decodeMultiAsync(c,!1)}async*decodeMultiAsync(c,C){let de=C,o=-1;for await(let J of c){if(C&&o===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(J),de&&(o=this.readArraySize(),de=!1,this.complete());try{for(;yield this.doDecodeSync(),--o!==0;);}catch(X){if(!(X instanceof e.DataViewIndexOutOfBoundsError))throw X}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let c=this.readHeadByte(),C;if(c>=224)C=c-256;else if(c<192)if(c<128)C=c;else if(c<144){let o=c-128;if(o!==0){this.pushMapState(o),this.complete();continue e}else C={}}else if(c<160){let o=c-144;if(o!==0){this.pushArrayState(o),this.complete();continue e}else C=[]}else{let o=c-160;C=this.decodeUtf8String(o,0)}else if(c===192)C=null;else if(c===194)C=!1;else if(c===195)C=!0;else if(c===202)C=this.readF32();else if(c===203)C=this.readF64();else if(c===204)C=this.readU8();else if(c===205)C=this.readU16();else if(c===206)C=this.readU32();else if(c===207)C=this.readU64();else if(c===208)C=this.readI8();else if(c===209)C=this.readI16();else if(c===210)C=this.readI32();else if(c===211)C=this.readI64();else if(c===217){let o=this.lookU8();C=this.decodeUtf8String(o,1)}else if(c===218){let o=this.lookU16();C=this.decodeUtf8String(o,2)}else if(c===219){let o=this.lookU32();C=this.decodeUtf8String(o,4)}else if(c===220){let o=this.readU16();if(o!==0){this.pushArrayState(o),this.complete();continue e}else C=[]}else if(c===221){let o=this.readU32();if(o!==0){this.pushArrayState(o),this.complete();continue e}else C=[]}else if(c===222){let o=this.readU16();if(o!==0){this.pushMapState(o),this.complete();continue e}else C={}}else if(c===223){let o=this.readU32();if(o!==0){this.pushMapState(o),this.complete();continue e}else C={}}else if(c===196){let o=this.lookU8();C=this.decodeBinary(o,1)}else if(c===197){let o=this.lookU16();C=this.decodeBinary(o,2)}else if(c===198){let o=this.lookU32();C=this.decodeBinary(o,4)}else if(c===212)C=this.decodeExtension(1,0);else if(c===213)C=this.decodeExtension(2,0);else if(c===214)C=this.decodeExtension(4,0);else if(c===215)C=this.decodeExtension(8,0);else if(c===216)C=this.decodeExtension(16,0);else if(c===199){let o=this.lookU8();C=this.decodeExtension(o,1)}else if(c===200){let o=this.lookU16();C=this.decodeExtension(o,2)}else if(c===201){let o=this.lookU32();C=this.decodeExtension(o,4)}else throw new _.DecodeError(`Unrecognized type byte: ${(0,t.prettyByte)(c)}`);this.complete();let de=this.stack;for(;de.length>0;){let o=de[de.length-1];if(o.type===0)if(o.array[o.position]=C,o.position++,o.position===o.size)de.pop(),C=o.array;else continue e;else if(o.type===1){if(!U(C))throw new _.DecodeError("The type of key must be string or number but "+typeof C);if(C==="__proto__")throw new _.DecodeError("The key __proto__ is not allowed");o.key=C,o.type=2;continue e}else if(o.map[o.key]=C,o.readCount++,o.readCount===o.size)de.pop(),C=o.map;else{o.key=null,o.type=1;continue e}}return C}}readHeadByte(){return this.headByte===q&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=q}readArraySize(){let c=this.readHeadByte();switch(c){case 220:return this.readU16();case 221:return this.readU32();default:{if(c<160)return c-144;throw new _.DecodeError(`Unrecognized array type byte: ${(0,t.prettyByte)(c)}`)}}}pushMapState(c){if(c>this.maxMapLength)throw new _.DecodeError(`Max length exceeded: map length (${c}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:c,key:null,readCount:0,map:{}})}pushArrayState(c){if(c>this.maxArrayLength)throw new _.DecodeError(`Max length exceeded: array length (${c}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:c,array:new Array(c),position:0})}decodeUtf8String(c,C){var de;if(c>this.maxStrLength)throw new _.DecodeError(`Max length exceeded: UTF-8 byte length (${c}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+C+c)throw pe;let o=this.pos+C,J;return this.stateIsMapKey()&&!((de=this.keyDecoder)===null||de===void 0)&&de.canBeCached(c)?J=this.keyDecoder.decode(this.bytes,o,c):c>T.TEXT_DECODER_THRESHOLD?J=(0,T.utf8DecodeTD)(this.bytes,o,c):J=(0,T.utf8DecodeJs)(this.bytes,o,c),this.pos+=C+c,J}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(c,C){if(c>this.maxBinLength)throw new _.DecodeError(`Max length exceeded: bin length (${c}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(c+C))throw pe;let de=this.pos+C,o=this.bytes.subarray(de,de+c);return this.pos+=C+c,o}decodeExtension(c,C){if(c>this.maxExtLength)throw new _.DecodeError(`Max length exceeded: ext length (${c}) > maxExtLength (${this.maxExtLength})`);let de=this.view.getInt8(this.pos+C),o=this.decodeBinary(c,C+1);return this.extensionCodec.decode(o,de,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let c=this.view.getUint8(this.pos);return this.pos++,c}readI8(){let c=this.view.getInt8(this.pos);return this.pos++,c}readU16(){let c=this.view.getUint16(this.pos);return this.pos+=2,c}readI16(){let c=this.view.getInt16(this.pos);return this.pos+=2,c}readU32(){let c=this.view.getUint32(this.pos);return this.pos+=4,c}readI32(){let c=this.view.getInt32(this.pos);return this.pos+=4,c}readU64(){let c=(0,r.getUint64)(this.view,this.pos);return this.pos+=8,c}readI64(){let c=(0,r.getInt64)(this.view,this.pos);return this.pos+=8,c}readF32(){let c=this.view.getFloat32(this.pos);return this.pos+=4,c}readF64(){let c=this.view.getFloat64(this.pos);return this.pos+=8,c}};e.Decoder=ue}),yr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.decodeMulti=e.decode=e.defaultDecodeOptions=void 0;var t=mt();e.defaultDecodeOptions={};function n(T,p=e.defaultDecodeOptions){return new t.Decoder(p.extensionCodec,p.context,p.maxStrLength,p.maxBinLength,p.maxArrayLength,p.maxMapLength,p.maxExtLength).decode(T)}e.decode=n;function r(T,p=e.defaultDecodeOptions){return new t.Decoder(p.extensionCodec,p.context,p.maxStrLength,p.maxBinLength,p.maxArrayLength,p.maxMapLength,p.maxExtLength).decodeMulti(T)}e.decodeMulti=r}),Yr=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ensureAsyncIterable=e.asyncIterableFromStream=e.isAsyncIterable=void 0;function t(p){return p[Symbol.asyncIterator]!=null}e.isAsyncIterable=t;function n(p){if(p==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*r(p){let s=p.getReader();try{for(;;){let{done:_,value:U}=await s.read();if(_)return;n(U),yield U}}finally{s.releaseLock()}}e.asyncIterableFromStream=r;function T(p){return t(p)?p:r(p)}e.ensureAsyncIterable=T}),tn=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.decodeStream=e.decodeMultiStream=e.decodeArrayStream=e.decodeAsync=void 0;var t=mt(),n=Yr(),r=yr();async function T(U,q=r.defaultDecodeOptions){let Z=(0,n.ensureAsyncIterable)(U);return new t.Decoder(q.extensionCodec,q.context,q.maxStrLength,q.maxBinLength,q.maxArrayLength,q.maxMapLength,q.maxExtLength).decodeAsync(Z)}e.decodeAsync=T;function p(U,q=r.defaultDecodeOptions){let Z=(0,n.ensureAsyncIterable)(U);return new t.Decoder(q.extensionCodec,q.context,q.maxStrLength,q.maxBinLength,q.maxArrayLength,q.maxMapLength,q.maxExtLength).decodeArrayStream(Z)}e.decodeArrayStream=p;function s(U,q=r.defaultDecodeOptions){let Z=(0,n.ensureAsyncIterable)(U);return new t.Decoder(q.extensionCodec,q.context,q.maxStrLength,q.maxBinLength,q.maxArrayLength,q.maxMapLength,q.maxExtLength).decodeStream(Z)}e.decodeMultiStream=s;function _(U,q=r.defaultDecodeOptions){return s(U,q)}e.decodeStream=_}),wt=P(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.decodeTimestampExtension=e.encodeTimestampExtension=e.decodeTimestampToTimeSpec=e.encodeTimeSpecToTimestamp=e.encodeDateToTimeSpec=e.EXT_TIMESTAMP=e.ExtData=e.ExtensionCodec=e.Encoder=e.DataViewIndexOutOfBoundsError=e.DecodeError=e.Decoder=e.decodeStream=e.decodeMultiStream=e.decodeArrayStream=e.decodeAsync=e.decodeMulti=e.decode=e.encode=void 0;var t=zr();Object.defineProperty(e,"encode",{enumerable:!0,get:function(){return t.encode}});var n=yr();Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return n.decode}}),Object.defineProperty(e,"decodeMulti",{enumerable:!0,get:function(){return n.decodeMulti}});var r=tn();Object.defineProperty(e,"decodeAsync",{enumerable:!0,get:function(){return r.decodeAsync}}),Object.defineProperty(e,"decodeArrayStream",{enumerable:!0,get:function(){return r.decodeArrayStream}}),Object.defineProperty(e,"decodeMultiStream",{enumerable:!0,get:function(){return r.decodeMultiStream}}),Object.defineProperty(e,"decodeStream",{enumerable:!0,get:function(){return r.decodeStream}});var T=mt();Object.defineProperty(e,"Decoder",{enumerable:!0,get:function(){return T.Decoder}}),Object.defineProperty(e,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return T.DataViewIndexOutOfBoundsError}});var p=ut();Object.defineProperty(e,"DecodeError",{enumerable:!0,get:function(){return p.DecodeError}});var s=ar();Object.defineProperty(e,"Encoder",{enumerable:!0,get:function(){return s.Encoder}});var _=ht();Object.defineProperty(e,"ExtensionCodec",{enumerable:!0,get:function(){return _.ExtensionCodec}});var U=nr();Object.defineProperty(e,"ExtData",{enumerable:!0,get:function(){return U.ExtData}});var q=sr();Object.defineProperty(e,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return q.EXT_TIMESTAMP}}),Object.defineProperty(e,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return q.encodeDateToTimeSpec}}),Object.defineProperty(e,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return q.encodeTimeSpecToTimestamp}}),Object.defineProperty(e,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return q.decodeTimestampToTimeSpec}}),Object.defineProperty(e,"encodeTimestampExtension",{enumerable:!0,get:function(){return q.encodeTimestampExtension}}),Object.defineProperty(e,"decodeTimestampExtension",{enumerable:!0,get:function(){return q.decodeTimestampExtension}})}),M=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}},rt=class extends M{},D=class extends M{},z=class extends M{},x=typeof process<"u"&&process.release&&process.release.name==="node";if(!globalThis.document){if(!globalThis.importScripts){if(!x)throw new M("Cannot determine runtime environment")}}function le(){let e={resolve:n=>{},reject:n=>{},promise:null},t=new Promise((n,r)=>{e.resolve=n,e.reject=r});return e.promise=t,e}function Ur(e){return new Promise(t=>setTimeout(t,e))}function I(e,t,n,...r){return e===null||typeof e!="object"?e:t(e)?n(e,...r):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(T=>I(T,t,n,...r)):Object.fromEntries(Object.entries(e).map(([T,p],s)=>[T,I(p,t,n,...r)]))}function nt(e,t){let n=new XMLHttpRequest;n.open("get",e,!0),n.onload=()=>{let r=new Worker(URL.createObjectURL(new Blob([n.responseText])));t(r)},n.send()}function ce(e){if(x)return!1;let t=new URL(location.href),n=new URL(e,location.origin);return!(t.host===n.host&&t.port===n.port&&t.protocol===n.protocol)}var Ln=new WeakMap;function Cr(e,t){return Ln.set(e,t),e}var st=63;function ot(){let e=Array.from({length:4},Fn).join("-");if(e.length!==st)throw new Error("comlink internal error: UUID has the wrong length");return e}function Fn(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),t=15-e.length;return t>0&&(e=Array.from({length:t},()=>0).join("")+e),e}var on=Y(wt()),As=new TextEncoder;async function an(e,t,n){try{let{taskId:r,sizeBuffer:T,dataBuffer:p,signalBuffer:s}=t,_=(0,on.encode)(n),U=_.length<=p.length;if(Atomics.store(T,0,_.length),Atomics.store(T,1,+U),!U){let[q,Z]=Ms(e);p.set(As.encode(q)),await sn(s,r),p=(await Z).dataBuffer}p.set(_),Atomics.store(T,1,1),await sn(s,r)}catch(r){console.warn(r)}}function Ms(e){let t=ot();return[t,new Promise(n=>{x?e.once("message",r=>{!r.id||r.id!==t||n(r)}):e.addEventListener("message",function r(T){!T.data||!T.data.id||T.data.id!==t||(e.removeEventListener("message",r),n(T.data))}),e.start&&e.start()})]}async function sn(e,t){let n=(t>>1)%32,r=1;for(;Atomics.compareExchange(e,n+1,0,t)!==0;)await Ur(r),r<32&&(r*=2);Atomics.or(e,0,1<<n),Atomics.notify(e,0)}var N,B,Ae,mr,he=class{constructor(){u(this,Ae),u(this,N,void 0),u(this,B,void 0),h(this,B,[]),h(this,N,[])}reset(){h(this,B,[]),h(this,N,[])}put(e){i(this,B).length||v(this,Ae,mr).call(this),i(this,B).shift()(e)}async get(){return i(this,N).length||v(this,Ae,mr).call(this),i(this,N).shift()}isEmpty(){return!i(this,N).length}isBlocked(){return!!i(this,B).length}get length(){return i(this,N).length-i(this,B).length}};N=new WeakMap,B=new WeakMap,Ae=new WeakSet,mr=function(){i(this,N).push(new Promise(e=>{i(this,B).push(e)}))};function vt(e,t){return ln({type:"request",data:{uuid:ot(),msg:e}},t)}function gr(e,t,n){return ln({type:"response",data:{uuid:e,resp:t}},n)}function ln(e,t){return t&&Cr(e,t),e}function un(e){let t=new rt(e.obj.message);return e.obj.name!=="Error"&&(t.name=e.obj.name),t.stack=e.obj.stack,t}function Os(e){return e&&typeof e=="object"&&"payloadType"in e&&"obj"in e}function Tt(e){return Os(e)&&e.payloadType==="ptr"}var ye,fe=class{constructor(){this.inputQueue=new he,this.outputQueue=new he,this.systemQueue=new he,u(this,ye,new Map)}async read(){return await this.outputQueue.get()}async flush(){let e=[];for(;!this.outputQueue.isEmpty();)e.push(await this.read());return e}async readSystem(){return await this.systemQueue.get()}write(e){this.inputQueue.put(e)}async request(e,t){let n=vt(e,t),{resolve:r,reject:T,promise:p}=le();return i(this,ye).set(n.data.uuid,{resolve:r,reject:T}),this.write(n),p}putClosedMessage(){this.outputQueue.put({type:"closed"})}resolveResponse(e){let t=e.data.uuid,n=i(this,ye).get(t);if(n){let r=e.data.resp;i(this,ye).delete(t),r.payloadType==="err"?n.reject(un(r)):n.resolve(r)}else console.warn("Can't find request.")}};ye=new WeakMap;Y(wt());new TextDecoder("utf-8");var l={};function Rn(e){Object.keys(e).forEach(t=>l._free(e[t]))}x&&(globalThis.Worker=H("worker_threads").Worker);var be,St,mn,Ue,Ie=class extends fe{constructor(e){super(),u(this,St),u(this,be,void 0),this.close=()=>{},u(this,Ue,async(n,r)=>{if(!(!r||!r.type))switch(r.type){case"resolve":h(this,be,new Int32Array(r.data)),this.resolve();return;case"response":this.resolveResponse(r);return;case"system":this.systemQueue.put(r.data);return;default:this.outputQueue.put(r);return;case"sync-request":{let T=r,p=T.data.msg,s=T.data.reqData;switch(p.type){case"read":{let _=await this.inputQueue.get();await an(n,s,_);break}default:throw new D(`Unsupported request type '${p.type}'.`)}return}case"request":throw new D("Can't send messages of type 'request' from a worker. Please Use 'sync-request' instead.")}});let t=n=>{v(this,St,mn).call(this,n),this.close=()=>{n.terminate(),this.putClosedMessage()};let r={type:"init",data:{config:e,channelType:V.SharedArrayBuffer}};n.postMessage(r)};if(ce(e.baseUrl))nt(`${e.baseUrl}webr-worker.js`,n=>t(n));else{let n=new Worker(`${e.baseUrl}webr-worker.js`);t(n)}({resolve:this.resolve,promise:this.initialised}=le())}interrupt(){if(!i(this,be))throw new D("Failed attempt to interrupt before initialising interruptBuffer");this.inputQueue.reset(),i(this,be)[0]=1}};be=new WeakMap,St=new WeakSet,mn=function(e){x?e.on("message",t=>{i(this,Ue).call(this,e,t)}):e.onmessage=t=>i(this,Ue).call(this,e,t.data)},Ue=new WeakMap;Y(wt());x&&(globalThis.Worker=H("worker_threads").Worker);var we,ne,xe,kt,gn,Dt,bn,Wt,wn,Be,Ne=class extends fe{constructor(e){super(),u(this,kt),u(this,Dt),u(this,Wt),this.close=()=>{},u(this,we,new Map),u(this,ne,void 0),u(this,xe,!1),u(this,Be,async(n,r)=>{if(!(!r||!r.type))switch(r.type){case"resolve":this.resolve();return;case"response":this.resolveResponse(r);return;case"system":this.systemQueue.put(r.data);return;default:this.outputQueue.put(r);return;case"sync-request":{let T=r.data;i(this,we).set(T.data.uuid,T.data.msg);return}case"request":throw new D("Can't send messages of type 'request' from a worker.Use service worker fetch request instead.")}});let t=n=>{v(this,Wt,wn).call(this,n),this.close=()=>{n.terminate(),this.putClosedMessage()},v(this,kt,gn).call(this,`${e.serviceWorkerUrl}webr-serviceworker.js`).then(r=>{let T={type:"init",data:{config:e,channelType:V.ServiceWorker,clientId:r,location:window.location.href}};n.postMessage(T)})};if(ce(e.serviceWorkerUrl))nt(`${e.serviceWorkerUrl}webr-worker.js`,n=>t(n));else{let n=new Worker(`${e.serviceWorkerUrl}webr-worker.js`);t(n)}({resolve:this.resolve,promise:this.initialised}=le())}activeRegistration(){var e;if(!((e=i(this,ne))!=null&&e.active))throw new D("Attempted to obtain a non-existent active registration.");return i(this,ne).active}interrupt(){h(this,xe,!0)}};we=new WeakMap,ne=new WeakMap,xe=new WeakMap,kt=new WeakSet,gn=async function(e){h(this,ne,await navigator.serviceWorker.register(e)),await navigator.serviceWorker.ready,window.addEventListener("beforeunload",()=>{var n;(n=i(this,ne))==null||n.unregister()});let t=await new Promise(n=>{navigator.serviceWorker.addEventListener("message",function r(T){T.data.type==="registration-successful"&&(navigator.serviceWorker.removeEventListener("message",r),n(T.data.clientId))}),this.activeRegistration().postMessage({type:"register-client-main"})});return navigator.serviceWorker.addEventListener("message",n=>{v(this,Dt,bn).call(this,n)}),t},Dt=new WeakSet,bn=async function(e){if(e.data.type==="request"){let t=e.data.data,n=i(this,we).get(t);if(!n)throw new D("Request not found during service worker XHR request");switch(i(this,we).delete(t),n.type){case"read":{let r=await this.inputQueue.get();this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:t,response:gr(t,r)});break}case"interrupt":{let r=i(this,xe);this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:t,response:gr(t,r)}),this.inputQueue.reset(),h(this,xe,!1);break}default:throw new D(`Unsupported request type '${n.type}'.`)}return}},Wt=new WeakSet,wn=function(e){x?e.on("message",t=>{i(this,Be).call(this,e,t)}):e.onmessage=t=>i(this,Be).call(this,e,t.data)},Be=new WeakMap;var V={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2};function xn(e){switch(e.channelType){case V.SharedArrayBuffer:return new Ie(e);case V.ServiceWorker:return new Ne(e);case V.Automatic:default:if(typeof SharedArrayBuffer<"u")return new Ie(e);if("serviceWorker"in navigator&&!ce(e.serviceWorkerUrl))return new Ne(e);throw new D("Can't initialise main thread communication channel")}}var En=x?__dirname+"/":"https://webr.r-wasm.org/v0.2.0/",vn="https://repo.r-wasm.org";function g(e){return e&&(typeof e=="object"||typeof e=="function")&&"payloadType"in e&&Tt(e._payload)}function Tn(e){var t;return!!(g(e)&&(t=e._payload.obj.methods)!=null&&t.includes("exec"))}var f={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function vr(e){return e&&typeof e=="object"&&Object.keys(f).includes(e.type)}function Tr(e){return e&&typeof e=="object"&&"re"in e&&"im"in e}function Mt(e){return l._Rf_protect(L(e)),e}function S(e,t){return l._Rf_protect(L(e)),++t.n,e}function Pn(e){let t=l._malloc(4);return l._R_ProtectWithIndex(L(e),t),{loc:l.getValue(t,"i32"),ptr:t}}function _n(e){l._Rf_unprotect(1),l._free(e.ptr)}function Sn(e,t){return l._R_Reprotect(L(e),t.loc),e}function W(e){l._Rf_unprotect(e)}function Pr(e,t,n){l._Rf_defineVar(L(t),L(n),L(e))}function kn(e,t){let n={},r={n:0};try{let T=new ze(t);S(T,r),n.code=l.allocateUTF8(e);let p=l._R_ParseEvalString(n.code,T.ptr);return y.wrap(p)}finally{Rn(n),W(r.n)}}function He(e,t){return l.getWasmTableEntry(l.GOT.ffi_safe_eval.value)(L(e),L(t))}function L(e){return Ls(e)?e.ptr:e}function ae(e,t){if(l._TYPEOF(e.ptr)!==f[t])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${t}"`)}function Ns(e){if(vr(e))return new(Dn(f[e.type]))(e);if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new Ct;if(e===null)return new oe({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new oe(e);if(typeof e=="number")return new Xe(e);if(typeof e=="string")return new G(e);if(Tr(e))return new Ge(e);if(Array.isArray(e))return Bs(e);throw new Error("Robj construction for this JS object is not yet supported")}function Bs(e){let t={n:0};try{let n=new ie([new $("c"),...e]);return S(n,t),n.eval()}finally{W(t.n)}}var E=class{constructor(e){this.ptr=e}type(){let e=l._TYPEOF(this.ptr);return Object.keys(f).find(t=>f[t]===e)}},Te,Ot,se=class extends E{constructor(e){if(!(e instanceof E))return Ns(e);super(e.ptr),u(this,Te)}static wrap(e){let t=l._TYPEOF(e);return new(Dn(t))(new E(e))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(e){return k[e]}getPropertyValue(e){return this[e]}inspect(){kn(".Internal(inspect(x))",{x:this})}isNull(){return l._TYPEOF(this.ptr)===f.null}isUnbound(){return this.ptr===k.unboundValue.ptr}attrs(){return Pe.wrap(l._ATTRIB(this.ptr))}setNames(e){let t;if(e===null)t=k.null;else if(Array.isArray(e)&&e.every(n=>typeof n=="string"||n===null))t=new G(e);else throw new Error("Argument to setNames must be null or an Array of strings or null");return l._Rf_setAttrib(this.ptr,k.namesSymbol.ptr,t.ptr),this}names(){let e=G.wrap(l._Rf_getAttrib(this.ptr,k.namesSymbol.ptr));return e.isNull()?null:e.toArray()}includes(e){let t=this.names();return t&&t.includes(e)}toJs(e={depth:0},t=1){throw new Error("This R object cannot be converted to JS")}subset(e){return v(this,Te,Ot).call(this,e,k.bracketSymbol.ptr)}get(e){return v(this,Te,Ot).call(this,e,k.bracket2Symbol.ptr)}getDollar(e){return v(this,Te,Ot).call(this,e,k.dollarSymbol.ptr)}pluck(...e){let t=Pn(k.null);try{let n=(T,p)=>{let s=T.get(p);return Sn(s,t)},r=e.reduce(n,this);return r.isNull()?void 0:r}finally{_n(t)}}set(e,t){let n={n:0};try{let r=new se(e);S(r,n);let T=new se(t);S(T,n);let p=new $("[[<-"),s=l._Rf_lang4(p.ptr,this.ptr,r.ptr,T.ptr);return S(s,n),se.wrap(He(s,k.baseEnv))}finally{W(n.n)}}static getMethods(e){let t=new Set,n=e;do Object.getOwnPropertyNames(n).map(r=>t.add(r));while(n=Object.getPrototypeOf(n));return[...t.keys()].filter(r=>typeof e[r]=="function")}},y=se;Te=new WeakSet,Ot=function(e,t){let n={n:0};try{let r=new se(e);S(r,n);let T=l._Rf_lang3(t,this.ptr,r.ptr);return S(T,n),se.wrap(He(T,k.baseEnv))}finally{W(n.n)}};var Ct=class extends y{constructor(){return super(new E(l.getValue(l._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},$=class extends y{constructor(e){if(e instanceof E){ae(e,"symbol"),super(e);return}let t=l.allocateUTF8(e);try{super(new E(l._Rf_install(t)))}finally{l._free(t)}}toJs(){let e=this.toObject();return{type:"symbol",printname:e.printname,symvalue:e.symvalue,internal:e.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return $e.wrap(l._PRINTNAME(this.ptr))}symvalue(){return y.wrap(l._SYMVALUE(this.ptr))}internal(){return y.wrap(l._INTERNAL(this.ptr))}},Pe=class extends y{constructor(e){if(e instanceof E)return ae(e,"pairlist"),super(e),this;let t={n:0};try{let{names:n,values:r}=Ke(e),T=Pe.wrap(l._Rf_allocList(r.length));S(T,t);for(let[p,s]=[0,T];!s.isNull();[p,s]=[p+1,s.cdr()])s.setcar(new y(r[p]));T.setNames(n),super(T)}finally{W(t.n)}}get length(){return this.toArray().length}toArray(e={depth:1}){return this.toJs(e).values}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1,depth:n=1}={}){let r=this.entries({depth:n}),T=r.map(([p,s])=>p);if(!e&&new Set(T).size!==T.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&T.some(p=>!p))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(r.filter((p,s)=>r.findIndex(_=>_[0]===p[0])===s))}entries(e={depth:1}){let t=this.toJs(e);return t.values.map((n,r)=>[t.names?t.names[r]:null,n])}toJs(e={depth:0},t=1){let n=[],r=!1,T=[];for(let p=this;!p.isNull();p=p.cdr()){let s=p.tag();s.isNull()?n.push(""):(r=!0,n.push(s.toString())),e.depth&&t>=e.depth?T.push(p.car()):T.push(p.car().toJs(e,t+1))}return{type:"pairlist",names:r?n:null,values:T}}includes(e){return e in this.toObject()}setcar(e){l._SETCAR(this.ptr,e.ptr)}car(){return y.wrap(l._CAR(this.ptr))}cdr(){return y.wrap(l._CDR(this.ptr))}tag(){return y.wrap(l._TAG(this.ptr))}},ie=class extends y{constructor(e){if(e instanceof E)return ae(e,"call"),super(e),this;let t={n:0};try{let{values:n}=Ke(e),r=n.map(p=>S(new y(p),t)),T=ie.wrap(l._Rf_allocVector(f.call,n.length));S(T,t);for(let[p,s]=[0,T];!s.isNull();[p,s]=[p+1,s.cdr()])s.setcar(r[p]);super(T)}finally{W(t.n)}}setcar(e){l._SETCAR(this.ptr,e.ptr)}car(){return y.wrap(l._CAR(this.ptr))}cdr(){return y.wrap(l._CDR(this.ptr))}eval(){return y.wrap(He(this.ptr,k.baseEnv))}},_r=class extends y{constructor(e){if(e instanceof E)return ae(e,"list"),super(e),this;let t={n:0};try{let{names:n,values:r}=Ke(e),T=l._Rf_allocVector(f.list,r.length);S(T,t),r.forEach((p,s)=>{l._SET_VECTOR_ELT(T,s,new y(p).ptr)}),y.wrap(T).setNames(n),super(new E(T))}finally{W(t.n)}}get length(){return l._LENGTH(this.ptr)}toArray(e={depth:1}){return this.toJs(e).values}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1,depth:n=1}={}){let r=this.entries({depth:n}),T=r.map(([p,s])=>p);if(!e&&new Set(T).size!==T.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&T.some(p=>!p))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(r.filter((p,s)=>r.findIndex(_=>_[0]===p[0])===s))}entries(e={depth:1}){let t=this.toJs(e);return t.values.map((n,r)=>[t.names?t.names[r]:null,n])}toJs(e={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>e.depth&&t>=e.depth?this.get(n+1):this.get(n+1).toJs(e,t+1))}}},ve=class extends y{exec(...e){let t={n:0};try{let n=new ie([this,...e]);return S(n,t),n.eval()}finally{W(t.n)}}},$e=class extends y{constructor(e){if(e instanceof E){ae(e,"string"),super(e);return}let t=l.allocateUTF8(e);try{super(new E(l._Rf_mkChar(t)))}finally{l._free(t)}}toString(){return l.UTF8ToString(l._R_CHAR(this.ptr))}toJs(){return{type:"string",value:this.toString()}}},ze=class extends y{constructor(e={}){if(e instanceof E)return ae(e,"environment"),super(e),this;let t=0;try{let{names:n,values:r}=Ke(e),T=Mt(l._R_NewEnv(k.globalEnv.ptr,0,0));++t,r.forEach((p,s)=>{let _=n?n[s]:null;if(!_)throw new Error("Can't create object in new environment with empty symbol name");let U=new $(_),q=Mt(new y(p));try{Pr(T,U,q)}finally{W(1)}}),super(new E(T))}finally{W(t)}}ls(e=!1,t=!0){return G.wrap(l._R_lsInternal3(this.ptr,Number(e),Number(t))).toArray()}bind(e,t){let n=new $(e),r=Mt(new y(t));try{Pr(this,n,r)}finally{W(1)}}names(){return this.ls(!0,!0)}frame(){return y.wrap(l._FRAME(this.ptr))}subset(e){if(typeof e=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(e)}toObject({depth:e=0}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(n=>[t[n],this.getDollar(t[n]).toJs({depth:e})]))}toJs(e={depth:0},t=1){let n=this.names(),r=[...Array(n.length).keys()].map(T=>e.depth&&t>=e.depth?this.getDollar(n[T]):this.getDollar(n[T]).toJs(e,t+1));return{type:"environment",names:n,values:r}}},K=class extends y{constructor(e,t,n){if(e instanceof E)return ae(e,t),super(e),this;let r={n:0};try{let{names:T,values:p}=Ke(e),s=l._Rf_allocVector(f[t],p.length);S(s,r),p.forEach(n(s)),y.wrap(s).setNames(T),super(new E(s))}finally{W(r.n)}}get length(){return l._LENGTH(this.ptr)}get(e){return super.get(e)}subset(e){return super.subset(e)}getDollar(e){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let e={n:0};try{let t=l._Rf_lang2(new $("is.na").ptr,this.ptr);S(t,e);let n=oe.wrap(He(t,k.baseEnv));S(n,e);let r=n.toTypedArray();return Array.from(r).map(T=>!!T)}finally{W(e.n)}}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:e[n])}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1}={}){let n=this.entries(),r=n.map(([T,p])=>T);if(!e&&new Set(r).size!==r.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&r.some(T=>!T))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((T,p)=>n.findIndex(s=>s[0]===T[0])===p))}entries(){let e=this.toArray(),t=this.names();return e.map((n,r)=>[t?t[r]:null,n])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},jt,Sr=class extends K{constructor(e){super(e,"logical",i(Sr,jt))}getBoolean(e){return this.get(e).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getBoolean(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return e}toTypedArray(){return new Int32Array(l.HEAP32.subarray(l._LOGICAL(this.ptr)/4,l._LOGICAL(this.ptr)/4+this.length))}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:!!e[n])}},oe=Sr;jt=new WeakMap,u(oe,jt,e=>{let t=l._LOGICAL(e),n=l.getValue(l._R_NaInt,"i32");return(r,T)=>{l.setValue(t+4*T,r===null?n:!!r,"i32")}});var Nt,kr=class extends K{constructor(e){super(e,"integer",i(kr,Nt))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Int32Array(l.HEAP32.subarray(l._INTEGER(this.ptr)/4,l._INTEGER(this.ptr)/4+this.length))}},It=kr;Nt=new WeakMap,u(It,Nt,e=>{let t=l._INTEGER(e),n=l.getValue(l._R_NaInt,"i32");return(r,T)=>{l.setValue(t+4*T,r===null?n:Math.round(Number(r)),"i32")}});var Bt,Dr=class extends K{constructor(e){super(e,"double",i(Dr,Bt))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Float64Array(l.HEAPF64.subarray(l._REAL(this.ptr)/8,l._REAL(this.ptr)/8+this.length))}},Xe=Dr;Bt=new WeakMap,u(Xe,Bt,e=>{let t=l._REAL(e),n=l.getValue(l._R_NaReal,"double");return(r,T)=>{l.setValue(t+8*T,r===null?n:r,"double")}});var Lt,Wr=class extends K{constructor(e){super(e,"complex",i(Wr,Lt))}getComplex(e){return this.get(e).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getComplex(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS object");return e}toTypedArray(){return new Float64Array(l.HEAPF64.subarray(l._COMPLEX(this.ptr)/8,l._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:{re:e[2*n],im:e[2*n+1]})}},Ge=Wr;Lt=new WeakMap,u(Ge,Lt,e=>{let t=l._COMPLEX(e),n=l.getValue(l._R_NaReal,"double");return(r,T)=>{l.setValue(t+8*(2*T),r===null?n:r.re,"double"),l.setValue(t+8*(2*T+1),r===null?n:r.im,"double")}});var Ft,Ar=class extends K{constructor(e){super(e,"character",i(Ar,Ft))}getString(e){return this.get(e).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getString(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS string");return e}toTypedArray(){return new Uint32Array(l.HEAPU32.subarray(l._STRING_PTR(this.ptr)/4,l._STRING_PTR(this.ptr)/4+this.length))}toArray(){return this.detectMissing().map((e,t)=>e?null:l.UTF8ToString(l._R_CHAR(l._STRING_ELT(this.ptr,t))))}},G=Ar;Ft=new WeakMap,u(G,Ft,e=>(t,n)=>{t===null?l._SET_STRING_ELT(e,n,k.naString.ptr):l._SET_STRING_ELT(e,n,new $e(t).ptr)});var qt,Mr=class extends K{constructor(e){super(e,"raw",i(Mr,qt))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(e===null)throw new Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Uint8Array(l.HEAPU8.subarray(l._RAW(this.ptr),l._RAW(this.ptr)+this.length))}},Ut=Mr;qt=new WeakMap,u(Ut,qt,e=>{let t=l._RAW(e);return(n,r)=>{l.setValue(t+r,Number(n),"i8")}});function Ke(e){return vr(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!Tr(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function Dn(e){let t={[f.null]:Ct,[f.symbol]:$,[f.pairlist]:Pe,[f.closure]:ve,[f.environment]:ze,[f.call]:ie,[f.special]:ve,[f.builtin]:ve,[f.string]:$e,[f.logical]:oe,[f.integer]:It,[f.double]:Xe,[f.complex]:Ge,[f.character]:G,[f.list]:_r,[f.raw]:Ut,[f.function]:ve};return e in t?t[e]:y}function Ls(e){return e instanceof y}var k;function qs(){}function Vs(e,t){return async function*(){let n={type:"callRObjectMethod",data:{payload:t._payload,prop:"getPropertyValue",args:[{payloadType:"raw",obj:"length"}],shelter:void 0}},r=await e.request(n);if(typeof r.obj!="number")throw new M("Cannot iterate over object, unexpected type for length property.");for(let T=1;T<=r.obj;T++)yield t.get(T)}}function Wn(e,t,n){return async(...r)=>{let T=r.map(_=>g(_)?_._payload:{obj:I(_,g,U=>U._payload),payloadType:"raw"}),p={type:"callRObjectMethod",data:{payload:n,prop:t,args:T}},s=await e.request(p);switch(s.payloadType){case"ptr":return Q(e,s);case"raw":return I(s,Tt,(_,U)=>Q(U,_),e).obj}}}async function Js(e,t,n,r){let T={type:"newRObject",data:{objType:t,obj:I(r,g,s=>s._payload),shelter:n}},p=await e.request(T);switch(p.payloadType){case"raw":throw new z("Unexpected raw payload type returned from newRObject");case"ptr":return Q(e,p)}}function Q(e,t){var n;let r=new Proxy((n=t.obj.methods)!=null&&n.includes("exec")?Object.assign(qs,{...t}):t,{get:(T,p)=>{var s;if(p==="_payload")return t;if(p===Symbol.asyncIterator)return Vs(e,r);if((s=t.obj.methods)!=null&&s.includes(p.toString()))return Wn(e,p.toString(),t)},apply:async(T,p,s)=>{let _=await Q(e,t).exec(...s);return Tn(_)?_:_.toJs()}});return r}function A(e,t,n){return new Proxy(y,{construct:(r,T)=>Js(e,n,t,...T),get:(r,T)=>Wn(e,T.toString())})}var Qe,Ze,Ye,et,Vt,Jt,Ht,zt,Xt,An,Or=class{constructor(e={},t={REnv:{R_HOME:"/usr/lib/R",FONTCONFIG_PATH:"/etc/fonts",R_ENABLE_JIT:"0"}}){u(this,Xt),u(this,Qe,void 0),u(this,Ze,void 0),u(this,Ye,void 0),u(this,et,void 0),u(this,Vt,n=>{console.log(n)}),u(this,Jt,n=>{console.error(n)}),u(this,Ht,n=>{let r=prompt(n);r&&this.stdin(`${r}
`)}),u(this,zt,n=>{if(x)throw new Error("Plotting with HTML canvas is not yet supported under Node");this.canvas.getContext("2d").drawImage(n,0,0)}),this.webR=new Gt(t),x||(this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width","1008"),this.canvas.setAttribute("height","1008")),h(this,Qe,e.stdout||i(this,Vt)),h(this,Ze,e.stderr||i(this,Jt)),h(this,Ye,e.prompt||i(this,Ht)),h(this,et,e.canvasImage||i(this,zt)),this.webR.evalRVoid("options(device=webr::canvas)")}stdin(e){this.webR.writeConsole(e)}interrupt(){this.webR.interrupt()}run(){v(this,Xt,An).call(this)}};Qe=new WeakMap,Ze=new WeakMap,Ye=new WeakMap,et=new WeakMap,Vt=new WeakMap,Jt=new WeakMap,Ht=new WeakMap,zt=new WeakMap,Xt=new WeakSet,An=async function(){for(;;){let e=await this.webR.read();switch(e.type){case"stdout":i(this,Qe).call(this,e.data);break;case"stderr":i(this,Ze).call(this,e.data);break;case"prompt":i(this,Ye).call(this,e.data);break;case"canvasImage":i(this,et).call(this,e.data.image);break;case"closed":return;default:console.warn(`Unhandled output type for webR Console: ${e.type}.`)}}};var Hs={FONTCONFIG_PATH:"/etc/fonts",R_HOME:"/usr/lib/R",R_ENABLE_JIT:"0"},Mn={RArgs:[],REnv:Hs,baseUrl:En,serviceWorkerUrl:"",repoUrl:vn,homedir:"/home/web_user",interactive:!0,channelType:V.Automatic,createLazyFilesystem:!0},b,Kt,On,Gt=class{constructor(e={}){u(this,Kt),u(this,b,void 0),this.FS={lookupPath:async n=>{let r={type:"lookupPath",data:{path:n}};return(await i(this,b).request(r)).obj},mkdir:async n=>{let r={type:"mkdir",data:{path:n}};return(await i(this,b).request(r)).obj},readFile:async(n,r)=>{let T={type:"readFile",data:{path:n,flags:r}};return(await i(this,b).request(T)).obj},rmdir:async n=>{let r={type:"rmdir",data:{path:n}};await i(this,b).request(r)},writeFile:async(n,r,T)=>{let p={type:"writeFile",data:{path:n,data:r,flags:T}};await i(this,b).request(p)},unlink:async n=>{let r={type:"unlink",data:{path:n}};await i(this,b).request(r)}};let t={...Mn,...e,REnv:{...Mn.REnv,...e.REnv}};h(this,b,xn(t)),this.objs={},this.Shelter=zs(i(this,b))}async init(){let e=await i(this,b).initialised;return this.globalShelter=await new this.Shelter,this.RObject=this.globalShelter.RObject,this.RLogical=this.globalShelter.RLogical,this.RInteger=this.globalShelter.RInteger,this.RDouble=this.globalShelter.RDouble,this.RComplex=this.globalShelter.RComplex,this.RCharacter=this.globalShelter.RCharacter,this.RRaw=this.globalShelter.RRaw,this.RList=this.globalShelter.RList,this.RPairlist=this.globalShelter.RPairlist,this.REnvironment=this.globalShelter.REnvironment,this.RSymbol=this.globalShelter.RSymbol,this.RString=this.globalShelter.RString,this.RCall=this.globalShelter.RCall,this.objs={baseEnv:await this.RObject.getPersistentObject("baseEnv"),globalEnv:await this.RObject.getPersistentObject("globalEnv"),null:await this.RObject.getPersistentObject("null"),true:await this.RObject.getPersistentObject("true"),false:await this.RObject.getPersistentObject("false"),na:await this.RObject.getPersistentObject("na")},v(this,Kt,On).call(this),e}close(){i(this,b).close()}async read(){return await i(this,b).read()}async flush(){return await i(this,b).flush()}write(e){i(this,b).write(e)}writeConsole(e){this.write({type:"stdin",data:e+`
`})}interrupt(){i(this,b).interrupt()}async installPackages(e,t=!1){for(let n of e){let r={type:"installPackage",data:{name:n,quiet:t}};await i(this,b).request(r)}}async destroy(e){await this.globalShelter.destroy(e)}async evalR(e,t){return this.globalShelter.evalR(e,t)}async evalRVoid(e,t){return this.evalRRaw(e,"void",t)}async evalRBoolean(e,t){return this.evalRRaw(e,"boolean",t)}async evalRNumber(e,t){return this.evalRRaw(e,"number",t)}async evalRString(e,t){return this.evalRRaw(e,"string",t)}async evalRRaw(e,t,n={}){let r=I(n,g,s=>s._payload),T={type:"evalRRaw",data:{code:e,options:r,outputType:t}},p=await i(this,b).request(T);switch(p.payloadType){case"raw":return p.obj;case"ptr":throw new z("Unexpected ptr payload type returned from evalRVoid")}}async invokeWasmFunction(e,...t){let n={type:"invokeWasmFunction",data:{ptr:e,args:t}};return(await i(this,b).request(n)).obj}};b=new WeakMap,Kt=new WeakSet,On=async function(){for(;;){let e=await i(this,b).readSystem();switch(e.type){case"setTimeoutWasm":setTimeout((t,n)=>{this.invokeWasmFunction(t,...n)},e.data.delay,e.data.ptr,e.data.args);break;case"console.log":console.log(e.data);break;case"console.warn":console.warn(e.data);break;case"console.error":console.error(e.data);break;default:throw new M("Unknown system message type `"+e.type+"`")}}};var m,R,tt,$t=class{constructor(e){u(this,m,""),u(this,R,void 0),u(this,tt,!1),h(this,R,e)}async init(){if(i(this,tt))return;let e={type:"newShelter"},t=await i(this,R).request(e);h(this,m,t.obj),this.RObject=A(i(this,R),i(this,m),"object"),this.RLogical=A(i(this,R),i(this,m),"logical"),this.RInteger=A(i(this,R),i(this,m),"integer"),this.RDouble=A(i(this,R),i(this,m),"double"),this.RComplex=A(i(this,R),i(this,m),"complex"),this.RCharacter=A(i(this,R),i(this,m),"character"),this.RRaw=A(i(this,R),i(this,m),"raw"),this.RList=A(i(this,R),i(this,m),"list"),this.RPairlist=A(i(this,R),i(this,m),"pairlist"),this.REnvironment=A(i(this,R),i(this,m),"environment"),this.RSymbol=A(i(this,R),i(this,m),"symbol"),this.RString=A(i(this,R),i(this,m),"string"),this.RCall=A(i(this,R),i(this,m),"call"),h(this,tt,!0)}async purge(){let e={type:"shelterPurge",data:i(this,m)};await i(this,R).request(e)}async destroy(e){let t={type:"shelterDestroy",data:{id:i(this,m),obj:e._payload}};await i(this,R).request(t)}async size(){let e={type:"shelterSize",data:i(this,m)};return(await i(this,R).request(e)).obj}async evalR(e,t={}){let n=I(t,g,p=>p._payload),r={type:"evalR",data:{code:e,options:n,shelter:i(this,m)}},T=await i(this,R).request(r);switch(T.payloadType){case"raw":throw new z("Unexpected payload type returned from evalR");default:return Q(i(this,R),T)}}async captureR(e,t={}){let n=I(t,g,p=>p._payload),r={type:"captureR",data:{code:e,options:n,shelter:i(this,m)}},T=await i(this,R).request(r);switch(T.payloadType){case"ptr":throw new z("Unexpected payload type returned from evalR");case"raw":{let p=T.obj,s=Q(i(this,R),p.result),_=p.output;for(let U=0;U<_.length;++U)_[U].type!=="stdout"&&_[U].type!=="stderr"&&(_[U].data=Q(i(this,R),_[U].data));return{result:s,output:_}}}}};m=new WeakMap,R=new WeakMap,tt=new WeakMap;function zs(e){return new Proxy($t,{construct:async()=>{let t=new $t(e);return await t.init(),t}})}var dist={},variants={},esmHelpers={};Object.defineProperty(esmHelpers,"__esModule",{value:!0});esmHelpers.unwrapJavascript=esmHelpers.unwrapTypescript=void 0;function fakeUnwrapDefault(e){return e}function actualUnwrapDefault(e){return e.default??e}esmHelpers.unwrapTypescript=actualUnwrapDefault;esmHelpers.unwrapJavascript=fakeUnwrapDefault;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RELEASE_ASYNC=e.DEBUG_ASYNC=e.RELEASE_SYNC=e.DEBUG_SYNC=e.memoizePromiseFactory=e.newQuickJSAsyncWASMModule=e.newQuickJSWASMModule=void 0;const t=esmHelpers;async function n(p=e.RELEASE_SYNC){const[s,_,{QuickJSWASMModule:U}]=await Promise.all([p.importModuleLoader(),p.importFFI(),__vitePreload(()=>import("./module.d9056793.js").then(ge=>ge.m),["./module.d9056793.js","./types-ffi.352b01f9.js"],import.meta.url).then(t.unwrapTypescript)]),q=await s();q.type="sync";const Z=new _(q);return new U(q,Z)}e.newQuickJSWASMModule=n;async function r(p=e.RELEASE_ASYNC){const[s,_,{QuickJSAsyncWASMModule:U}]=await Promise.all([p.importModuleLoader(),p.importFFI(),__vitePreload(()=>import("./module-asyncify.f5a35be7.js").then(ge=>ge.m),["./module-asyncify.f5a35be7.js","./module.d9056793.js","./types-ffi.352b01f9.js"],import.meta.url).then(t.unwrapTypescript)]),q=await s();q.type="async";const Z=new _(q);return new U(q,Z)}e.newQuickJSAsyncWASMModule=r;function T(p){let s;return()=>s??(s=p())}e.memoizePromiseFactory=T,e.DEBUG_SYNC={type:"sync",async importFFI(){const p=await __vitePreload(()=>import("./ffi.WASM_DEBUG_SYNC.39aa5384.js").then(s=>s.f),[],import.meta.url);return(0,t.unwrapTypescript)(p).QuickJSFFI},async importModuleLoader(){const p=await __vitePreload(()=>import("./emscripten-module.WASM_DEBUG_SYNC.294c619f.js").then(s=>s.e),["./emscripten-module.WASM_DEBUG_SYNC.294c619f.js","./entry.85fce134.js","./entry.6890bb10.css","./_commonjs-dynamic-modules.302442b1.js"],import.meta.url);return(0,t.unwrapJavascript)(p).default}},e.RELEASE_SYNC={type:"sync",async importFFI(){const p=await __vitePreload(()=>import("./ffi.WASM_RELEASE_SYNC.5d6c3bd0.js").then(s=>s.f),[],import.meta.url);return(0,t.unwrapTypescript)(p).QuickJSFFI},async importModuleLoader(){const p=await __vitePreload(()=>import("./emscripten-module.WASM_RELEASE_SYNC.933d0819.js").then(s=>s.e),["./emscripten-module.WASM_RELEASE_SYNC.933d0819.js","./entry.85fce134.js","./entry.6890bb10.css"],import.meta.url);return(0,t.unwrapJavascript)(p).default}},e.DEBUG_ASYNC={type:"async",async importFFI(){const p=await __vitePreload(()=>import("./ffi.WASM_DEBUG_ASYNCIFY.b502b394.js").then(s=>s.f),["./ffi.WASM_DEBUG_ASYNCIFY.b502b394.js","./types-ffi.352b01f9.js"],import.meta.url);return(0,t.unwrapTypescript)(p).QuickJSAsyncFFI},async importModuleLoader(){const p=await __vitePreload(()=>import("./emscripten-module.WASM_DEBUG_ASYNCIFY.113414b7.js").then(s=>s.e),["./emscripten-module.WASM_DEBUG_ASYNCIFY.113414b7.js","./entry.85fce134.js","./entry.6890bb10.css","./_commonjs-dynamic-modules.302442b1.js"],import.meta.url);return(0,t.unwrapJavascript)(p).default}},e.RELEASE_ASYNC={type:"async",async importFFI(){const p=await __vitePreload(()=>import("./ffi.WASM_RELEASE_ASYNCIFY.26854089.js").then(s=>s.f),["./ffi.WASM_RELEASE_ASYNCIFY.26854089.js","./types-ffi.352b01f9.js"],import.meta.url);return(0,t.unwrapTypescript)(p).QuickJSAsyncFFI},async importModuleLoader(){const p=await __vitePreload(()=>import("./emscripten-module.WASM_RELEASE_ASYNCIFY.bed98b7a.js").then(s=>s.e),["./emscripten-module.WASM_RELEASE_ASYNCIFY.bed98b7a.js","./entry.85fce134.js","./entry.6890bb10.css"],import.meta.url);return(0,t.unwrapJavascript)(p).default}}})(variants);var vmInterface={};Object.defineProperty(vmInterface,"__esModule",{value:!0});vmInterface.isFail=vmInterface.isSuccess=void 0;function isSuccess(e){return!("error"in e)}vmInterface.isSuccess=isSuccess;function isFail(e){return"error"in e}vmInterface.isFail=isFail;var lifetime={},asyncifyHelpers={};Object.defineProperty(asyncifyHelpers,"__esModule",{value:!0});asyncifyHelpers.awaitEachYieldedPromise=asyncifyHelpers.maybeAsync=asyncifyHelpers.maybeAsyncFn=void 0;function*awaitYield(e){return yield e}function awaitYieldOf(e){return awaitYield(awaitEachYieldedPromise(e))}const AwaitYield=awaitYield;AwaitYield.of=awaitYieldOf;function maybeAsyncFn(e,t){return(...n)=>{const r=t.call(e,AwaitYield,...n);return awaitEachYieldedPromise(r)}}asyncifyHelpers.maybeAsyncFn=maybeAsyncFn;function maybeAsync(e,t){const n=t.call(e,AwaitYield);return awaitEachYieldedPromise(n)}asyncifyHelpers.maybeAsync=maybeAsync;function awaitEachYieldedPromise(e){function t(n){return n.done?n.value:n.value instanceof Promise?n.value.then(r=>t(e.next(r)),r=>t(e.throw(r))):t(e.next(n.value))}return t(e.next())}asyncifyHelpers.awaitEachYieldedPromise=awaitEachYieldedPromise;var debug={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.debugLog=e.QTS_DEBUG=void 0,e.QTS_DEBUG=!!(typeof process=="object"&&{}.QTS_DEBUG),e.debugLog=e.QTS_DEBUG?console.log.bind(console):()=>{}})(debug);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.QuickJSMemoryLeakDetected=errors.QuickJSAsyncifySuspended=errors.QuickJSAsyncifyError=errors.QuickJSNotImplemented=errors.QuickJSUseAfterFree=errors.QuickJSWrongOwner=errors.QuickJSUnwrapError=void 0;class QuickJSUnwrapError extends Error{constructor(t,n){super(String(t)),this.cause=t,this.context=n,this.name="QuickJSUnwrapError"}}errors.QuickJSUnwrapError=QuickJSUnwrapError;class QuickJSWrongOwner extends Error{constructor(){super(...arguments),this.name="QuickJSWrongOwner"}}errors.QuickJSWrongOwner=QuickJSWrongOwner;class QuickJSUseAfterFree extends Error{constructor(){super(...arguments),this.name="QuickJSUseAfterFree"}}errors.QuickJSUseAfterFree=QuickJSUseAfterFree;class QuickJSNotImplemented extends Error{constructor(){super(...arguments),this.name="QuickJSNotImplemented"}}errors.QuickJSNotImplemented=QuickJSNotImplemented;class QuickJSAsyncifyError extends Error{constructor(){super(...arguments),this.name="QuickJSAsyncifyError"}}errors.QuickJSAsyncifyError=QuickJSAsyncifyError;class QuickJSAsyncifySuspended extends Error{constructor(){super(...arguments),this.name="QuickJSAsyncifySuspended"}}errors.QuickJSAsyncifySuspended=QuickJSAsyncifySuspended;class QuickJSMemoryLeakDetected extends Error{constructor(){super(...arguments),this.name="QuickJSMemoryLeakDetected"}}errors.QuickJSMemoryLeakDetected=QuickJSMemoryLeakDetected;Object.defineProperty(lifetime,"__esModule",{value:!0});lifetime.Scope=lifetime.WeakLifetime=lifetime.StaticLifetime=lifetime.Lifetime=void 0;const asyncify_helpers_1=asyncifyHelpers,debug_1=debug,errors_1$1=errors;class Lifetime{constructor(t,n,r,T){this._value=t,this.copier=n,this.disposer=r,this._owner=T,this._alive=!0,this._constructorStack=debug_1.QTS_DEBUG?new Error("Lifetime constructed").stack:void 0}get alive(){return this._alive}get value(){return this.assertAlive(),this._value}get owner(){return this._owner}get dupable(){return!!this.copier}dup(){if(this.assertAlive(),!this.copier)throw new Error("Non-dupable lifetime");return new Lifetime(this.copier(this._value),this.copier,this.disposer,this._owner)}consume(t){this.assertAlive();const n=t(this);return this.dispose(),n}dispose(){this.assertAlive(),this.disposer&&this.disposer(this._value),this._alive=!1}assertAlive(){if(!this.alive)throw this._constructorStack?new errors_1$1.QuickJSUseAfterFree(`Lifetime not alive
${this._constructorStack}
Lifetime used`):new errors_1$1.QuickJSUseAfterFree("Lifetime not alive")}}lifetime.Lifetime=Lifetime;class StaticLifetime extends Lifetime{constructor(t,n){super(t,void 0,void 0,n)}get dupable(){return!0}dup(){return this}dispose(){}}lifetime.StaticLifetime=StaticLifetime;class WeakLifetime extends Lifetime{constructor(t,n,r,T){super(t,n,r,T)}dispose(){this._alive=!1}}lifetime.WeakLifetime=WeakLifetime;function scopeFinally(e,t){let n;try{e.dispose()}catch(r){n=r}if(t&&n)throw Object.assign(t,{message:`${t.message}
 Then, failed to dispose scope: ${n.message}`,disposeError:n}),t;if(t||n)throw t||n}class Scope{constructor(){this._disposables=new Lifetime(new Set)}static withScope(t){const n=new Scope;let r;try{return t(n)}catch(T){throw r=T,T}finally{scopeFinally(n,r)}}static withScopeMaybeAsync(t,n){return(0,asyncify_helpers_1.maybeAsync)(void 0,function*(r){const T=new Scope;let p;try{return yield*r.of(n.call(t,r,T))}catch(s){throw p=s,s}finally{scopeFinally(T,p)}})}static async withScopeAsync(t){const n=new Scope;let r;try{return await t(n)}catch(T){throw r=T,T}finally{scopeFinally(n,r)}}manage(t){return this._disposables.value.add(t),t}get alive(){return this._disposables.alive}dispose(){const t=Array.from(this._disposables.value.values()).reverse();for(const n of t)n.alive&&n.dispose();this._disposables.dispose()}}lifetime.Scope=Scope;var deferredPromise={};Object.defineProperty(deferredPromise,"__esModule",{value:!0});deferredPromise.QuickJSDeferredPromise=void 0;class QuickJSDeferredPromise{constructor(t){this.resolve=n=>{this.resolveHandle.alive&&(this.context.unwrapResult(this.context.callFunction(this.resolveHandle,this.context.undefined,n||this.context.undefined)).dispose(),this.disposeResolvers(),this.onSettled())},this.reject=n=>{this.rejectHandle.alive&&(this.context.unwrapResult(this.context.callFunction(this.rejectHandle,this.context.undefined,n||this.context.undefined)).dispose(),this.disposeResolvers(),this.onSettled())},this.dispose=()=>{this.handle.alive&&this.handle.dispose(),this.disposeResolvers()},this.context=t.context,this.owner=t.context.runtime,this.handle=t.promiseHandle,this.settled=new Promise(n=>{this.onSettled=n}),this.resolveHandle=t.resolveHandle,this.rejectHandle=t.rejectHandle}get alive(){return this.handle.alive||this.resolveHandle.alive||this.rejectHandle.alive}disposeResolvers(){this.resolveHandle.alive&&this.resolveHandle.dispose(),this.rejectHandle.alive&&this.rejectHandle.dispose()}}deferredPromise.QuickJSDeferredPromise=QuickJSDeferredPromise;var moduleTest={};Object.defineProperty(moduleTest,"__esModule",{value:!0});moduleTest.TestQuickJSWASMModule=void 0;const errors_1=errors,lifetime_1=lifetime;class TestQuickJSWASMModule{constructor(t){this.parent=t,this.contexts=new Set,this.runtimes=new Set}newRuntime(t){const n=this.parent.newRuntime({...t,ownedLifetimes:[new lifetime_1.Lifetime(void 0,void 0,()=>this.runtimes.delete(n)),...(t==null?void 0:t.ownedLifetimes)??[]]});return this.runtimes.add(n),n}newContext(t){const n=this.parent.newContext({...t,ownedLifetimes:[new lifetime_1.Lifetime(void 0,void 0,()=>this.contexts.delete(n)),...(t==null?void 0:t.ownedLifetimes)??[]]});return this.contexts.add(n),n}evalCode(t,n){return this.parent.evalCode(t,n)}disposeAll(){const t=[...this.contexts,...this.runtimes];this.runtimes.clear(),this.contexts.clear(),t.forEach(n=>{n.alive&&n.dispose()})}assertNoMemoryAllocated(){if(this.getFFI().QTS_RecoverableLeakCheck())throw new errors_1.QuickJSMemoryLeakDetected("Leak sanitizer detected un-freed memory");if(this.contexts.size>0)throw new errors_1.QuickJSMemoryLeakDetected(`${this.contexts.size} contexts leaked`);if(this.runtimes.size>0)throw new errors_1.QuickJSMemoryLeakDetected(`${this.runtimes.size} runtimes leaked`)}getFFI(){return this.parent.getFFI()}}moduleTest.TestQuickJSWASMModule=TestQuickJSWASMModule;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(te,ue,c,C){C===void 0&&(C=c);var de=Object.getOwnPropertyDescriptor(ue,c);(!de||("get"in de?!ue.__esModule:de.writable||de.configurable))&&(de={enumerable:!0,get:function(){return ue[c]}}),Object.defineProperty(te,C,de)}:function(te,ue,c,C){C===void 0&&(C=c),te[C]=ue[c]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(te,ue){Object.defineProperty(te,"default",{enumerable:!0,value:ue})}:function(te,ue){te.default=ue}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(te,ue){for(var c in te)c!=="default"&&!Object.prototype.hasOwnProperty.call(ue,c)&&t(ue,te,c)},T=commonjsGlobal&&commonjsGlobal.__importStar||function(te){if(te&&te.__esModule)return te;var ue={};if(te!=null)for(var c in te)c!=="default"&&Object.prototype.hasOwnProperty.call(te,c)&&t(ue,te,c);return n(ue,te),ue};Object.defineProperty(e,"__esModule",{value:!0}),e.shouldInterruptAfterDeadline=e.newAsyncContext=e.newAsyncRuntime=e.getQuickJSSync=e.getQuickJS=e.errors=e.RELEASE_SYNC=e.RELEASE_ASYNC=e.DEBUG_SYNC=e.DEBUG_ASYNC=e.newQuickJSAsyncWASMModule=e.newQuickJSWASMModule=void 0;const p=variants;Object.defineProperty(e,"newQuickJSWASMModule",{enumerable:!0,get:function(){return p.newQuickJSWASMModule}}),Object.defineProperty(e,"newQuickJSAsyncWASMModule",{enumerable:!0,get:function(){return p.newQuickJSAsyncWASMModule}}),Object.defineProperty(e,"DEBUG_ASYNC",{enumerable:!0,get:function(){return p.DEBUG_ASYNC}}),Object.defineProperty(e,"DEBUG_SYNC",{enumerable:!0,get:function(){return p.DEBUG_SYNC}}),Object.defineProperty(e,"RELEASE_ASYNC",{enumerable:!0,get:function(){return p.RELEASE_ASYNC}}),Object.defineProperty(e,"RELEASE_SYNC",{enumerable:!0,get:function(){return p.RELEASE_SYNC}}),r(vmInterface,e),r(lifetime,e),e.errors=T(errors),r(deferredPromise,e),r(moduleTest,e);let s,_;async function U(){return _??(_=(0,p.newQuickJSWASMModule)().then(te=>(s=te,te))),await _}e.getQuickJS=U;function q(){if(!s)throw new Error("QuickJS not initialized. Await getQuickJS() at least once.");return s}e.getQuickJSSync=q;async function Z(te){return(await(0,p.newQuickJSAsyncWASMModule)()).newRuntime(te)}e.newAsyncRuntime=Z;async function ge(te){return(await(0,p.newQuickJSAsyncWASMModule)()).newContext(te)}e.newAsyncContext=ge;function pe(te){const ue=typeof te=="number"?te:te.getTime();return function(){return Date.now()>ue}}e.shouldInterruptAfterDeadline=pe})(dist);var global=typeof window<"u"?window:null,ssr=global===null,document$1=ssr?void 0:global.document,addEventListener="addEventListener",removeEventListener="removeEventListener",getBoundingClientRect="getBoundingClientRect",gutterStartDragging="_a",aGutterSize="_b",bGutterSize="_c",HORIZONTAL="horizontal",NOOP=function(){return!1},calc=ssr?"calc":["","-webkit-","-moz-","-o-"].filter(function(e){var t=document$1.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length}).shift()+"calc",isString=function(e){return typeof e=="string"||e instanceof String},elementOrSelector=function(e){if(isString(e)){var t=document$1.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},getOption=function(e,t,n){var r=e[t];return r!==void 0?r:n},getGutterSize=function(e,t,n,r){if(t){if(r==="end")return 0;if(r==="center")return e/2}else if(n){if(r==="start")return 0;if(r==="center")return e/2}return e},defaultGutterFn=function(e,t){var n=document$1.createElement("div");return n.className="gutter gutter-"+t,n},defaultElementStyleFn=function(e,t,n){var r={};return isString(t)?r[e]=t:r[e]=calc+"("+t+"% - "+n+"px)",r},defaultGutterStyleFn=function(e,t){var n;return n={},n[e]=t+"px",n},Split=function(e,t){if(t===void 0&&(t={}),ssr)return{};var n=e,r,T,p,s,_,U;Array.from&&(n=Array.from(n));var q=elementOrSelector(n[0]),Z=q.parentNode,ge=getComputedStyle?getComputedStyle(Z):null,pe=ge?ge.flexDirection:null,te=getOption(t,"sizes")||n.map(function(){return 100/n.length}),ue=getOption(t,"minSize",100),c=Array.isArray(ue)?ue:n.map(function(){return ue}),C=getOption(t,"maxSize",1/0),de=Array.isArray(C)?C:n.map(function(){return C}),o=getOption(t,"expandToMin",!1),J=getOption(t,"gutterSize",10),X=getOption(t,"gutterAlign","center"),me=getOption(t,"snapOffset",30),F=Array.isArray(me)?me:n.map(function(){return me}),w=getOption(t,"dragInterval",1),d=getOption(t,"direction",HORIZONTAL),O=getOption(t,"cursor",d===HORIZONTAL?"col-resize":"row-resize"),a=getOption(t,"gutter",defaultGutterFn),j=getOption(t,"elementStyle",defaultElementStyleFn),re=getOption(t,"gutterStyle",defaultGutterStyleFn);d===HORIZONTAL?(r="width",T="clientX",p="left",s="right",_="clientWidth"):d==="vertical"&&(r="height",T="clientY",p="top",s="bottom",_="clientHeight");function ee(Me,Se,Re,Le){var Je=j(r,Se,Re,Le);Object.keys(Je).forEach(function(Ve){Me.style[Ve]=Je[Ve]})}function Ee(Me,Se,Re){var Le=re(r,Se,Re);Object.keys(Le).forEach(function(Je){Me.style[Je]=Le[Je]})}function ke(){return U.map(function(Me){return Me.size})}function De(Me){return"touches"in Me?Me.touches[0][T]:Me[T]}function Ce(Me){var Se=U[this.a],Re=U[this.b],Le=Se.size+Re.size;Se.size=Me/this.size*Le,Re.size=Le-Me/this.size*Le,ee(Se.element,Se.size,this[aGutterSize],Se.i),ee(Re.element,Re.size,this[bGutterSize],Re.i)}function Fe(Me){var Se,Re=U[this.a],Le=U[this.b];this.dragging&&(Se=De(Me)-this.start+(this[aGutterSize]-this.dragOffset),w>1&&(Se=Math.round(Se/w)*w),Se<=Re.minSize+Re.snapOffset+this[aGutterSize]?Se=Re.minSize+this[aGutterSize]:Se>=this.size-(Le.minSize+Le.snapOffset+this[bGutterSize])&&(Se=this.size-(Le.minSize+this[bGutterSize])),Se>=Re.maxSize-Re.snapOffset+this[aGutterSize]?Se=Re.maxSize+this[aGutterSize]:Se<=this.size-(Le.maxSize-Le.snapOffset+this[bGutterSize])&&(Se=this.size-(Le.maxSize+this[bGutterSize])),Ce.call(this,Se),getOption(t,"onDrag",NOOP)(ke()))}function Oe(){var Me=U[this.a].element,Se=U[this.b].element,Re=Me[getBoundingClientRect](),Le=Se[getBoundingClientRect]();this.size=Re[r]+Le[r]+this[aGutterSize]+this[bGutterSize],this.start=Re[p],this.end=Re[s]}function je(Me){if(!getComputedStyle)return null;var Se=getComputedStyle(Me);if(!Se)return null;var Re=Me[_];return Re===0?null:(d===HORIZONTAL?Re-=parseFloat(Se.paddingLeft)+parseFloat(Se.paddingRight):Re-=parseFloat(Se.paddingTop)+parseFloat(Se.paddingBottom),Re)}function qe(Me){var Se=je(Z);if(Se===null||c.reduce(function(Ve,ct){return Ve+ct},0)>Se)return Me;var Re=0,Le=[],Je=Me.map(function(Ve,ct){var ft=Se*Ve/100,yt=getGutterSize(J,ct===0,ct===Me.length-1,X),bt=c[ct]+yt;return ft<bt?(Re+=bt-ft,Le.push(0),bt):(Le.push(ft-bt),ft)});return Re===0?Me:Je.map(function(Ve,ct){var ft=Ve;if(Re>0&&Le[ct]-Re>0){var yt=Math.min(Re,Le[ct]-Re);Re-=yt,ft=Ve-yt}return ft/Se*100})}function it(){var Me=this,Se=U[Me.a].element,Re=U[Me.b].element;Me.dragging&&getOption(t,"onDragEnd",NOOP)(ke()),Me.dragging=!1,global[removeEventListener]("mouseup",Me.stop),global[removeEventListener]("touchend",Me.stop),global[removeEventListener]("touchcancel",Me.stop),global[removeEventListener]("mousemove",Me.move),global[removeEventListener]("touchmove",Me.move),Me.stop=null,Me.move=null,Se[removeEventListener]("selectstart",NOOP),Se[removeEventListener]("dragstart",NOOP),Re[removeEventListener]("selectstart",NOOP),Re[removeEventListener]("dragstart",NOOP),Se.style.userSelect="",Se.style.webkitUserSelect="",Se.style.MozUserSelect="",Se.style.pointerEvents="",Re.style.userSelect="",Re.style.webkitUserSelect="",Re.style.MozUserSelect="",Re.style.pointerEvents="",Me.gutter.style.cursor="",Me.parent.style.cursor="",document$1.body.style.cursor=""}function pt(Me){if(!("button"in Me&&Me.button!==0)){var Se=this,Re=U[Se.a].element,Le=U[Se.b].element;Se.dragging||getOption(t,"onDragStart",NOOP)(ke()),Me.preventDefault(),Se.dragging=!0,Se.move=Fe.bind(Se),Se.stop=it.bind(Se),global[addEventListener]("mouseup",Se.stop),global[addEventListener]("touchend",Se.stop),global[addEventListener]("touchcancel",Se.stop),global[addEventListener]("mousemove",Se.move),global[addEventListener]("touchmove",Se.move),Re[addEventListener]("selectstart",NOOP),Re[addEventListener]("dragstart",NOOP),Le[addEventListener]("selectstart",NOOP),Le[addEventListener]("dragstart",NOOP),Re.style.userSelect="none",Re.style.webkitUserSelect="none",Re.style.MozUserSelect="none",Re.style.pointerEvents="none",Le.style.userSelect="none",Le.style.webkitUserSelect="none",Le.style.MozUserSelect="none",Le.style.pointerEvents="none",Se.gutter.style.cursor=O,Se.parent.style.cursor=O,document$1.body.style.cursor=O,Oe.call(Se),Se.dragOffset=De(Me)-Se.end}}te=qe(te);var dt=[];U=n.map(function(Me,Se){var Re={element:elementOrSelector(Me),size:te[Se],minSize:c[Se],maxSize:de[Se],snapOffset:F[Se],i:Se},Le;if(Se>0&&(Le={a:Se-1,b:Se,dragging:!1,direction:d,parent:Z},Le[aGutterSize]=getGutterSize(J,Se-1===0,!1,X),Le[bGutterSize]=getGutterSize(J,!1,Se===n.length-1,X),pe==="row-reverse"||pe==="column-reverse")){var Je=Le.a;Le.a=Le.b,Le.b=Je}if(Se>0){var Ve=a(Se,d,Re.element);Ee(Ve,J,Se),Le[gutterStartDragging]=pt.bind(Le),Ve[addEventListener]("mousedown",Le[gutterStartDragging]),Ve[addEventListener]("touchstart",Le[gutterStartDragging]),Z.insertBefore(Ve,Re.element),Le.gutter=Ve}return ee(Re.element,Re.size,getGutterSize(J,Se===0,Se===n.length-1,X),Se),Se>0&&dt.push(Le),Re});function gt(Me){var Se=Me.i===dt.length,Re=Se?dt[Me.i-1]:dt[Me.i];Oe.call(Re);var Le=Se?Re.size-Me.minSize-Re[bGutterSize]:Me.minSize+Re[aGutterSize];Ce.call(Re,Le)}U.forEach(function(Me){var Se=Me.element[getBoundingClientRect]()[r];Se<Me.minSize&&(o?gt(Me):Me.minSize=Se)});function We(Me){var Se=qe(Me);Se.forEach(function(Re,Le){if(Le>0){var Je=dt[Le-1],Ve=U[Je.a],ct=U[Je.b];Ve.size=Se[Le-1],ct.size=Re,ee(Ve.element,Ve.size,Je[aGutterSize],Ve.i),ee(ct.element,ct.size,Je[bGutterSize],ct.i)}})}function lt(Me,Se){dt.forEach(function(Re){if(Se!==!0?Re.parent.removeChild(Re.gutter):(Re.gutter[removeEventListener]("mousedown",Re[gutterStartDragging]),Re.gutter[removeEventListener]("touchstart",Re[gutterStartDragging])),Me!==!0){var Le=j(r,Re.a.size,Re[aGutterSize]);Object.keys(Le).forEach(function(Je){U[Re.a].element.style[Je]="",U[Re.b].element.style[Je]=""})}})}return{setSizes:We,getSizes:ke,collapse:function(Se){gt(U[Se])},destroy:lt,parent:Z,pairs:dt}};const ____slug__vue_vue_type_style_index_0_lang="";let tempLineArray=[],logBackup=console.log,logMessages=[];console.log=function(){logMessages.push.apply(logMessages,arguments),logBackup.apply(console,arguments)};const _sfc_main={data(){return{command:"",path:null,shelter:null,tab:null,editorStarted:!1,test:null,pyodide:null,pyodideLoaded:!1,canvasArray:[],canvasPos:0,drawer:null}},async setup(){const route=useRoute();let lang=route.params.lang;const id=ref(route.query.id?route.query.id:""),pathParent=route.path,path=route.path+id.value,store=useCommandStore(),{command}=storeToRefs(store);var webConsole,precommand;if(lang=="r")precommand=">",webConsole=new Or({stdout:e=>document.getElementById("out").insertAdjacentHTML("afterend","<p>"+e+"</p>"),stderr:e=>document.getElementById("out").insertAdjacentHTML("afterend","<p>"+e+"</p>"),prompt:e=>document.getElementById("out").insertAdjacentHTML("afterend","<p>"+e+"</p>"),canvasExec:line=>{tempLineArray.push(line),eval(`document.getElementById("plot-canvas").getContext('2d').${line}`)}});else if(lang=="js")precommand=">",webConsole=(await dist.getQuickJS()).newContext();else if(lang=="python")precommand=">>>",webConsole=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/",stdout:e=>{var t=document.getElementById("out");t.innerHTML=t.innerHTML+"<pre><code>"+e},stderr:e=>{var t=document.getElementById("out");t.innerHTML=t.innerHTML+"<pre><code>"+e}});else if(lang=="ruby"){precommand="";const{DefaultRubyVM:e}=window["ruby-wasm-wasi"],n=await(await fetch("https://cdn.jsdelivr.net/npm/ruby-head-wasm-wasi@latest/dist/ruby.wasm")).arrayBuffer(),r=await WebAssembly.compile(n),{vm:T}=await e(r);webConsole=T}const{data:navigation}=await useAsyncData("navigation",()=>fetchContentNavigation("/"+lang+"/"));return{navigation,webConsole,store,command,pathParent,path,id,lang,precommand}},async mounted(){if(this.lang=="python")document.getElementById("out").innerHTML="",this.webConsole.runPython(`
from pyodide.console import BANNER
print("Welcome to the Pyodide terminal emulator 🐍\\n" + BANNER)
        `);else if(this.lang=="r")this.runR();else if(this.lang=="ruby"){var e=logMessages.length;this.webConsole.printVersion();var t=logMessages;for(let n=e;n<t.length;n++)this.displayCommand(t[n]);t=[]}Split(["#split-0","#split-1"],{direction:"vertical"})},methods:{changePath(e,t){useRouter().push({path:e+"/",query:{id:t}})},changePlot(e){this.updateCanvas(),e=="next"&&this.canvasPos+1<this.canvasArray.length?this.canvasPos=this.canvasPos+1:e=="prev"&&this.canvasPos-1>=0&&(this.canvasPos=this.canvasPos-1);const t=document.getElementById("plot-canvas"),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);for(const r in this.canvasArray[this.canvasPos]){const T=this.canvasArray[this.canvasPos][r];n.drawImage(T,0,0)}},updateCanvas(){tempLineArray.length!=0&&(this.canvasArray.push(tempLineArray),tempLineArray=[])},saveCanvas(){var e=document.getElementById("plot-canvas"),t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=t,n.setAttribute("download","Wasm4Learn.png"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},async onEnter(){if(this.lang=="python")this.runPython();else if(this.lang=="r")this.updateCanvas(),this.displayCommand(this.command,">"),await this.webConsole.stdin(this.command),this.updateCanvas();else if(this.lang=="js")this.runJS();else if(this.lang="ruby"){var e=logMessages.length;this.displayCommand(this.command);try{this.webConsole.eval(this.command)}catch(r){this.displayCommand(r)}var t=logMessages;for(let r=e;r<t.length;r++)this.displayCommand(t[r]);t=[]}this.command="";var n=document.getElementById("divConsole");n.scrollTop=n.scrollHeight},async testCode(e){this.test=null;const t=await this.webConsole.webR.evalRBoolean(e).then(n=>n).catch(n=>!1);this.test=t},async runJS(){const e=this.webConsole.evalCode(this.command);this.displayCommand(this.command,">"),e.error?(document.getElementById("out").append(this.webConsole.dump(e.error)+`
`),this.command="",e.error.dispose()):(document.getElementById("out").append(this.webConsole.dump(e.value)+`
`),this.command="",e.value.dispose())},runPython(){this.displayCommand(this.command,">>>");try{let e=this.webConsole.runPython(this.store.command+`

`);e!==void 0&&this.displayCommand(e)}catch(e){this.displayCommand(e)}},async runR(){for(;;){const t=await this.webConsole.webR.read();var e=document.getElementById("out");switch(t.type){case"stdout":e.innerHTML=e.innerHTML+"<pre><code>"+t.data+"<code></pre>";break;case"stderr":e.innerHTML=e.innerHTML+"<pre><code class='error'>"+t.data+"<code></pre>";break;case"prompt":if(t.data!="> "){e.innerHTML=e.innerHTML+"<pre><code>"+t.data+"<code></pre>";break}case"canvas":t.data.event==="canvasImage"&&(tempLineArray.push(t.data.image),document.getElementById("plot-canvas").getContext("2d").drawImage(t.data.image,0,0));break;case"closed":return;default:console.warn(`Unhandled output type for webR Console: ${t.type}.`)}}},displayCommand(e,t=""){t!=""&&(t=t+" ");var n=document.getElementById("out");n.innerHTML=n.innerHTML+"<pre><code class='command'>"+t+e+"<code></pre>"}},watch:{async command(e){if(this.store.changed){if(this.lang=="r")this.updateCanvas(),await this.webConsole.stdin(this.store.command),this.displayCommand(this.store.command,">"),this.updateCanvas();else if(this.lang=="python")this.runPython();else if(this.lang=="js")this.runJS();else if(this.lang="ruby"){var t=logMessages.length;this.displayCommand(this.store.command);try{this.webConsole.eval(this.command)}catch(T){this.displayCommand(T)}var n=logMessages;for(let T=t;T<n.length;T++)this.displayCommand(n[T]);n=[]}this.store.reset();var r=document.getElementById("divConsole");r.scrollTop=r.scrollHeight}else if(this.store.changedTest)for(const T of this.store.command)await this.testCode(T),this.store.setResultTest(this.test)}}},_hoisted_1={class:"text-black",style:{"margin-bottom":"2%","margin-left":"4%","margin-top":"4%"}},_hoisted_2={class:"fill-height split",style:{width:"calc(100% - 10px)"}},_hoisted_3={id:"split-0",style:{height:"50%"}},_hoisted_4={class:"code",id:"out"},_hoisted_5={id:"split-1",style:{height:"50%"}},_hoisted_6={style:{width:"100%","background-color":"gainsboro"},class:"text-left"},_hoisted_7=createBaseVNode("canvas",{id:"plot-canvas",width:"1008",height:"1008",style:{margin:"auto",height:"calc(100% - 50px)"}},null,-1);function _sfc_render(e,t,n,r,T,p){const s=resolveComponent("v-list-item-title"),_=resolveComponent("v-divider"),U=resolveComponent("v-list-item"),q=resolveComponent("v-list"),Z=resolveComponent("v-navigation-drawer"),ge=__nuxt_component_0,pe=resolveComponent("v-col"),te=resolveComponent("v-textarea"),ue=resolveComponent("v-card-text"),c=resolveComponent("v-card"),C=resolveComponent("v-tab"),de=resolveComponent("v-tabs"),o=resolveComponent("v-btn"),J=resolveComponent("v-window-item"),X=__nuxt_component_1,me=resolveComponent("v-window"),F=resolveComponent("v-row");return openBlock(),createElementBlock(Fragment,null,[createVNode(Z,{width:325,modelValue:T.drawer,"onUpdate:modelValue":t[0]||(t[0]=w=>T.drawer=w),absolute:"",temporary:"",location:"right"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.navigation,(w,d)=>(openBlock(),createElementBlock("div",{key:d},[(openBlock(!0),createElementBlock(Fragment,null,renderList(w.children,(O,a)=>(openBlock(),createElementBlock("div",{key:a},[(openBlock(!0),createElementBlock(Fragment,null,renderList(O.children,(j,re)=>(openBlock(),createElementBlock("div",{key:re},[createBaseVNode("h3",_hoisted_1,toDisplayString(j.title),1),createVNode(q,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(j.children,(ee,Ee)=>(openBlock(),createBlock(U,{onClick:ke=>p.changePath(O._path,j._dir),key:Ee},{default:withCtx(()=>[createVNode(s,{style:{"margin-bottom":"2%","margin-left":"4%"}},{default:withCtx(()=>[createTextVNode(toDisplayString(ee.title),1)]),_:2},1024),createVNode(_)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]))),128))]))),128))]))),128))]),_:1},8,["modelValue"]),createVNode(F,{class:"fill-height"},{default:withCtx(()=>[createVNode(pe,{class:"fill-height overflow-y-auto"},{default:withCtx(()=>[createVNode(ge)]),_:1}),createVNode(pe,{class:"fill-height"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createVNode(c,{class:"fill-height"},{default:withCtx(()=>[createVNode(ue,{class:"fill-height overflow-x-auto",id:"divConsole"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4,[createBaseVNode("p",null,"Loading "+toDisplayString(r.lang)+" WASM environnement, please wait...",1)]),createVNode(te,{style:{"font-family":"monospace, monospace !important","margin-top":"-20px !important"},prefix:r.precommand,onKeyup:withKeys(p.onEnter,["enter"]),modelValue:r.command,"onUpdate:modelValue":t[1]||(t[1]=w=>r.command=w),variant:"underlined",active:"true"},null,8,["prefix","onKeyup","modelValue"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_5,[createVNode(c,{class:"fill-height pa-2 mt-1"},{default:withCtx(()=>[createVNode(de,{modelValue:T.tab,"onUpdate:modelValue":t[2]||(t[2]=w=>T.tab=w)},{default:withCtx(()=>[createVNode(C,{value:"plot"},{default:withCtx(()=>[createTextVNode("Plot")]),_:1}),createVNode(C,{value:"editorTab"},{default:withCtx(()=>[createTextVNode("Editor")]),_:1})]),_:1},8,["modelValue"]),createVNode(ue,{class:"fill-height"},{default:withCtx(()=>[createVNode(me,{modelValue:T.tab,"onUpdate:modelValue":t[5]||(t[5]=w=>T.tab=w),class:"fill-height"},{default:withCtx(()=>[createVNode(J,{value:"plot",class:"fill-height text-center"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6,[createVNode(o,{variant:"text",onClick:t[3]||(t[3]=w=>p.changePlot("prev")),icon:"mdi-chevron-left",size:"x-small"}),createVNode(o,{variant:"text",onClick:t[4]||(t[4]=w=>p.changePlot("next")),icon:"mdi-chevron-right",size:"x-small"}),createVNode(o,{size:"x-small",onClick:p.saveCanvas},{default:withCtx(()=>[createTextVNode("Save")]),_:1},8,["onClick"])]),_hoisted_7]),_:1}),createVNode(J,{value:"editorTab",class:"fill-height text-center"},{default:withCtx(()=>[createVNode(X,{lang:r.lang},null,8,["lang"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])]),_:1})]),_:1})],64)}const ____slug_=_export_sfc(_sfc_main,[["render",_sfc_render]]),____slug_$1=Object.freeze(Object.defineProperty({__proto__:null,default:____slug_},Symbol.toStringTag,{value:"Module"}));export{____slug_$1 as _,deferredPromise as a,asyncifyHelpers as b,dist as c,debug as d,errors as e,lifetime as l};
