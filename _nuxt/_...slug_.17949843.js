import _sfc_main$1 from"./ContentRendererMarkdown.30472f98.js";import _sfc_main$2 from"./ContentRenderer.d2916ce2.js";import{_ as _export_sfc,f as useRoute,r as ref,s as storeToRefs,g as resolveComponent,h as createBlock,w as withCtx,o as openBlock,b as createVNode,a as createBaseVNode,t as toDisplayString,i as createCommentVNode,d as createTextVNode,j as withKeys}from"./entry.841cec3f.js";import{u as useAsyncData}from"./asyncData.0ed2310b.js";import{q as queryContent}from"./query.805df434.js";import{u as useCommandStore}from"./useCommandStore.7f35d114.js";import"./index.a6ef77ff.js";import"./preview.0b3dec6f.js";import"./utils.67594146.js";var M=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),ut=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},o=(t,e,r)=>(ut(t,e,"read from private field"),r?r.call(t):e.get(t)),u=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},c=(t,e,r,n)=>(ut(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),P=(t,e,r)=>(ut(t,e,"access private method"),r),f=typeof process<"u"&&process.release&&process.release.name==="node";if(!globalThis.document){if(!globalThis.importScripts){if(!f)throw new Error("Cannot determine runtime environment")}}function J(){let t={resolve:r=>{},reject:r=>{},promise:null},e=new Promise((r,n)=>{t.resolve=r,t.reject=n});return t.promise=e,t}function Ot(t){return new Promise(e=>setTimeout(e,t))}function E(t,e,r,...n){return t===null||typeof t!="object"?t:e(t)?r(t,...n):Array.isArray(t)||ArrayBuffer.isView(t)?t.map(s=>E(s,e,r,...n)):Object.fromEntries(Object.entries(t).map(([s,a],l)=>[s,E(a,e,r,...n)]))}function De(t,e){let r=new XMLHttpRequest;r.open("get",t,!0),r.onload=()=>{let n=new Worker(URL.createObjectURL(new Blob([r.responseText])));e(n)},r.send()}function V(t){if(f)return!1;let e=new URL(location.href),r=new URL(t,location.origin);return!(e.host===r.host&&e.port===r.port&&e.protocol===r.protocol)}var ur=new WeakMap;function Dt(t,e){return ur.set(t,e),t}var Me=63;function Ae(){let t=Array.from({length:4},cr).join("-");if(t.length!==Me)throw new Error("comlink internal error: UUID has the wrong length");return t}function cr(){let t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),e=15-t.length;return e>0&&(t=Array.from({length:e},()=>0).join("")+t),t}function Ce(t,e){return Mt({type:"request",data:{uuid:Ae(),msg:t}},e)}function Rt(t,e,r){return Mt({type:"response",data:{uuid:t,resp:e}},r)}function Mt(t,e){return e&&Dt(t,e),t}var Rr=new TextEncoder;new TextDecoder("utf-8");function je(t){return Rr.encode(JSON.stringify(t))}var dr=new TextEncoder;async function jt(t,e,r){try{let{taskId:n,sizeBuffer:s,dataBuffer:a,signalBuffer:l}=e,p=je(r),y=p.length<=a.length;if(Atomics.store(s,0,p.length),Atomics.store(s,1,+y),!y){let[x,Q]=hr(t);a.set(dr.encode(x)),await Ct(l,n),a=(await Q).dataBuffer}a.set(p),Atomics.store(s,1,1),await Ct(l,n)}catch(n){console.warn(n)}}function hr(t){let e=Ae();return[e,new Promise(r=>{f?t.once("message",n=>{!n.id||n.id!==e||r(n)}):t.addEventListener("message",function n(s){!s.data||!s.data.id||s.data.id!==e||(t.removeEventListener("message",n),r(s.data))}),t.start&&t.start()})]}async function Ct(t,e){let r=(e>>1)%32,n=1;for(;Atomics.compareExchange(t,r+1,0,e)!==0;)await Ot(n),n<32&&(n*=2);Atomics.or(t,0,1<<r),Atomics.notify(t,0)}var W,S,oe,yt,se=class{constructor(){u(this,oe),u(this,W,void 0),u(this,S,void 0),c(this,S,[]),c(this,W,[])}put(t){o(this,S).length||P(this,oe,yt).call(this),o(this,S).shift()(t)}async get(){return o(this,W).length||P(this,oe,yt).call(this),o(this,W).shift()}isEmpty(){return!o(this,W).length}isBlocked(){return!!o(this,S).length}get length(){return o(this,W).length-o(this,S).length}};W=new WeakMap,S=new WeakMap,oe=new WeakSet,yt=function(){o(this,W).push(new Promise(t=>{o(this,S).push(t)}))};function It(t){let e=new Error(t.obj.message);return e.name=t.obj.name,e.stack=t.obj.stack,e}function mr(t){return t&&typeof t=="object"&&"payloadType"in t&&"obj"in t}function Le(t){return mr(t)&&t.payloadType==="ptr"}var H,G=class{constructor(){this.inputQueue=new se,this.outputQueue=new se,u(this,H,new Map)}async read(){return await this.outputQueue.get()}async flush(){let t=[];for(;!this.outputQueue.isEmpty();)t.push(await this.read());return t}write(t){this.inputQueue.put(t)}async request(t,e){let r=Ce(t,e),{resolve:n,reject:s,promise:a}=J();return o(this,H).set(r.data.uuid,{resolve:n,reject:s}),this.write(r),a}resolveResponse(t){let e=t.data.uuid,r=o(this,H).get(e);if(r){let n=t.data.resp;o(this,H).delete(e),n.payloadType==="err"?r.reject(It(n)):r.resolve(n)}else console.warn("Can't find request.")}};H=new WeakMap;new TextDecoder("utf-8");var i={};function Bt(t){Object.keys(t).forEach(e=>i._free(t[e]))}f&&(globalThis.Worker=M("worker_threads").Worker);var Z,qe,qt,pe,le=class extends G{constructor(t){super(),u(this,qe),u(this,Z,void 0),this.close=()=>{},u(this,pe,async(r,n)=>{if(!(!n||!n.type))switch(n.type){case"resolve":c(this,Z,new Int32Array(n.data)),this.resolve();return;case"response":this.resolveResponse(n);return;default:this.outputQueue.put(n);return;case"sync-request":{let s=n,a=s.data.msg,l=s.data.reqData;switch(a.type){case"read":{let p=await this.inputQueue.get();await jt(r,l,p);break}default:throw new TypeError(`Unsupported request type '${a.type}'.`)}return}case"request":throw new TypeError("Can't send messages of type 'request' from a worker. Please Use 'sync-request' instead.")}});let e=r=>{P(this,qe,qt).call(this,r),this.close=()=>r.terminate();let n={type:"init",data:{config:t,channelType:O.SharedArrayBuffer}};r.postMessage(n)};if(V(t.baseUrl))De(`${t.baseUrl}webr-worker.js`,r=>e(r));else{let r=new Worker(`${t.baseUrl}webr-worker.js`);e(r)}({resolve:this.resolve,promise:this.initialised}=J())}interrupt(){if(!o(this,Z))throw new Error("Failed attempt to interrupt before initialising interruptBuffer");o(this,Z)[0]=1}};Z=new WeakMap,qe=new WeakSet,qt=function(t){f?t.on("message",e=>{o(this,pe).call(this,t,e)}):t.onmessage=e=>o(this,pe).call(this,t,e.data)},pe=new WeakMap;f&&(globalThis.Worker=M("worker_threads").Worker);var K,U,Y,Je,Jt,Ve,Vt,He,Ht,ye,Re=class extends G{constructor(t){super(),u(this,Je),u(this,Ve),u(this,He),this.close=()=>{},u(this,K,new Map),u(this,U,void 0),u(this,Y,!1),u(this,ye,async(r,n)=>{if(!(!n||!n.type))switch(n.type){case"resolve":this.resolve();return;case"response":this.resolveResponse(n);return;default:this.outputQueue.put(n);return;case"sync-request":{let s=n.data;o(this,K).set(s.data.uuid,s.data.msg);return}case"request":throw new TypeError("Can't send messages of type 'request' from a worker.Use service worker fetch request instead.")}});let e=r=>{P(this,He,Ht).call(this,r),this.close=()=>r.terminate(),P(this,Je,Jt).call(this,`${t.serviceWorkerUrl}webr-serviceworker.js`).then(n=>{let s={type:"init",data:{config:t,channelType:O.ServiceWorker,clientId:n,location:window.location.href}};r.postMessage(s)})};if(V(t.serviceWorkerUrl))De(`${t.serviceWorkerUrl}webr-worker.js`,r=>e(r));else{let r=new Worker(`${t.serviceWorkerUrl}webr-worker.js`);e(r)}({resolve:this.resolve,promise:this.initialised}=J())}activeRegistration(){var t;if(!((t=o(this,U))!=null&&t.active))throw new Error("Attempted to obtain a non-existent active registration.");return o(this,U).active}interrupt(){c(this,Y,!0)}};K=new WeakMap,U=new WeakMap,Y=new WeakMap,Je=new WeakSet,Jt=async function(t){c(this,U,await navigator.serviceWorker.register(t)),await navigator.serviceWorker.ready,window.addEventListener("beforeunload",()=>{var r;(r=o(this,U))==null||r.unregister()});let e=await new Promise(r=>{navigator.serviceWorker.addEventListener("message",function n(s){s.data.type==="registration-successful"&&(navigator.serviceWorker.removeEventListener("message",n),r(s.data.clientId))}),this.activeRegistration().postMessage({type:"register-client-main"})});return navigator.serviceWorker.addEventListener("message",r=>{P(this,Ve,Vt).call(this,r)}),e},Ve=new WeakSet,Vt=async function(t){if(t.data.type==="request"){let e=t.data.data,r=o(this,K).get(e);if(!r)throw new Error("Request not found during service worker XHR request");switch(o(this,K).delete(e),r.type){case"read":{let n=await this.inputQueue.get();this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:e,response:Rt(e,n)});break}case"interrupt":{let n=o(this,Y);this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:e,response:Rt(e,n)}),c(this,Y,!1);break}default:throw new TypeError(`Unsupported request type '${r.type}'.`)}return}},He=new WeakSet,Ht=function(t){f?t.on("message",e=>{o(this,ye).call(this,t,e)}):t.onmessage=e=>o(this,ye).call(this,t,e.data)},ye=new WeakMap;var O={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2};function Gt(t){switch(t.channelType){case O.SharedArrayBuffer:return new le(t);case O.ServiceWorker:return new Re(t);case O.Automatic:default:if(f||crossOriginIsolated)return new le(t);if("serviceWorker"in navigator&&!V(t.serviceWorkerUrl))return new Re(t);throw new Error("Can't initialise main thread communication channel")}}var $t=f?__dirname+"/":"https://webr.r-wasm.org/v0.1.1/",Xt="https://repo.r-wasm.org";function D(t){return t&&(typeof t=="object"||typeof t=="function")&&"payloadType"in t&&Le(t._payload)}function zt(t){var e;return!!(D(t)&&((e=t._payload.obj.methods)!=null&&e.includes("exec")))}var d={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function bt(t){return t&&typeof t=="object"&&Object.keys(d).includes(t.type)}function gt(t){return t&&typeof t=="object"&&"re"in t&&"im"in t}function Ge(t){return i._Rf_protect(k(t)),t}function w(t,e){return i._Rf_protect(k(t)),++e.n,t}function Zt(t){let e=i._malloc(4);return i._R_ProtectWithIndex(k(t),e),{loc:i.getValue(e,"i32"),ptr:e}}function Qt(t){i._Rf_unprotect(1),i._free(t.ptr)}function Kt(t,e){return i._R_Reprotect(k(t),e.loc),t}function _(t){i._Rf_unprotect(t)}function wt(t,e,r){i._Rf_defineVar(k(e),k(r),k(t))}function Yt(t,e){let r={},n={n:0};try{let s=new we(e);w(s,n),r.code=i.allocateUTF8(t);let a=i._R_ParseEvalString(r.code,s.ptr);return R.wrap(a)}finally{Bt(r),_(n.n)}}function ge(t,e){return i.LDSO.loadedLibsByName["/usr/lib/R/library/webr/libs/webr.so"].module.ffi_safe_eval(k(t),k(e))}function k(t){return xr(t)?t.ptr:t}function q(t,e){if(i._TYPEOF(t.ptr)!==d[e])throw new Error(`Unexpected object type "${t.type()}" when expecting type "${e}"`)}function Pr(t){if(bt(t))return new(er(d[t.type]))(t);if(t&&typeof t=="object"&&"type"in t&&t.type==="null")return new Ze;if(t===null)return new F({type:"logical",names:null,values:[null]});if(typeof t=="boolean")return new F(t);if(typeof t=="number")return new Pe(t);if(typeof t=="string")return new A(t);if(gt(t))return new ve(t);if(Array.isArray(t))return vr(t);throw new Error("Robj construction for this JS object is not yet supported")}function vr(t){let e={n:0};try{let r=new B([new C("c"),...t]);return w(r,e),r.eval()}finally{_(e.n)}}var g=class{constructor(t){this.ptr=t}type(){let t=i._TYPEOF(this.ptr);return Object.keys(d).find(e=>d[e]===t)}},te,$e,L=class extends g{constructor(t){if(!(t instanceof g))return Pr(t);super(t.ptr),u(this,te)}static wrap(t){let e=i._TYPEOF(t);return new(er(e))(new g(t))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(t){return v[t]}getPropertyValue(t){return this[t]}inspect(){Yt(".Internal(inspect(x))",{x:this})}isNull(){return i._TYPEOF(this.ptr)===d.null}isUnbound(){return this.ptr===v.unboundValue.ptr}attrs(){return re.wrap(i._ATTRIB(this.ptr))}setNames(t){let e;if(t===null)e=v.null;else if(Array.isArray(t)&&t.every(r=>typeof r=="string"||r===null))e=new A(t);else throw new Error("Argument to setNames must be null or an Array of strings or null");return i._Rf_setAttrib(this.ptr,v.namesSymbol.ptr,e.ptr),this}names(){let t=A.wrap(i._Rf_getAttrib(this.ptr,v.namesSymbol.ptr));return t.isNull()?null:t.toArray()}includes(t){let e=this.names();return e&&e.includes(t)}toJs(t={depth:0},e=1){throw new Error("This R object cannot be converted to JS")}subset(t){return P(this,te,$e).call(this,t,v.bracketSymbol.ptr)}get(t){return P(this,te,$e).call(this,t,v.bracket2Symbol.ptr)}getDollar(t){return P(this,te,$e).call(this,t,v.dollarSymbol.ptr)}pluck(...t){let e=Zt(v.null);try{let r=(s,a)=>{let l=s.get(a);return Kt(l,e)},n=t.reduce(r,this);return n.isNull()?void 0:n}finally{Qt(e)}}set(t,e){let r={n:0};try{let n=new L(t);w(n,r);let s=new L(e);w(s,r);let a=new C("[[<-"),l=i._Rf_lang4(a.ptr,this.ptr,n.ptr,s.ptr);return w(l,r),L.wrap(ge(l,v.baseEnv))}finally{_(r.n)}}static getMethods(t){let e=new Set,r=t;do Object.getOwnPropertyNames(r).map(n=>e.add(n));while(r=Object.getPrototypeOf(r));return[...e.keys()].filter(n=>typeof t[n]=="function")}},R=L;te=new WeakSet,$e=function(t,e){let r={n:0};try{let n=new L(t);w(n,r);let s=i._Rf_lang3(e,this.ptr,n.ptr);return w(s,r),L.wrap(ge(s,v.baseEnv))}finally{_(r.n)}};var Ze=class extends R{constructor(){return super(new g(i.getValue(i._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},C=class extends R{constructor(t){if(t instanceof g){q(t,"symbol"),super(t);return}let e=i.allocateUTF8(t);try{super(new g(i._Rf_install(e)))}finally{i._free(e)}}toJs(){let t=this.toObject();return{type:"symbol",printname:t.printname,symvalue:t.symvalue,internal:t.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return xe.wrap(i._PRINTNAME(this.ptr))}symvalue(){return R.wrap(i._SYMVALUE(this.ptr))}internal(){return R.wrap(i._INTERNAL(this.ptr))}},re=class extends R{constructor(t){if(t instanceof g)return q(t,"pairlist"),super(t),this;let e={n:0};try{let{names:r,values:n}=_e(t),s=re.wrap(i._Rf_allocList(n.length));w(s,e);for(let[a,l]=[0,s];!l.isNull();[a,l]=[a+1,l.cdr()])l.setcar(new R(n[a]));s.setNames(r),super(s)}finally{_(e.n)}}get length(){return this.toArray().length}toArray(t={depth:1}){return this.toJs(t).values}toObject({allowDuplicateKey:t=!0,allowEmptyKey:e=!1,depth:r=1}={}){let n=this.entries({depth:r}),s=n.map(([a,l])=>a);if(!t&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!e&&s.some(a=>!a))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,l)=>n.findIndex(p=>p[0]===a[0])===l))}entries(t={depth:1}){let e=this.toJs(t);return e.values.map((r,n)=>[e.names?e.names[n]:null,r])}toJs(t={depth:0},e=1){let r=[],n=!1,s=[];for(let a=this;!a.isNull();a=a.cdr()){let l=a.tag();l.isNull()?r.push(""):(n=!0,r.push(l.toString())),t.depth&&e>=t.depth?s.push(a.car()):s.push(a.car().toJs(t,e+1))}return{type:"pairlist",names:n?r:null,values:s}}includes(t){return t in this.toObject()}setcar(t){i._SETCAR(this.ptr,t.ptr)}car(){return R.wrap(i._CAR(this.ptr))}cdr(){return R.wrap(i._CDR(this.ptr))}tag(){return R.wrap(i._TAG(this.ptr))}},B=class extends R{constructor(t){if(t instanceof g)return q(t,"call"),super(t),this;let e={n:0};try{let{values:r}=_e(t),n=r.map(a=>w(new R(a),e)),s=B.wrap(i._Rf_allocVector(d.call,r.length));w(s,e);for(let[a,l]=[0,s];!l.isNull();[a,l]=[a+1,l.cdr()])l.setcar(n[a]);super(s)}finally{_(e.n)}}setcar(t){i._SETCAR(this.ptr,t.ptr)}car(){return R.wrap(i._CAR(this.ptr))}cdr(){return R.wrap(i._CDR(this.ptr))}eval(){return R.wrap(ge(this.ptr,v.baseEnv))}},Pt=class extends R{constructor(t){if(t instanceof g)return q(t,"list"),super(t),this;let e={n:0};try{let{names:r,values:n}=_e(t),s=i._Rf_allocVector(d.list,n.length);w(s,e),n.forEach((a,l)=>{i._SET_VECTOR_ELT(s,l,new R(a).ptr)}),R.wrap(s).setNames(r),super(new g(s))}finally{_(e.n)}}get length(){return i._LENGTH(this.ptr)}toArray(t={depth:1}){return this.toJs(t).values}toObject({allowDuplicateKey:t=!0,allowEmptyKey:e=!1,depth:r=1}={}){let n=this.entries({depth:r}),s=n.map(([a,l])=>a);if(!t&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!e&&s.some(a=>!a))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,l)=>n.findIndex(p=>p[0]===a[0])===l))}entries(t={depth:1}){let e=this.toJs(t);return e.values.map((r,n)=>[e.names?e.names[n]:null,r])}toJs(t={depth:0},e=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(r=>t.depth&&e>=t.depth?this.get(r+1):this.get(r+1).toJs(t,e+1))}}},ee=class extends R{exec(...t){let e={n:0};try{let r=new B([this,...t]);return w(r,e),r.eval()}finally{_(e.n)}}},xe=class extends R{constructor(t){if(t instanceof g){q(t,"string"),super(t);return}let e=i.allocateUTF8(t);try{super(new g(i._Rf_mkChar(e)))}finally{i._free(e)}}toString(){return i.UTF8ToString(i._R_CHAR(this.ptr))}toJs(){return{type:"string",value:this.toString()}}},we=class extends R{constructor(t={}){if(t instanceof g)return q(t,"environment"),super(t),this;let e=0;try{let{names:r,values:n}=_e(t),s=Ge(i._R_NewEnv(v.globalEnv.ptr,0,0));++e,n.forEach((a,l)=>{let p=r?r[l]:null;if(!p)throw new Error("Can't create object in new environment with empty symbol name");let y=new C(p),x=Ge(new R(a));try{wt(s,y,x)}finally{_(1)}}),super(new g(s))}finally{_(e)}}ls(t=!1,e=!0){return A.wrap(i._R_lsInternal3(this.ptr,Number(t),Number(e))).toArray()}bind(t,e){let r=new C(t),n=Ge(new R(e));try{wt(this,r,n)}finally{_(1)}}names(){return this.ls(!0,!0)}frame(){return R.wrap(i._FRAME(this.ptr))}subset(t){if(typeof t=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(t)}toObject({depth:t=0}={}){let e=this.names();return Object.fromEntries([...Array(e.length).keys()].map(r=>[e[r],this.getDollar(e[r]).toJs({depth:t})]))}toJs(t={depth:0},e=1){let r=this.names(),n=[...Array(r.length).keys()].map(s=>t.depth&&e>=t.depth?this.getDollar(r[s]):this.getDollar(r[s]).toJs(t,e+1));return{type:"environment",names:r,values:n}}},j=class extends R{constructor(t,e,r){if(t instanceof g)return q(t,e),super(t),this;let n={n:0};try{let{names:s,values:a}=_e(t),l=i._Rf_allocVector(d[e],a.length);w(l,n),a.forEach(r(l)),R.wrap(l).setNames(s),super(new g(l))}finally{_(n.n)}}get length(){return i._LENGTH(this.ptr)}get(t){return super.get(t)}subset(t){return super.subset(t)}getDollar(t){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let t={n:0};try{let e=i._Rf_lang2(new C("is.na").ptr,this.ptr);w(e,t);let r=F.wrap(ge(e,v.baseEnv));w(r,t);let n=r.toTypedArray();return Array.from(n).map(s=>!!s)}finally{_(t.n)}}toArray(){let t=this.toTypedArray();return this.detectMissing().map((e,r)=>e?null:t[r])}toObject({allowDuplicateKey:t=!0,allowEmptyKey:e=!1}={}){let r=this.entries(),n=r.map(([s,a])=>s);if(!t&&new Set(n).size!==n.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!e&&n.some(s=>!s))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(r.filter((s,a)=>r.findIndex(l=>l[0]===s[0])===a))}entries(){let t=this.toArray(),e=this.names();return t.map((r,n)=>[e?e[n]:null,r])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},Qe,vt=class extends j{constructor(t){super(t,"logical",o(vt,Qe))}getBoolean(t){return this.get(t).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getBoolean(1);if(t===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return t}toTypedArray(){return new Int32Array(i.HEAP32.subarray(i._LOGICAL(this.ptr)/4,i._LOGICAL(this.ptr)/4+this.length))}toArray(){let t=this.toTypedArray();return this.detectMissing().map((e,r)=>e?null:!!t[r])}},F=vt;Qe=new WeakMap,u(F,Qe,t=>{let e=i._LOGICAL(t),r=i.getValue(i._R_NaInt,"i32");return(n,s)=>{i.setValue(e+4*s,n===null?r:!!n,"i32")}});var Ke,xt=class extends j{constructor(t){super(t,"integer",o(xt,Ke))}getNumber(t){return this.get(t).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getNumber(1);if(t===null)throw new Error("Can't convert missing value `NA` to a JS number");return t}toTypedArray(){return new Int32Array(i.HEAP32.subarray(i._INTEGER(this.ptr)/4,i._INTEGER(this.ptr)/4+this.length))}},Xe=xt;Ke=new WeakMap,u(Xe,Ke,t=>{let e=i._INTEGER(t),r=i.getValue(i._R_NaInt,"i32");return(n,s)=>{i.setValue(e+4*s,n===null?r:Math.round(Number(n)),"i32")}});var Ye,_t=class extends j{constructor(t){super(t,"double",o(_t,Ye))}getNumber(t){return this.get(t).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getNumber(1);if(t===null)throw new Error("Can't convert missing value `NA` to a JS number");return t}toTypedArray(){return new Float64Array(i.HEAPF64.subarray(i._REAL(this.ptr)/8,i._REAL(this.ptr)/8+this.length))}},Pe=_t;Ye=new WeakMap,u(Pe,Ye,t=>{let e=i._REAL(t),r=i.getValue(i._R_NaReal,"double");return(n,s)=>{i.setValue(e+8*s,n===null?r:n,"double")}});var et,Tt=class extends j{constructor(t){super(t,"complex",o(Tt,et))}getComplex(t){return this.get(t).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getComplex(1);if(t===null)throw new Error("Can't convert missing value `NA` to a JS object");return t}toTypedArray(){return new Float64Array(i.HEAPF64.subarray(i._COMPLEX(this.ptr)/8,i._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let t=this.toTypedArray();return this.detectMissing().map((e,r)=>e?null:{re:t[2*r],im:t[2*r+1]})}},ve=Tt;et=new WeakMap,u(ve,et,t=>{let e=i._COMPLEX(t),r=i.getValue(i._R_NaReal,"double");return(n,s)=>{i.setValue(e+8*(2*s),n===null?r:n.re,"double"),i.setValue(e+8*(2*s+1),n===null?r:n.im,"double")}});var tt,Et=class extends j{constructor(t){super(t,"character",o(Et,tt))}getString(t){return this.get(t).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getString(1);if(t===null)throw new Error("Can't convert missing value `NA` to a JS string");return t}toTypedArray(){return new Uint32Array(i.HEAPU32.subarray(i._STRING_PTR(this.ptr)/4,i._STRING_PTR(this.ptr)/4+this.length))}toArray(){return this.detectMissing().map((t,e)=>t?null:i.UTF8ToString(i._R_CHAR(i._STRING_ELT(this.ptr,e))))}},A=Et;tt=new WeakMap,u(A,tt,t=>(e,r)=>{e===null?i._SET_STRING_ELT(t,r,v.naString.ptr):i._SET_STRING_ELT(t,r,new xe(e).ptr)});var rt,kt=class extends j{constructor(t){super(t,"raw",o(kt,rt))}getNumber(t){return this.get(t).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let t=this.getNumber(1);if(t===null)throw new Error("Can't convert missing value `NA` to a JS number");return t}toTypedArray(){return new Uint8Array(i.HEAPU8.subarray(i._RAW(this.ptr),i._RAW(this.ptr)+this.length))}},ze=kt;rt=new WeakMap,u(ze,rt,t=>{let e=i._RAW(t);return(r,n)=>{i.setValue(e+n,Number(r),"i8")}});function _e(t){return bt(t)?t:Array.isArray(t)?{names:null,values:t}:t&&typeof t=="object"&&!gt(t)?{names:Object.keys(t),values:Object.values(t)}:{names:null,values:[t]}}function er(t){let e={[d.null]:Ze,[d.symbol]:C,[d.pairlist]:re,[d.closure]:ee,[d.environment]:we,[d.call]:B,[d.special]:ee,[d.builtin]:ee,[d.string]:xe,[d.logical]:F,[d.integer]:Xe,[d.double]:Pe,[d.complex]:ve,[d.character]:A,[d.list]:Pt,[d.raw]:ze,[d.function]:ee};return t in e?e[t]:R}function xr(t){return t instanceof R}var v;function Tr(){}function Er(t,e){return async function*(){let r={type:"callRObjectMethod",data:{payload:e._payload,prop:"getPropertyValue",args:[{payloadType:"raw",obj:"length"}],shelter:void 0}},n=await t.request(r);if(typeof n.obj!="number")throw new Error("Cannot iterate over object, unexpected type for length property.");for(let s=1;s<=n.obj;s++)yield e.get(s)}}function tr(t,e,r){return async(...n)=>{let s=n.map(p=>D(p)?p._payload:{obj:E(p,D,y=>y._payload),payloadType:"raw"}),a={type:"callRObjectMethod",data:{payload:r,prop:e,args:s}},l=await t.request(a);switch(l.payloadType){case"ptr":return I(t,l);case"raw":return E(l,Le,(p,y)=>I(y,p),t).obj}}}async function kr(t,e,r,n){let s={type:"newRObject",data:{objType:e,obj:E(n,D,l=>l._payload),shelter:r}},a=await t.request(s);switch(a.payloadType){case"raw":throw new Error("Unexpected raw payload type returned from newRObject");case"ptr":return I(t,a)}}function I(t,e){var r;let n=new Proxy((r=e.obj.methods)!=null&&r.includes("exec")?Object.assign(Tr,{...e}):e,{get:(s,a)=>{var l;if(a==="_payload")return e;if(a===Symbol.asyncIterator)return Er(t,n);if((l=e.obj.methods)!=null&&l.includes(a.toString()))return tr(t,a.toString(),e)},apply:async(s,a,l)=>{let p=await I(t,e).exec(...l);return zt(p)?p:p.toJs()}});return n}function T(t,e,r){return new Proxy(R,{construct:(n,s)=>kr(t,r,e,...s),get:(n,s)=>tr(t,s.toString())})}var Te,Ee,ke,We,nt,st,ot,at,it,rr,Wt=class{constructor(t={},e={REnv:{R_HOME:"/usr/lib/R",R_ENABLE_JIT:"0",R_DEFAULT_DEVICE:"canvas"}}){u(this,it),u(this,Te,void 0),u(this,Ee,void 0),u(this,ke,void 0),u(this,We,void 0),u(this,nt,r=>{console.log(r)}),u(this,st,r=>{console.error(r)}),u(this,ot,r=>{let n=prompt(r);n&&this.stdin(`${n}
`)}),u(this,at,r=>{if(f)throw new Error("Plotting with HTML canvas is not yet supported under Node");Function(`this.getContext('2d').${r}`).bind(this.canvas)()}),this.webR=new lt(e),f||(this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width","1008"),this.canvas.setAttribute("height","1008")),c(this,Te,t.stdout||o(this,nt)),c(this,Ee,t.stderr||o(this,st)),c(this,ke,t.prompt||o(this,ot)),c(this,We,t.canvasExec||o(this,at))}stdin(t){this.webR.writeConsole(t)}interrupt(){this.webR.interrupt()}run(){P(this,it,rr).call(this)}};Te=new WeakMap,Ee=new WeakMap,ke=new WeakMap,We=new WeakMap,nt=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakMap,it=new WeakSet,rr=async function(){for(;;){let t=await this.webR.read();switch(t.type){case"stdout":o(this,Te).call(this,t.data);break;case"stderr":o(this,Ee).call(this,t.data);break;case"prompt":o(this,ke).call(this,t.data);break;case"canvasExec":o(this,We).call(this,t.data);break;default:console.warn(`Unhandled output type for webR Console: ${t.type}.`)}}};var Wr={R_HOME:"/usr/lib/R",R_ENABLE_JIT:"0"},Sr={RArgs:[],REnv:Wr,baseUrl:$t,serviceWorkerUrl:"",repoUrl:Xt,homedir:"/home/web_user",interactive:!0,channelType:O.Automatic},b,lt=class{constructor(t={}){u(this,b,void 0),this.FS={lookupPath:async r=>{let n={type:"lookupPath",data:{path:r}};return(await o(this,b).request(n)).obj},mkdir:async r=>{let n={type:"mkdir",data:{path:r}};return(await o(this,b).request(n)).obj},readFile:async(r,n)=>{let s={type:"readFile",data:{path:r,flags:n}};return(await o(this,b).request(s)).obj},rmdir:async r=>{let n={type:"rmdir",data:{path:r}};await o(this,b).request(n)},writeFile:async(r,n,s)=>{let a={type:"writeFile",data:{path:r,data:n,flags:s}};await o(this,b).request(a)},unlink:async r=>{let n={type:"unlink",data:{path:r}};await o(this,b).request(n)}};let e=Object.assign(Sr,t);c(this,b,Gt(e)),this.objs={},this.Shelter=Or(o(this,b))}async init(){let t=await o(this,b).initialised;return this.globalShelter=await new this.Shelter,this.RObject=this.globalShelter.RObject,this.RLogical=this.globalShelter.RLogical,this.RInteger=this.globalShelter.RInteger,this.RDouble=this.globalShelter.RDouble,this.RComplex=this.globalShelter.RComplex,this.RCharacter=this.globalShelter.RCharacter,this.RRaw=this.globalShelter.RRaw,this.RList=this.globalShelter.RList,this.RPairlist=this.globalShelter.RPairlist,this.REnvironment=this.globalShelter.REnvironment,this.RSymbol=this.globalShelter.RSymbol,this.RString=this.globalShelter.RString,this.RCall=this.globalShelter.RCall,this.objs={baseEnv:await this.RObject.getPersistentObject("baseEnv"),globalEnv:await this.RObject.getPersistentObject("globalEnv"),null:await this.RObject.getPersistentObject("null"),true:await this.RObject.getPersistentObject("true"),false:await this.RObject.getPersistentObject("false"),na:await this.RObject.getPersistentObject("na")},t}close(){o(this,b).close()}async read(){return await o(this,b).read()}async flush(){return await o(this,b).flush()}write(t){o(this,b).write(t)}writeConsole(t){this.write({type:"stdin",data:t+`
`})}interrupt(){o(this,b).interrupt()}async installPackages(t){for(let e of t){let r={type:"installPackage",data:{name:e}};await o(this,b).request(r)}}async destroy(t){await this.globalShelter.destroy(t)}async evalR(t,e){return this.globalShelter.evalR(t,e)}async evalRVoid(t,e){return this.evalRRaw(t,"void",e)}async evalRBoolean(t,e){return this.evalRRaw(t,"boolean",e)}async evalRNumber(t,e){return this.evalRRaw(t,"number",e)}async evalRString(t,e){return this.evalRRaw(t,"string",e)}async evalRRaw(t,e,r={}){let n=E(r,D,l=>l._payload),s={type:"evalRRaw",data:{code:t,options:n,outputType:e}},a=await o(this,b).request(s);switch(a.payloadType){case"raw":return a.obj;case"ptr":throw new Error("Unexpected ptr payload type returned from evalRVoid")}}};b=new WeakMap;var m,h,Se,pt=class{constructor(t){u(this,m,""),u(this,h,void 0),u(this,Se,!1),c(this,h,t)}async init(){if(o(this,Se))return;let t={type:"newShelter"},e=await o(this,h).request(t);c(this,m,e.obj),this.RObject=T(o(this,h),o(this,m),"object"),this.RLogical=T(o(this,h),o(this,m),"logical"),this.RInteger=T(o(this,h),o(this,m),"integer"),this.RDouble=T(o(this,h),o(this,m),"double"),this.RComplex=T(o(this,h),o(this,m),"complex"),this.RCharacter=T(o(this,h),o(this,m),"character"),this.RRaw=T(o(this,h),o(this,m),"raw"),this.RList=T(o(this,h),o(this,m),"list"),this.RPairlist=T(o(this,h),o(this,m),"pairlist"),this.REnvironment=T(o(this,h),o(this,m),"environment"),this.RSymbol=T(o(this,h),o(this,m),"symbol"),this.RString=T(o(this,h),o(this,m),"string"),this.RCall=T(o(this,h),o(this,m),"call"),c(this,Se,!0)}async purge(){let t={type:"shelterPurge",data:o(this,m)};await o(this,h).request(t)}async destroy(t){let e={type:"shelterDestroy",data:{id:o(this,m),obj:t._payload}};await o(this,h).request(e)}async size(){let t={type:"shelterSize",data:o(this,m)};return(await o(this,h).request(t)).obj}async evalR(t,e={}){let r=E(e,D,a=>a._payload),n={type:"evalR",data:{code:t,options:r,shelter:o(this,m)}},s=await o(this,h).request(n);switch(s.payloadType){case"raw":throw new Error("Unexpected payload type returned from evalR");default:return I(o(this,h),s)}}async captureR(t,e={}){let r=E(e,D,a=>a._payload),n={type:"captureR",data:{code:t,options:r,shelter:o(this,m)}},s=await o(this,h).request(n);switch(s.payloadType){case"ptr":throw new Error("Unexpected payload type returned from evalR");case"raw":{let a=s.obj,l=I(o(this,h),a.result),p=a.output;for(let y=0;y<p.length;++y)p[y].type!=="stdout"&&p[y].type!=="stderr"&&(p[y].data=I(o(this,h),p[y].data));return{result:l,output:p}}}}};m=new WeakMap,h=new WeakMap,Se=new WeakMap;function Or(t){return new Proxy(pt,{construct:async()=>{let e=new pt(t);return await e.init(),e}})}const ____slug__vue_vue_type_style_index_0_lang="",_sfc_main={data(){return{command:"",pos:0,data:"",shelter:null,tab:null}},async setup(){const route=useRoute(),id=ref(route.query.id?route.query.id:""),path=route.path+id.value,store=useCommandStore(),{command}=storeToRefs(store),webRConsole=new Wt({stdout:t=>document.getElementById("out").append(t+`
`),stderr:t=>document.getElementById("out").append(t+`
`),prompt:t=>document.getElementById("out").append(t),canvasExec:line=>{document.getElementById("plot-canvas"),eval(`canvas.getContext('2d').${line}`)}}),tutosList=await queryContent(path).find();for(var i=tutosList.length-1;i>=0;i--)(tutosList[i]._path==path+"_dir"||tutosList[i]._path==path+"/_dir")&&tutosList.splice(i,1);return{webRConsole,tutosList,store,command}},async mounted(){await this.webRConsole.run(),this.data=this.tutosList[this.pos]},methods:{async getOutput(){for(;;){const t=await this.webR.read();switch(t.type){case"stdout":this.stdout.push(t.data);break;case"stderr":this.stderr=this.srdout+t.data;break;default:console.warn(`Unhandled output type: ${t.type}.`)}}},async onEnter(){this.webRConsole.stdin(this.command),document.getElementById("out").append(this.command+`
`),this.command="",console.log(this.webRConsole.webR.objs)},async nextBtn(){if(this.pos<this.tutosList.length){this.pos=this.pos+1;const{data:t}=await useAsyncData("page-data",()=>queryContent(this.tutosList[this.pos]._path).findOne());this.data=t}},async prevBtn(){if(this.pos>0){this.pos=this.pos-1;const{data:t}=await useAsyncData("page-data",()=>queryContent(this.tutosList[this.pos]._path).findOne());this.data=t}}},watch:{command(t){if(this.store.changed){console.log(this.store.command);for(const e of this.store.command)this.webRConsole.stdin(e),document.getElementById("out").append(e+`
`);this.store.reset()}}}},_hoisted_1={class:"prose",style:{}},_hoisted_2=createBaseVNode("br",null,null,-1),_hoisted_3={style:{height:"50%"}},_hoisted_4=createBaseVNode("pre",null,[createBaseVNode("code",{id:"out"},"Loading webR, please wait...")],-1),_hoisted_5={style:{height:"50%"}},_hoisted_6=createBaseVNode("canvas",{id:"plot-canvas",width:"1008",height:"1008",style:{margin:"auto",width:"100%",height:"100%"}},null,-1);function _sfc_render(t,e,r,n,s,a){const l=_sfc_main$1,p=_sfc_main$2,y=resolveComponent("v-card-text"),x=resolveComponent("v-btn"),Q=resolveComponent("v-chip"),X=resolveComponent("v-card-actions"),$=resolveComponent("v-card"),z=resolveComponent("v-col"),ct=resolveComponent("v-textarea"),ht=resolveComponent("v-tab"),dt=resolveComponent("v-tabs"),mt=resolveComponent("v-window-item"),ft=resolveComponent("v-window"),St=resolveComponent("v-row");return openBlock(),createBlock(St,{class:"fill-height"},{default:withCtx(()=>[createVNode(z,{class:"fill-height overflow-y-auto"},{default:withCtx(()=>[createVNode($,{class:"fill-height"},{default:withCtx(()=>[createVNode(y,{class:"fill-height overflow-y-auto",style:{"max-height":"calc(100% - 50px)"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[s.data?(openBlock(),createBlock(p,{key:0,value:s.data},{default:withCtx(()=>[createBaseVNode("h1",null,toDisplayString(s.data.title),1),_hoisted_2,createVNode(l,{value:s.data},null,8,["value"])]),_:1},8,["value"])):createCommentVNode("",!0)])]),_:1}),createVNode(X,{class:"d-flex justify-end",style:{"background-color":"lightsteelblue"}},{default:withCtx(()=>[createVNode(x,{disabled:s.pos==0,onClick:a.prevBtn},{default:withCtx(()=>[createTextVNode("Prev")]),_:1},8,["disabled","onClick"]),createVNode(x,{disabled:s.pos==n.tutosList.length-1,onClick:a.nextBtn,class:"me-2"},{default:withCtx(()=>[createTextVNode("Next")]),_:1},8,["disabled","onClick"]),createVNode(Q,null,{default:withCtx(()=>[createTextVNode(toDisplayString(s.pos+1)+" / "+toDisplayString(n.tutosList.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(z,{class:"fill-height"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3,[createVNode($,{class:"fill-height"},{default:withCtx(()=>[createVNode(y,{class:"fill-height overflow-y-auto"},{default:withCtx(()=>[_hoisted_4,createVNode(ct,{onKeyup:withKeys(a.onEnter,["enter"]),modelValue:n.command,"onUpdate:modelValue":e[0]||(e[0]=N=>n.command=N),variant:"underlined","prepend-icon":"mdi-chevron-right"},null,8,["onKeyup","modelValue"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_5,[createVNode(dt,{modelValue:s.tab,"onUpdate:modelValue":e[1]||(e[1]=N=>s.tab=N),class:"mt-3"},{default:withCtx(()=>[createVNode(ht,{value:"plot"},{default:withCtx(()=>[createTextVNode("Plot")]),_:1})]),_:1},8,["modelValue"]),createVNode(y,null,{default:withCtx(()=>[createVNode(ft,{modelValue:s.tab,"onUpdate:modelValue":e[2]||(e[2]=N=>s.tab=N)},{default:withCtx(()=>[createVNode(mt,{value:"plot"},{default:withCtx(()=>[_hoisted_6]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1})}const ____slug_=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{____slug_ as default};
