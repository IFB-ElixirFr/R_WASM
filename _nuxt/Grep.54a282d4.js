import{_ as x,m as w,r as u,o as h,c as y,a as t,b as o,w as e,d as n,t as b,z as V,f as I,j as k,F as C,x as E}from"./entry.85fce134.js";import{B as R}from"./aioli.d4620e8e.js";import{a as B}from"./ace.61508a3f.js";const T={props:{text:String,command:String},setup(r){var l=new Date().valueOf(),s="editorArea"+l,i="output"+l;let d=w().params.tool,p="/"+E().public.repo_name.split("/")[1]+"/man/"+d+".html";return{idEditor:s,idOutput:i,tool:d,manPage:p}},data(){return{dialog:!1,editor:null,commandInput:null,noResult:!1}},mounted(){this.commandInput=this.command,this.editor=B.edit(this.idEditor,{tabSize:4,autoScrollEditorIntoView:!0,maxLines:50,minLines:1})},methods:{async runTool(){document.getElementById(this.idOutput).innerHTML="Loading...",this.noResult=!1;const r=await new R(["grep/3.7"]);var l={name:"data.txt",data:this.editor.getValue()};await r.mount(l),console.log(this.commandInput);var s=this.commandInput;s=s.replace(this.tool,"").trim();var i=this.parseFlags(s).map(d=>d.replaceAll("'",""));console.log(i);const a=await r.exec("grep",i);a==""&&(this.noResult=!0),console.log(a),document.getElementById(this.idOutput).innerHTML=a},parseFlags(r){return r.match(/(?:[^\s']+|'[^']*')+/g)||[]}}},L=t("p",{class:"text-h6"},"File content",-1),O=t("code",null,"data.txt",-1),F={style:{"max-height":"200px","overflow-y":"auto"}},N=["id"],S=t("p",{class:"text-h6"},"Command",-1),z=t("code",null,"data.txt",-1),A=["src"],P=t("p",{class:"text-h6"},"Output",-1),U=["id"];function D(r,l,s,i,a,d){const m=u("v-icon"),_=u("v-btn"),p=u("v-card-text"),f=u("v-card"),g=u("v-dialog"),v=u("v-text-field");return h(),y(C,null,[L,t("p",null,[t("b",null,[o(m,null,{default:e(()=>[n("mdi-information")]),_:1}),n(" This content will be written to the file "),O])]),t("div",F,[t("div",{id:i.idEditor,style:{width:"100%",height:"200px"}},b(s.text),9,N)]),S,t("p",null,[t("b",null,[o(m,null,{default:e(()=>[n("mdi-information")]),_:1}),n(" The file name must always be "),z])]),t("p",null,[t("b",null,[o(m,null,{default:e(()=>[n("mdi-information")]),_:1}),n(" Use simple quote for write a text argument.")])]),o(g,{modelValue:a.dialog,"onUpdate:modelValue":l[0]||(l[0]=c=>a.dialog=c),width:"75%"},{activator:e(({props:c})=>[o(_,V({color:"primary"},c,{size:"small",class:"mb-4"}),{default:e(()=>[o(m,null,{default:e(()=>[n("mdi-book")]),_:1}),n(" Read man ")]),_:2},1040)]),default:e(()=>[o(f,null,{default:e(()=>[o(p,{style:{height:"90vh"}},{default:e(()=>[t("iframe",{src:i.manPage,frameborder:"0",style:{height:"100%",width:"100%"}},null,8,A)]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(v,{modelValue:a.commandInput,"onUpdate:modelValue":l[1]||(l[1]=c=>a.commandInput=c),style:{"font-family":"monospace, monospace !important"}},null,8,["modelValue"]),o(_,{class:"mt-4",onClick:d.runTool},{default:e(()=>[n("Run tool ")]),_:1},8,["onClick"]),P,t("pre",{id:i.idOutput},"Await run click...",8,U),o(f,{color:"info"},{default:e(()=>[a.noResult?(h(),I(p,{key:0},{default:e(()=>[o(m,null,{default:e(()=>[n("mdi-information")]),_:1}),n(" No result ")]),_:1})):k("",!0)]),_:1})],64)}const q=x(T,[["render",D]]);export{q as default};
